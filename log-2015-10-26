Script started on Mon Oct 26 10:52:50 2015
bash: /path/to/your/virtualenvwrapper.sh: No such file or directory
[?1034hbash-3.2$ vi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 39071C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[28;1H[93m    [mary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h540[?25l[27m[m[H[2J[1;1H[93m528 [m[7C } /* 509è¡Œç›®ã‹ã‚‰ã®foræ–‡ã¯ã“ã“ã¾ã§ */
[93m529 [m[7C // Learn weights input -> hidden
[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[10;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t));
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();[14;7H[?12l[?25h[15;7H[16;7H[17;5H[18;5H[19;7H[20;7H[21;7H[22;7H[23;7H[24;7H[25;7H[26;7H[27;7H[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m555 [m  if (negative > 0) InitUnigramTable();[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m556 [m  start = clock();[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m559 [m  fo = fopen(output_file, "wb");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m560 [m  if (classes == 0) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m561 [m    // Save the word vectors[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m564 [m      fprintf(fo, "%s ", vocab[a].word);[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][28;1H[93m    [m, sizeof(real), 1, fo);[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[28;1H[93m    [m + b]);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m567 [m      fprintf(fo, "\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m568 [m    }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[17;25H[46m{[m[28;1H[93m569 [m  [46m}[m else {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[16;25H{[27;7H}
[93m570 [m    // Run K-means on the word vectors[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m571 [m    int clcn = classes, iter = 10, closeid;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[28;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[28;1H[93m    [mç›®ã§è§£æ”¾ */[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m574 [m    real closev, x;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[28;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m577 [m    for (a = 0; a < iter; a++) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[28;1H[93m    [mayer1_size + d];[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m582 [m[7C centcn[cl[c]]++;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m583 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m584 [m      for (b = 0; b < clcn; b++) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m585 [m[7C closev = 0;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m586 [m[7C for (c = 0; c < layer1_size; c++) {[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m589 [m[7C }
[93m590 [m[7C closev = sqrt(closev);[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m591 [m[7C for (c = 0; c < layer1_size; c++) cent[layer1_size * b + c] /= closev;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m592 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m593 [m      for (c = 0; c < vocab_size; c++) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m594 [m[7C closev = -10;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m595 [m[7C closeid = 0;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m596 [m[7C for (d = 0; d < clcn; d++) {
[93m597 [m[9C x = 0;[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[28;1H[93m    [m layer1_size + b];[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m599 [m[9C if (x > closev) {[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m602 [m[9C }[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m603 [m[7C }[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m604 [m[7C cl[c] = closeid;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m605 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m606 [m    }[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m613 [m  fclose(fo);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m615 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m619 [m    if (a == argc - 1) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m620 [m      printf("Argument missing for %s\n", str);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m621 [m      exit(1);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m623 [m    return a;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[22;61H[46m{[m[28;1H[93m624 [m  [46m}[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[20;61H{[26;7H}
[93m625 [m  return -1;
[93m626 [m}[27;7H[?12l[?25h[?25l[18;50H[46m{[28;5H}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[17;50H{[27;5H}
[93m627 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m630 [m  if (argc == 1) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m632 [m    printf("Options:\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m633 [m    printf("Parameters for training:\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m653 [m    printf("\t-min-count <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;7H[?12l[?25h[?25l

:[?12l[?25h540[?25l[27m[m[H[2J[1;1H[93m528 [m[7C } /* 509è¡Œç›®ã‹ã‚‰ã®foræ–‡ã¯ã“ã“ã¾ã§ */
[93m529 [m[7C // Learn weights input -> hidden
[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[10;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t));
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();[14;7H[?12l[?25h[15;7H[16;7H[17;5H[18;5H[19;7H[20;7H[21;7H[22;7H[23;7H[24;7H[25;7H[26;7H[27;7H[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m555 [m  if (negative > 0) InitUnigramTable();[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m556 [m  start = clock();[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m559 [m  fo = fopen(output_file, "wb");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m560 [m  if (classes == 0) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m561 [m    // Save the word vectors[28;7H[?12l[?25h[27;7H[26;7H[25;7H[23;7H[22;7H[21;7H[20;7H[19;7H[18;7H[17;7H[16;7H[15;7H[14;7Hpthread_t *pt =[?25l [46m([11C)[14;23H[?12l[?25h[?25l[m([11C)[14;24H[?12l[?25hpthread_t [?25l[14;23H[46m([11C)[?12l[?25h[?25l[m[14;23H([11C)[?12l[?25hmallo[?25lc[46m([31C)[14;42H[?12l[?25h[?25l[m([31C)[14;43H[?12l[?25hnum_threads * sizeo[?25lf[46m([9C)[14;63H[?12l[?25h[?25l[m([9C)[14;64H[?12l[?25hpthread_[?25l[14;63H[46m([9C)[?12l[?25h[?25l[14;42H([m[20C([9C)[46m)[?12l[?25h[?25l[m[14;42H([31C)[?12l[?25h[?25l[29;1H/[?12l[?25hfree[?25l[27m[m[H[2J[1;1H[93m597 [m[9C x = 0;
[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[3;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo);
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;[14;9H[?12l[?25h[?25l[29;1H/free[15;9H[?12l[?25h[?25l[29;1H[16;9H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[2;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[4;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[10;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ[12;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[17;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[25;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[38;5;224msearch hit BOTTOM, continuing at TOP[14;11H[?12l[?25h[?25l[m[29;1H?free[29;6H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[2;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo);
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[38;5;224msearch hit TOP, continuing at BOTTOM[15;9H[?12l[?25h[?25l[m[29;1H?free[29;6H[K[29;1H[14;9H[?12l[?25h[?25l[29;1H[13;9H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m529 [m[7C // Learn weights input -> hidden
[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[9;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t));
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[?25l[29;1H/free[27m[m[H[2J[1;1H[93m597 [m[9C x = 0;
[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[3;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo);
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;[14;9H[?12l[?25h[?25l[29;1H?free[27m[m[H[2J[1;1H[93m529 [m[7C // Learn weights input -> hidden
[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[9;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t));
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[15;7H[16;5H[17;5H[18;7H[19;7H[20;7H[21;7H[22;7H[21;7H[68C[?25l[29;1H[1m-- INSERT --[21;76H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[22;63H[21;83H[22;63H[23;30H[24;80H[23;30H[22;63H[21;80H[?25l p */[?12l[?25h[?25lpt */[?12l[?25h[?25lth */[?12l[?25h[?25lhr */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[21;87H[?12l[?25h[?25l[22;28r[22;1H[L[1;29r[21;86Hd( **[22;1H[93m    [m/[21;88H[?12l[?25h[?25l[46m()[m  [22;1H[93m    [m*/[21;89H[?12l[?25h[?25l  [22;1H[93m [21;88H[?12l[?25h[?25l[m[46m([mãƒ[22;4H[93m [mãƒ«ãƒ[46m)[m */[?12l[?25h[?25lã‚¹ãƒ¬ãƒƒãƒ‰[46m)[m */[?12l[?25h[?25lã®[46m)[m */[?12l[?25h[?25lãƒ©ã‚¤ãƒ–ãƒ©ãƒª[46m)[m */[?12l[?25h[29;1H[K[22;27H[?25l[21;87H([22;29H)[?12l[?25h[?25l[29;1H/[?12l[?25hpthread[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[29;1H[K[27;41H[?12l[?25h[?25l

/pthread[1;28r[28;1H
[1;29r[28;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);[29;1H[K[28;41H[?12l[?25h[?25l
?pthread[26;41H[?12l[?25h[?25l


[16;80H[?12l[?25h[?25l[29;1H[16;64H[?12l[?25h[?25l[29;1H[16;24H[?12l[?25h[?25l[29;1H[16;7H[?12l[?25h[?25l[29;1H[10;7H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {[14;15H[?12l[?25h[?25l[29;1H/pthread[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[?25l[29;1H?pthread[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {[14;15H[?12l[?25h[?25l[29;1H/pthread[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[?25l[29;1H?pthread[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {[14;15H[?12l[?25h[?25l[29;1H/pthread[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[15;5H[?25l[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) [46m{[m /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;38H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) [46m{[m /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;38H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) [46m{[m /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;38H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) [46m{[m /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;38H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m}
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;5H[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;6H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 3 */[?12l[?25h[?25l36 */[?12l[?25h[?25l63 */[?12l[?25h[?25l3è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ã® */[?12l[?25h[?25lT */[?12l[?25h[?25lTr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[29;1H[K[14;27H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h363[?25l[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;5H[?12l[?25h[?25l[29;1H:[?12l[?25h543[?25l[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®Train */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;5H[?12l[?25h} /* 363[2C[2C[2C[2C[2CTrai[?25l[29;1H[1m-- INSERT --[14;28H[?12l[?25h[?25l[mnM */[?12l[?25h[?25lMo */[?12l[?25h[?25lod */[?12l[?25h[?25lde */[?12l[?25h[?25lel */[?12l[?25h[?25llT */[?12l[?25h[?25lTh */[?12l[?25h[?25lhr */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25ldçµ‚ã‚ã‚Š */[?12l[?25h[29;1H[K[14;26H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hpthread[?25l[19;7H[?12l[?25h[?25l[29;1H?[13;7H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {[14;15H[?12l[?25h[?25l[29;1H?pthread[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[3;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[13;1H[93m    [moid *)a);
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][22;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[24;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[38;5;224msearch hit TOP, continuing at BOTTOM[14;41H[?12l[?25h[?25l[m[29;1H/pthread[29;9H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;15H[?12l[?25h[?25l[m[29;1H/pthread[29;9H[K[29;1H[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL);
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25hpthread_exi[?25lt[46m([mNULL[46m)[?12l[?25h[?25l[m(NULL)[?12l[?25hNUL[?25l[46m([mNULL[46m)[?12l[?25h[?25l[m(NULL)[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;26H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l å‘¼ã³å‡ºã—ãŸ */[?12l[?25h[?25lã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ */[?12l[?25h[?25lçµ‚äº† */[?12l[?25h[29;1H[K[14;52H[?25l[?12l[?25h[3C[?25l[29;1H/[?12l[?25hther[?25l[29;5H[K[29;5H[?12l[?25h[?25l[29;4H[K[29;4H[?12l[?25hread[?25l[20;8H[?12l[?25h[?25l[29;1H?[14;8H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;48H[?12l[?25h[?25l[29;1H?thread[6;53H[?12l[?25h[?25l[29;1H[5;57H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[2;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[4;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[6;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[15;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[17;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[21;1H[93m    [m));
[93m386 [m      if (alpha < starting_alpha * 0.0001) alpha = starting_alpha * 0.0001;
[93m387 [m    }
[93m388 [m    if (sentence_length == 0) { /* ifæ–‡(406è¡Œç›®ã¾ã§),364è¡Œç›®ã‚ˆã‚Šå½“åˆã¯sentence_lengthh[25;1H[93m    [m == 0ã ãŒ389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã§æœ€çµ‚çš„ã«sentence_lengthãŒ1000ã«ãªã‚‹ */
[93m389 [m      while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(404è¡Œç›®ã¾ã§) */
[93m390 [m[7C word = ReadWordIndex(fi); /* 114è¡Œç›®ã§å®šç¾©ã®å˜èªã‚’èª­å–ã‚Šï¼Œèªå½™ä¸­ã§ã®å˜èªã®ç•ª[94m>>[m[28;1H[93m    [må·ã‚’è¿”ã™ReadWordIndex */[14;58H[?12l[?25h[?25l[29;1H?thread[7;44H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[5;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[9;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[11;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[13;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[15;1H[93m    [m, min_reduce = 1;
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[18;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [20;1H[93m    [m0;
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[22;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */[14;78H[?12l[?25h[?25l[29;1H/thread[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;44H[?12l[?25h[?25l[29;1H?thread[27m[m[H[2J[1;1H[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[5;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[9;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[11;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[13;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[15;1H[93m    [m, min_reduce = 1;
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[18;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [20;1H[93m    [m0;
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[22;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */[14;78H[?12l[?25h[15;21H[16;5Hi[14;6H[15;21H[?25l[29;1H[1m-- INSERT --[15;22H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l n */[?12l[?25h[?25lnu */[?12l[?25h[?25lum */[?12l[?25h[?25lu */[15;31H[K[15;28H[?12l[?25h[?25ln */[15;30H[K[15;27H[?12l[?25h[?25l  */[15;29H[K[15;26H[?12l[?25h[?25l ã‚¹ãƒ¬ãƒƒãƒ‰æ•° */[?12l[?25h[?25ln */[?12l[?25h[?25lnu */[?12l[?25h[?25lum */[?12l[?25h[?25lm_ */[?12l[?25h[?25l_t */[?12l[?25h[?25lth */[?12l[?25h[?25lhr */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25lds */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l12 */[?12l[?25h[29;1H[K[15;51H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hnum[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25hthread[?25l[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;44H[?12l[?25h[?25l[29;1H/[?12l[?25hfre[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25hseek[?25l[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[?25l[29;1H/fseek[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END);
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */
[38;5;224msearch hit BOTTOM, continuing at TOP[13;7H[?12l[?25h[?25l[m[29;1H/fseek[29;7H[K[29;1H[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;7H[?12l[?25h[?25l[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[?25l[29;1H/fseek[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END);
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */
[38;5;224msearch hit BOTTOM, continuing at TOP[13;7H[?12l[?25h[?25l[m[29;1H/fseek[29;7H[K[29;1H[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;7H[?12l[?25h[?25l[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[?25l[29;1H/fseek[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END);
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */
[38;5;224msearch hit BOTTOM, continuing at TOP[13;7H[?12l[?25h[mfsee[?25lk[46m([16C)[13;12H[?12l[?25h[?25l[m([16C)[13;13H[?12l[?25hfin, 0, SEEK_EN[?25l[13;12H[46m([16C)[?12l[?25h[?25l[m[13;12H([16C)[?12l[?25h[?25l[29;1H[1m-- INSERT --[m[29;13H[K[13;31H[?12l[?25h[?25l;/[?12l[?25h[?25l[13;31H[K[13;31H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l [?12l[?25h[?25l  */[?12l[?25h [?25l ãƒ•ã‚¡ã‚¤ãƒ« */[?12l[?25h[?25lf */[?12l[?25h[?25lfi */[?12l[?25h[?25lin */[?12l[?25h[?25lnã® */[?12l[?25h[?25lãƒ•ã‚¡ã‚¤ãƒ« */[?12l[?25h[?25l1 */[?12l[?25h[?25l */ [?12l[?25h[?25lä½ç½® */[?12l[?25h[?25læ¼”ç®—å­ */[?12l[?25h[?25lã‚’ */[?12l[?25h[?25lS */[?12l[?25h[?25lSE */[?12l[?25h[?25lEE */[?12l[?25h[?25lEK */[?12l[?25h[?25lK_ */[?12l[?25h[?25l_e */[?12l[?25h[?25l_ */ [?12l[?25h[?25l_E */[?12l[?25h[?25lEN */[?12l[?25h[?25lND */[?12l[?25h[?25lDã‚’ */[?12l[?25h[?25låŸºæº–ã« */[?12l[?25h[?25l0 */[?12l[?25h[?25l[14;28r[14;1H[L[1;29r[13;84H0ãƒã‚¤[94m>>[m[14;1H[93m    [mãƒˆ */[26;1H[94m@                                                                                        [27;1H@                                                                                        [28;1H@                                                                                        [14;7H[?12l[?25h[?25l[mç§»å‹• */[?12l[?25h[29;1H[K[14;9H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hfseek[?25l[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;7H[?12l[?25h[?25l[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[?25l[29;1H?fseek[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;7H[?12l[?25h[?25l[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[?25l[29;1H/fseek[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[13;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */
[38;5;224msearch hit BOTTOM, continuing at TOP[12;7H[?12l[?25h[?25l[m[29;1H/fseek[29;7H[K[29;1H[27m[m[H[2J[1;1H[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[2;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[3;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[9;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[11;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [13;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[22;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[24;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 11[28;1H[93m    [m));[14;7H[?12l[?25h[71C[?25l[29;1H[1m-- INSERT --[14;79H[?12l[?25h[?25l[m [?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;80H /* ãƒ•ã‚¡ã‚¤ [15;1H[93m    [mãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸº[28;1H[94m@                                                                                        [15;44H[?12l[?25h[?25l[mæº–ã«0ãƒã‚¤>    ãƒˆç§»å‹• */[?12l[?25h[?25l ãƒˆç§»å‹• */[15;66H[K[15;57H[?12l[?25h[?25l ãƒˆç§»å‹• */[15;65H[K[15;56H[?12l[?25h[?25l ãƒˆç§»å‹• */[15;64H[K[15;55H[?12l[?25h[?25l>ãƒˆç§»å‹• */[15;63H[K[15;54H[?12l[?25h[?25lãƒˆç§»å‹• */[15;62H[K[15;53H[?12l[?25h[?25liã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;61H[K[15;9H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2CSEEK_END[2C[2C[2C[2C0[2C[2C[2C[2C[2C D[?25lNã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;60H[K[15;38H[?12l[?25h[?25lEã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;59H[K[15;37H[?12l[?25h[?25l_ã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;58H[K[15;36H[?12l[?25h[?25l_Sã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;37H[?12l[?25h[?25lSEã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;38H[?12l[?25h[?25lETã‚’åŸºæº–ã«0ãƒã‚¤ãƒˆç§»å‹• */[15;39H[?12l[?25h[2C[2C[2C[2C0[?25lãƒã‚¤ãƒˆç§»å‹• */[15;60H[K[15;47H[?12l[?25h[?25lfãƒã‚¤ãƒˆç§»å‹• */[15;48H[?12l[?25h[?25lfiãƒã‚¤ãƒˆç§»å‹• */[15;49H[?12l[?25h[?25lilãƒã‚¤ãƒˆç§»å‹• */[15;50H[?12l[?25h[?25lleãƒã‚¤ãƒˆç§»å‹• */[15;51H[?12l[?25h[?25le_ãƒã‚¤ãƒˆç§»å‹• */[15;52H[?12l[?25h[?25l_sãƒã‚¤ãƒˆç§»å‹• */[15;53H[?12l[?25h[?25lsiãƒã‚¤ãƒˆç§»å‹• */[15;54H[?12l[?25h[?25lizãƒã‚¤ãƒˆç§»å‹• */[15;55H[?12l[?25h[?25lzeãƒã‚¤ãƒˆç§»å‹• */[15;56H[?12l[?25h[?25le ãƒã‚¤ãƒˆç§»å‹• */[15;57H[?12l[?25h[?25l /ãƒã‚¤ãƒˆç§»å‹• */[15;58H[?12l[?25h[?25l/ ãƒã‚¤ãƒˆç§»å‹• */[15;59H[?12l[?25h[?25l (ãƒã‚¤ãƒˆç§»å‹• */[15;60H[?12l[?25h[?25l[46m()[mãƒã‚¤ãƒˆç§»å‹• */[15;61H[?12l[?25h[?25l[?12l[?25h[?25l[46m([ml[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;61H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;62H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;63H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;64H[?12l[?25h[?25lg [46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;65H[?12l[?25h[?25l l[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;66H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;67H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;68H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;69H[?12l[?25h[?25l[1C[?12l[?25h[?25l[15;59H([9C)nãƒã‚¤ãƒˆç§»å‹• */[15;71H[?12l[?25h[?25lnuãƒã‚¤ãƒˆç§»å‹• */[15;72H[?12l[?25h[?25lumãƒã‚¤ãƒˆç§»å‹• */[15;73H[?12l[?25h[?25lm_ãƒã‚¤ãƒˆç§»å‹• */[15;74H[?12l[?25h[?25l_tãƒã‚¤ãƒˆç§»å‹• */[15;75H[?12l[?25h[?25lthãƒã‚¤ãƒˆç§»å‹• */[15;76H[?12l[?25h[?25lhrãƒã‚¤ãƒˆç§»å‹• */[15;77H[?12l[?25h[?25l[16;28r[16;1H[L[1;29r[15;76Hreãƒã‚¤ãƒˆç§»å‹• **[16;1H[93m    [m/[15;78H[?12l[?25h[?25leaãƒã‚¤ãƒˆç§»å‹•  [16;1H[93m    [m*/[15;79H[?12l[?25h[?25ladãƒã‚¤ãƒˆç§»å‹• [16;1H[93m    [m */[15;80H[?12l[?25h[?25ldsãƒã‚¤ãƒˆç§»[94m>>[m[16;1H[93m    [må‹• */[15;81H[?12l[?25h[?25ls ãƒã‚¤ãƒˆç§» [16;1H[93m [15;82H[?12l[?25h[?25l[m *ãƒã‚¤ãƒˆ[94m>>[m[16;1H[93m    [mç§»å‹• */[15;83H[?12l[?25h[?25l* ãƒã‚¤ãƒˆ [16;1H[93m [15;84H[?12l[?25h[?25l[m (ãƒã‚¤[94m>>[m[16;1H[93m    [mãƒˆç§»å‹• */[15;85H[?12l[?25h[?25l[46m()[mãƒã‚¤ [16;1H[93m [15;86H[?12l[?25h[?25l[m[3C  [16;1H[93m [15;85H[?12l[?25h[?25l[m[46m([ml[46m)[mãƒ[94m>>[m[16;1H[93m [m[3Cã‚¤ãƒˆç§»å‹• */[15;86H[?12l[?25h[?25llo[46m)[mãƒ [16;1H[93m [15;87H[?12l[?25h[?25l[mon[46m)[m[94m>>[m[16;1H[93m [m[3Cãƒã‚¤ãƒˆç§»å‹• */[15;88H[?12l[?25h[?25lng[46m))[m[16;1H[93m [15;89H[?12l[?25h[?25l[mg  [16;1H[93m    [m[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;5H[?12l[?25h[?25l[93m [ml[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;6H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;7H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;8H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;9H[?12l[?25h[?25lg [46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;10H[?12l[?25h[?25lg[46m)[mãƒã‚¤ãƒˆç§»å‹• */[16;23H[K[16;9H[?12l[?25h[?25l[1C[?12l[?25h[?25l[15;84H(long  [16;1H[93m [m[7C)iãƒã‚¤ãƒˆç§»å‹• */[16;11H[?12l[?25h[?25lidãƒã‚¤ãƒˆç§»å‹• */[16;12H[?12l[?25h[29;1H[K[16;11H[?25l[?12l[?25h[?25l[29;1H?fseek[14;7H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[13;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */[12;7H[?12l[?25h[?25l[29;1H/fseek[27m[m[H[2J[1;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[2;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[8;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[10;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[12;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤[14;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [15;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[23;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[25;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 1[28;1H[94m@                                                                                        [13;7H[?12l[?25h[?25l[m[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§ [21;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[23;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[25;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden
[93m425 [m      cw = 0;
[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[13;11H[?12l[?25h[71C[?25l[29;1H[1m-- INSERT --[13;83H[?12l[?25h[?25l[m [?12l[?25h[?25l[14;28r[14;1H[L[1;29r[13;84H /* ãƒ•[14;1H[93m    [mã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤>    ãƒˆç§»å‹• */[?12l[?25h[?25l ãƒˆç§»å‹• */[14;70H[K[14;61H[?12l[?25h[?25l ãƒˆç§»å‹• */[14;69H[K[14;60H[?12l[?25h[?25l ãƒˆç§»å‹• */[14;68H[K[14;59H[?12l[?25h[?25l>ãƒˆç§»å‹• */[14;67H[K[14;58H[?12l[?25h[?25lãƒˆç§»å‹• */[14;66H[K[14;57H[?12l[?25h[?25lãƒã‚¤ãƒˆç§»å‹• */[14;65H[K[14;52H[?12l[?25h[?25lfãƒã‚¤ãƒˆç§»å‹• */[14;53H[?12l[?25h[?25lfiãƒã‚¤ãƒˆç§»å‹• */[14;54H[?12l[?25h[?25lilãƒã‚¤ãƒˆç§»å‹• */[14;55H[?12l[?25h[?25lleãƒã‚¤ãƒˆç§»å‹• */[14;56H[?12l[?25h[?25le_ãƒã‚¤ãƒˆç§»å‹• */[14;57H[?12l[?25h[?25l_sãƒã‚¤ãƒˆç§»å‹• */[14;58H[?12l[?25h[?25lsiãƒã‚¤ãƒˆç§»å‹• */[14;59H[?12l[?25h[?25lizãƒã‚¤ãƒˆç§»å‹• */[14;60H[?12l[?25h[?25lzeãƒã‚¤ãƒˆç§»å‹• */[14;61H[?12l[?25h[?25le ãƒã‚¤ãƒˆç§»å‹• */[14;62H[?12l[?25h[?25l /ãƒã‚¤ãƒˆç§»å‹• */[14;63H[?12l[?25h[?25l/ ãƒã‚¤ãƒˆç§»å‹• */[14;64H[?12l[?25h[?25l (ãƒã‚¤ãƒˆç§»å‹• */[14;65H[?12l[?25h[?25l[46m()[mãƒã‚¤ãƒˆç§»å‹• */[14;66H[?12l[?25h[?25l[?12l[?25h[?25l[46m([ml[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;66H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;67H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;68H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;69H[?12l[?25h[?25lg [46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;70H[?12l[?25h[?25l l[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;71H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;72H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;73H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[14;74H[?12l[?25h[?25l[1C[?12l[?25h[?25l[14;64H([9C)nãƒã‚¤ãƒˆç§»å‹• */[14;76H[?12l[?25h[?25lnuãƒã‚¤ãƒˆç§»å‹• */[14;77H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;76Humãƒã‚¤ãƒˆç§»å‹• **[15;1H[93m    [m/[14;78H[?12l[?25h[?25lm_ãƒã‚¤ãƒˆç§»å‹•  [15;1H[93m    [m*/[14;79H[?12l[?25h[?25l_tãƒã‚¤ãƒˆç§»å‹• [15;1H[93m    [m */[14;80H[?12l[?25h[?25lthãƒã‚¤ãƒˆç§»[94m>>[m[15;1H[93m    [må‹• */[14;81H[?12l[?25h[?25lhrãƒã‚¤ãƒˆç§» [15;1H[93m [14;82H[?12l[?25h[?25l[mreãƒã‚¤ãƒˆ[94m>>[m[15;1H[93m    [mç§»å‹• */[14;83H[?12l[?25h[?25leaãƒã‚¤ãƒˆ [15;1H[93m [14;84H[?12l[?25h[?25l[madãƒã‚¤[94m>>[m[15;1H[93m    [mãƒˆç§»å‹• */[14;85H[?12l[?25h[?25ldsãƒã‚¤ [15;1H[93m [14;86H[?12l[?25h[?25l[ms ãƒ[94m>>[m[15;1H[93m [m[3Cã‚¤ãƒˆç§»å‹• */[14;87H[?12l[?25h[?25l *ãƒ [15;1H[93m [14;88H[?12l[?25h[?25l[m* [94m>>[m[15;1H[93m [m[3Cãƒã‚¤ãƒˆç§»å‹• */[15;5H[?12l[?25h[?25l[14;88H (([15;1H[93m    [?12l[?25h[?25l[m[14;89H[46m(([m[15;1H[93m    [m[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;6H[?12l[?25h[?25l[?12l[?25h[?25l[93m [ml[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;6H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;7H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;8H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;9H[?12l[?25h[?25lg [46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;10H[?12l[?25h[?25l l[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;11H[?12l[?25h[?25llo[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;12H[?12l[?25h[?25lon[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;13H[?12l[?25h[?25lng[46m)[mãƒã‚¤ãƒˆç§»å‹• */[15;14H[?12l[?25h[?25l[1C[?12l[?25h[?25l[14;89H(([15;1H[93m [m[12C)iãƒã‚¤ãƒˆç§»å‹• */[15;16H[?12l[?25h[?25lidãƒã‚¤ãƒˆç§»å‹• */[15;17H[?12l[?25h[?25l[14;89H[46m(([m[15;1H[93m [m[12C[46m)[?12l[?25h[?25l[?12l[?25h[?25l[m[14;89H(([15;1H[93m [m[12C)[?12l[?25h[?25l[14;89H[46m(([m[15;1H[93m [m[12C[46m)[15;5H[?12l[?25h[?25l[14;89H[?12l[?25h[?25l[m(([15;1H[93m [m[12C)[14;88H[?12l[?25h[?25l[14;64H[46m([9C)[m[14C(([15;1H[93m [14;75H[?12l[?25h[?25l[m[14C(([15;1H[93m [14;74H[?12l[?25h[?25l[m[14;64H([9C)[14C(([15;1H[93m [14;73H[?12l[?25h[?25l[m[46m([9C)[m[14C(([15;1H[93m [14;65H[?12l[?25h[?25l[m[24C(([15;1H[93m [14;64H[?12l[?25h[?25l[m([9C)[14C(([15;1H[93m [14;63H[?12l[?25h[mD[?25lNã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[15;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */[15;29H[K[14;43H[?12l[?25h[?25lEã‚’åŸºæº–ã«file_size / (long long)num_threads * (loo[15;1H[93m    [mng long)idãƒã‚¤ãƒˆç§»å‹• */[15;28H[K[14;42H[?12l[?25h[?25l_ã‚’åŸºæº–ã«file_size / (long long)num_threads * (lonn[15;1H[93m    [mg long)idãƒã‚¤ãƒˆç§»å‹• */[15;27H[K[14;41H[?12l[?25h[?25l_Sã‚’åŸºæº–ã«file_size / (long long)num_threads * (loo[15;1H[93m    [mng long)idãƒã‚¤ãƒˆç§»å‹• */[14;42H[?12l[?25h[?25lSEã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[15;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */[14;43H[?12l[?25h[?25lETã‚’åŸºæº–ã«file_size / (long long)num_threads * (([15;1H[93m    [mlong long)idãƒã‚¤ãƒˆç§»å‹• */[14;44H[?12l[?25h[?25liã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[15;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */[15;29H[K[14;13H[?12l[?25h[29;1H[K[14;12H[?25l[?12l[?25h[?25l[29;1H/fseek[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[13;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeoo[22;1H[93m    [mf(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sizz[26;1H[93m    [meof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²å½“[27;1H[93m    [mã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®å€æ•°[28;1H[93m    [m */
[38;5;224msearch hit BOTTOM, continuing at TOP[12;7H[?12l[?25h[?25l[m[29;1H/fseek[29;7H[K[29;1H[27m[m[H[2J[1;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[2;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[8;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[10;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[12;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤[14;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [15;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[23;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[25;1H[93m    [m;
[93m383 [m[7C fflush(stdout);
[93m384 [m      }
[93m385 [m      alpha = starting_alpha * (1 - word_count_actual / (real)(iter * train_words + 1[28;1H[94m@                                                                                        [13;7H[?12l[?25h[?25l[m[29;1H/fseek[27m[m[H[2J[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[3;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[6;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•[14;1H[93m    [mã‚¡ã‚¤ãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[15;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;
[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;
[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§ [23;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */
[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[25;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[27;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden[13;11H[?12l[?25h[?25l[29;1H/[?12l[?25hpthread[?25l[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº† */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;7H[?12l[?25h[?25l[29;1H/pthread[20;7H[?12l[?25h[?25l[29;1H?[14;7H[?12l[?25hpthread_exi[?25lt[46m([mNULL[46m)[?12l[?25h[?25l[m(NULL)[?12l[?25hNUL[?25l[46m([mNULL[46m)[?12l[?25h[?25l[m(NULL)[?12l[?25h; /* [2C[2C[2C[2C[2C[2C[15;41H[16;5H[15;41H[?25l[29;1H[K[29;1H/[?12l[?25hThread[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[29;1H[K[27;80H[?12l[?25h[?25l

?Thread[12;33H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */[15;21H[?12l[?25h[?25l[29;1H?Thread[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[5;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[15;1H[93m    [moid *)a);
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][24;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[26;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[38;5;224msearch hit TOP, continuing at BOTTOM[14;80H[?12l[?25h[?25l[m[29;1H/Thread[29;8H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;21H[?12l[?25h[?25l[m[29;1H[K[29;1H/[?12l[?25hthread[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤[26;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [27;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */[29;1H[K[25;44H[?12l[?25h[?25l[29;1H/thread[26;74H[?12l[?25h[?25l


[1;28r[1;1H[6M[1;29r[23;1H[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[29;1H[K[28;58H[?12l[?25h[?25l
/thread[27m[m[H[2J[1;1H[93m399 [m[9C if (ran < (next_random & 0xFFFF) / (real)65536) continue; /* ran < (next_raa[2;1H[93m    [mndom & 0xFFFF) / (real)65536 ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦390è¡Œç›®ã«æˆ»ã‚‹ */
[93m400 [m[7C } /* 396è¡Œç›®ã‹ã‚‰ã®ifæ–‡ã“ã“ã¾ã§ */
[93m401 [m[7C sen[sentence_length] = word; /* é…åˆ—senã®å„è¦ç´ ã«wordã‚’ä»£å…¥ */
[93m402 [m[7C sentence_length++; /* ã“ã“ã§sentence_lengthãŒå¢—ãˆã‚‹ */
[93m403 [m[7C if (sentence_length >= MAX_SENTENCE_LENGTH) break; /* sentence_lengthãŒMAX_SEE[7;1H[93m    [mNTENCE_LENGTH == 1000ã«é”ã—ãŸæ™‚389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º (i.e. é…åˆ—senã¯MAX_SENN[8;1H[93m    [mTENCE_LENGTH + 1å€‹ã®è¦ç´ ãŒæœ‰ã‚‹ã®ã§ï¼Œsenã®å„è¦ç´ ã«wordã‚’ä»£å…¥ã—çµ‚ã‚ã£ãŸã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’æŠœ[9;1H[93m    [mã‘ã‚‹) */
[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */
[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[12;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */
[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */
[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[15;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */
[93m408 [m      word_count_actual += word_count - last_word_count;
[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */
[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */
[93m411 [m      word_count = 0;
[93m412 [m      last_word_count = 0;
[93m413 [m      sentence_length = 0;
[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•[23;1H[93m    [mã‚¡ã‚¤ãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[24;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */
[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */
[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */
[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */
[93m418 [m    if (word == -1) continue;[14;57H[?12l[?25h[?25l[29;1H/thread[15;53H[?12l[?25h[?25l[29;1H[22;48H[?12l[?25h[?25l[29;1H[23;78H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[8;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº† */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[21;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();[14;8H[?12l[?25h[?25l[29;1H/[?12l[?25hpthread_[?25l[20;7H[?12l[?25h[?25l[29;1H[20;24H[?12l[?25h[?25l[29;1H[20;64H[?12l[?25h[?25l[29;1H[1;28r[1;1H[3M[1;29r[26;1H[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[29;1H[K[27;41H[?12l[?25h[?25l

/pthread_[1;28r[28;1H
[1;29r[28;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);[29;1H[K[28;41H[?12l[?25h[?25l
/pthread_[38;5;224msearch hit BOTTOM, continuing at TOP[10;7H[?12l[?25h[?25l[m[29;1H/pthread_[29;10H[K[29;1H[16;7H[?12l[?25h[?25l[29;1H[16;24H[?12l[?25h[?25l[29;1H[16;64H[?12l[?25h[?25l[29;1H[26;41H[?12l[?25h[?25l


[28;41H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[10;7H[?12l[?25h[?25l[m[29;1H/pthread_[29;10H[K[29;1H[16;7H[?12l[?25h[?25l[29;1H[16;24H[?12l[?25h[?25l[29;1H[16;64H[?12l[?25h[?25l[29;1H[26;41H[?12l[?25h[?25l


[28;41H[?12l[?25h[?25l[29;1H[K[29;1H/[?12l[?25hTrainModelThread[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢ [2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;11H[?12l[?25h[?25l[m[29;1H?TrainModelThread[29;18H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[5;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[15;1H[93m    [moid *)a);
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][24;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[26;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[38;5;224msearch hit TOP, continuing at BOTTOM[14;70H[?12l[?25h[?25l[m[29;1H/TrainModelThread[29;18H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢ [2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;11H[?12l[?25h[?25l[m[29;1H?TrainModelThread[29;18H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[5;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[15;1H[93m    [moid *)a);
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][24;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[26;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[38;5;224msearch hit TOP, continuing at BOTTOM[14;70H[?12l[?25h[?25l[m[29;1H?TrainModelThread[29;18H[K[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 [m[29;1H[K[1;23H[?12l[?25h[?25l[29;1H/TrainModelThread[16;70H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;11H[?12l[?25h[?25l[m[29;1H/TrainModelThread[29;18H[K[29;1H[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº† */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;23H[?12l[?25h[?25l[29;1H/TrainModelThread[1;28r[1;1H[2M[1;29r[27;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[28;1H[93m    [moid *)a);[29;1H[K[27;70H[?12l[?25h[?25l

/[?12l[?25hpthread[?25l[1;28r[28;1H
[1;29r[28;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);[29;1H[K[28;41H[?12l[?25h[?25l
/pthread[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[23;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;15H[?12l[?25h[?25l[m[29;1H?pthread[29;9H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[3;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[13;1H[93m    [moid *)a);
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL);
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][22;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[24;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[38;5;224msearch hit TOP, continuing at BOTTOM[14;41H[?12l[?25h[?25l[m[29;1H?pthread[29;9H[K[29;1H[12;41H[?12l[?25h[13;13H[?25l[29;1H[1m-- INSERT --[13;14H[?12l[?25h[?25l[m [?12l[?25h[?25l .[?12l[?25h[?25l[13;15H[K[13;15H[?12l[?25h[?25l /[?12l[?25h[?25l/+[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l[13;16H[K[13;16H[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l  */[?12l[?25h  [?25l */[13;21H[K[13;18H[?12l[?25h[?25l 0 */[?12l[?25h[?25l0< */[?12l[?25h[?25l0 */[13;22H[K[13;19H[?12l[?25h[?25l  */[?12l[?25h[?25l < */[?12l[?25h[?25l<= */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l  */[?12l[?25h[?25l M */[?12l[?25h[?25l  */[13;28H[K[13;25H[?12l[?25h[?25l < */[?12l[?25h[?25l  */[?12l[?25h[?25l n */[?12l[?25h[?25lnu */[?12l[?25h[?25lum */[?12l[?25h[?25lmm */[?12l[?25h[?25lm_ */[?12l[?25h[?25lm */[13;34H[K[13;31H[?12l[?25h[?25lm */[13;33H[K[13;30H[?12l[?25h[?25lm_ */[?12l[?25h[?25l_t */[?12l[?25h[?25lth */[?12l[?25h[?25lhr */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25lds */[?12l[?25h[?25l  */[?12l[?25h[?25l */[13;41H[K[13;38H[?12l[?25h[?25lsã§ */[?12l[?25h[?25læ–°è¦ã« */[?12l[?25h[?25lã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ */[?12l[?25h[?25lä½œæˆ */[?12l[?25h[14;67H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ã‚¹ãƒ¬ãƒƒãƒ‰ */[?12l[?25h[?25lp */[?12l[?25h[?25lpt */[?12l[?25h[?25lt[ */[?12l[?25h[?25l[1 */[?12l[?25h[?25l[46m[[m1[46m][m */[?12l[?25h[?25l[1 */[14;86H[K[14;83H[?12l[?25h[?25l[ */[14;85H[K[14;82H[?12l[?25h[?25l[a */[?12l[?25h[?25l[46m[[ma[46m][m */[?12l[?25h[?25l[a]ãŒ */[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;86Hçµ‚äº† [15;1H[93m    [m */[?12l[?25h[?25l[93m [mã™ã‚‹ã¾ã§ */[?12l[?25h[?25lå®Ÿè¡Œã‚’ */[?12l[?25h[?25lä¸€æ™‚ */[?12l[?25h[?25låœæ­¢ */[?12l[?25h[14;88H[?25l[46m[[ma[46m][m[5C  [15;1H[93m [14;84H[?12l[?25h[?25l[m[5C  [15;1H[93m [14;83H[?12l[?25h[?25l[m[6C  [15;1H[93m [14;82H[?12l[?25h[?25l[m[7C  [15;1H[93m [14;81H[?12l[?25h[?25l[m[a][5C  [15;1H[93m [14;80H[?12l[?25h[?25l[m[14;53H[46m([11C)[m[23C  [15;1H[93m [14;66H[?12l[?25h[?25l[m[14;53H([11C)[23C  [15;1H[93m [12;66H[?12l[?25h[?25l[m[23Cvv[13;1H[93m [m[14;53H[46m([11C)[m[23C  [15;1H[93m [14;66H[?12l[?25h[?25l[m[14;53H([11C)[23C  [15;1H[93m [12;66H[?12l[?25h[mLL, TrainModelThread,[?25l [46m([mvv[13;1H[93m [m[8C[46m)[12;88H[?12l[?25h[?25l[m[1Cvv[13;1H[93m [12;89H[?12l[?25h[?25l[m(vv[13;1H[93m [m[8C)[13;5H[?12l[?25hoid [?25l[12;88H[46m([mvv[13;1H[93m [m[8C[46m)[?12l[?25h[?25l)[?12l[?25h[?25l[12;55H([m[32C(vv[13;1H[93m [m[8C)a[46m)[?12l[?25h[?25l)[?12l[?25h[?25l[m[12;55H([33Cvv[13;1H[93m [m[10C);[?12l[?25h /* 0 <= 1 < num_threads[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25laã‚’ä½œæˆ */[13;55H[?12l[?25h[?25lã‚’ä½œæˆ */[13;63H[K[13;54H[?12l[?25h[?25l(ã‚’ä½œæˆ */[13;55H[?12l[?25h[?25l[46m()[mã‚’ä½œæˆ */[13;56H[?12l[?25h[?25l[?12l[?25h[?25l[46m([mI[46m)[mã‚’ä½œæˆ */[13;56H[?12l[?25h[?25lID[46m)[mã‚’ä½œæˆ */[13;57H[?12l[?25h[?25lD*[46m)[mã‚’ä½œæˆ */[13;58H[?12l[?25h[?25lD[46m)[mã‚’ä½œæˆ */[13;67H[K[13;57H[?12l[?25h[?25lD:[46m)[mã‚’ä½œæˆ */[13;58H[?12l[?25h[?25l: [46m)[mã‚’ä½œæˆ */[13;59H[?12l[?25h[?25l p[46m)[mã‚’ä½œæˆ */[13;60H[?12l[?25h[?25lpt[46m)[mã‚’ä½œæˆ */[13;61H[?12l[?25h[?25lt[[46m)[mã‚’ä½œæˆ */[13;62H[?12l[?25h[?25l[1[46m)[mã‚’ä½œæˆ */[13;63H[?12l[?25h[?25l[[46m)[mã‚’ä½œæˆ */[13;72H[K[13;62H[?12l[?25h[?25l[a[46m)[mã‚’ä½œæˆ */[13;63H[?12l[?25h[?25la][46m)[mã‚’ä½œæˆ */[13;64H[?12l[?25h[?25l[1C[?12l[?25h[?25l[13;54H([9C)[2C[?12l[?25h[2C[2C[?25lã— */[?12l[?25h[?25lï¼Œ */[?12l[?25h[?25lT */[?12l[?25h[?25lTr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[?25lnM */[?12l[?25h[?25lMo */[?12l[?25h[?25lod */[?12l[?25h[?25lde */[?12l[?25h[?25lel */[?12l[?25h[?25llT */[?12l[?25h[?25lTh */[13;87H[?12l[?25h[?25l[14;28r[14;1H[L[1;29r[13;86Hhr **[14;1H[93m    [m/[13;88H[?12l[?25h[?25lre  [14;1H[93m    [m*/[13;89H[?12l[?25h[?25leaa[14;1H[93m    [m */[?12l[?25h[?25l[93m [md */[?12l[?25h[?25ldã‚’ */[?12l[?25h[?25lå®Ÿè¡Œã™ã‚‹ */[?12l[?25h[16;30H[15;88H[?25l[46m[[ma[46m][m[5C  [16;1H[93m [15;84H[?12l[?25h[?25l[m[5C  [16;1H[93m [15;83H[?12l[?25h[?25l[m[6C  [16;1H[93m [15;82H[?12l[?25h[?25l[m[7C  [16;1H[93m [15;81H[?12l[?25h[?25l[m[a][5C  [16;1H[93m [15;80H[?12l[?25h[?25l[mIpt[a]ãŒçµ‚[94m>>[m[16;1H[93m    [mäº†ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[15;80H[?12l[?25h[?25lIDpt[a]ãŒçµ‚ [16;1H[93m [15;81H[?12l[?25h[?25l[mD:pt[a]ãŒ[94m>>[m[16;1H[93m    [mçµ‚äº†ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[15;82H[?12l[?25h[?25l: pt[a]ãŒ [16;1H[93m [15;83H[?12l[?25h[?25l[m:pt[a]ãŒ[94m>>[m[16;1H[93m [15;82H[?12l[?25h[?25l[m: pt[a]ãŒ [16;1H[93m [15;83H[?12l[?25h[?25l[m:pt[a]ãŒ[94m>>[m[16;1H[93m [15;82H[?12l[?25h[?25l[m: pt[a]ãŒ [16;1H[93m [15;83H[?12l[?25h[?25l[m[15;53H[46m([11C)[m[23C  [16;1H[93m [15;66H[?12l[?25h[?25l[m[23C  [16;1H[93m [15;65H[?12l[?25h[?25l[m[15;53H([11C)[23C  [16;1H[93m [15;64H[?12l[?25h[?25l[m[46m[[ma[46m][m[30C  [16;1H[93m [15;59H[?12l[?25h[?25l[m[30C  [16;1H[93m [15;58H[?12l[?25h[?25l[m[31C  [16;1H[93m [15;57H[?12l[?25h[?25l[m[32C  [16;1H[93m [15;56H[?12l[?25h[?25l[m[a][30C  [16;1H[93m [15;55H[?12l[?25h[?25l[m[46m([11C)[m[23C  [16;1H[93m [15;54H[?12l[?25h[?25l[m[35C  [16;1H[93m [15;53H[?12l[?25h[?25l[m([11C)[23C  [16;1H[93m [12;53H[?12l[?25h[11;23H[10;44H[9;17H[8;39H[7;48H[6;53H[5;30H[4;53H[2;53H[1;16H[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m546 [m  long a, b, c, d;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m544 [m[28;1H[94m@                                                                                        [1;5H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº† */[28;1H[94m@                                                                                        [1;52H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;53H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;53H[?12l[?25h[2;53H[3;50H[2C[2C[?25l( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([m5[46m)[m */[?12l[?25h[?25l55[46m)[m */[?12l[?25h[?25l57[46m)[m */[?12l[?25h[?25l7è¡Œç›®[46m)[m */[?12l[?25h[?25lã¨[46m)[m */[?12l[?25h[?25l5[46m)[m */[?12l[?25h[?25l55[46m)[m */[?12l[?25h[?25l58[46m)[m */[?12l[?25h[?25l8è¡Œç›®[46m)[m */[?12l[?25h[?25lã«[46m)[m */[?12l[?25h[?25lé–¢ä¿‚[46m)[m */[?12l[?25h[?25l[3;54H([22C)[4;48H[?12l[?25h[5;5H[6;42H[7;23H[8;16H[9;77H[11;63H[12;30H[?25l[13;77H[46m()[?12l[?25h[?25l[m()[14;48H[?12l[?25h[15;39H[16;17H[17;44H[18;23H[19;77H[22;77H[24;37H[22;77H[2CID: p[?25lt[46m[[ma[46m][m[1C  [23;1H[93m [22;85H[?12l[?25h[?25l[m[4C  [23;1H[93m [22;86H[?12l[?25h[?25l[m[3C  [23;1H[93m [22;87H[?12l[?25h[?25l[m[2C  [23;1H[93m [22;88H[?12l[?25h[?25l[m[a][1C  [23;1H[93m    [?12l[?25h[2C[2C[?25l[m(ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;10H[?12l[?25h[?25l[46m()[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;11H[?12l[?25h[?25l[?12l[?25h[?25l[46m([mT[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;11H[?12l[?25h[?25lTr[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;12H[?12l[?25h[?25lra[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;13H[?12l[?25h[?25lai[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;14H[?12l[?25h[?25lin[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;15H[?12l[?25h[?25lnM[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;16H[?12l[?25h[?25lMo[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;17H[?12l[?25h[?25lod[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;18H[?12l[?25h[?25lde[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;19H[?12l[?25h[?25lel[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;20H[?12l[?25h[?25llT[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;21H[?12l[?25h[?25lTh[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;22H[?12l[?25h[?25lhr[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;23H[?12l[?25h[?25lre[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;24H[?12l[?25h[?25lea[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;25H[?12l[?25h[?25lad[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;26H[?12l[?25h[?25ldãŒ[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;28H[?12l[?25h[?25l5[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;29H[?12l[?25h[?25l54[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;30H[?12l[?25h[?25l43[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;31H[?12l[?25h[?25l3è¡Œç›®[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;35H[?12l[?25h[?25lã§[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;37H[?12l[?25h[?25lã‚¹ãƒ¬ãƒƒãƒ‰ã‚’[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;47H[?12l[?25h[?25lçµ‚ã‚ã‚‰ã›ã‚‹[46m)[mã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[23;57H[?12l[?25h[?25l[23;9H([47C)[24;37H[?12l[?25h[?25l[25;26H[?12l[?25h[26;33H[27;61H[?25l[28;43H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m564 [m      fprintf(fo, "%s ", vocab[a].word);[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][28;1H[93m    [m, sizeof(real), 1, fo);[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[28;1H[93m    [m + b]);[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m567 [m      fprintf(fo, "\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[21;42H[46m{[m[28;1H[93m568 [m    [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[20;42H{[27;9H}
[93m569 [m  } else {[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;[27;43H[?12l[?25h[?25l[26;15H[?12l[?25h[?25l[18;42H[46m{[25;9H}[?12l[?25h[?25l[m[18;42H{[25;9H}[24;29H[?12l[?25h[23;12H[21;28H[19;45H[?25l[18;42H[46m{[25;9H}[18;43H[?12l[?25h[?25l[m{[25;9H}[17;61H[?12l[?25h[16;33H[?25l[15;25H[46m{[26;7H}[15;26H[?12l[?25h[?25l[m{[26;7H}[14;37H[?12l[?25h[29;1H[K[14;36H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hfopen[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[?25l[m[29;1H?fopen[29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ [13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;12H[?12l[?25h[?25l[m[29;1H/fopen[29;7H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[?25l[m[29;1H?fopen[29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ [13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb");
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;12H[?12l[?25h[24C[?25l[m[29;1H[1m-- INSERT --[m[29;13H[K[14;37H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l o */[?12l[?25h[?25lou */[?12l[?25h[?25lut */[?12l[?25h[?25ltp */[?12l[?25h[?25lpu */[?12l[?25h[?25lut */[?12l[?25h[?25lt_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã‚’ */[?12l[?25h[?25lãƒã‚¤ãƒŠãƒª */[?12l[?25h[?25lãƒ¢ãƒ¼ãƒ‰ */[?12l[?25h[?25lã§ */[?12l[?25h[?25læ›¸è¾¼ã¿ */[?12l[?25h[?25l */[14;77H[K[14;74H[?12l[?25h[?25lå°‚ç”¨ */[?12l[?25h[?25lã§ */[?12l[?25h[?25lé–‹ã */[?12l[?25h[29;1H[K[14;82H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hfopen[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[mfope[?25ln[46m([16C)[14;18H[?12l[?25h[?25l[m([16C)[14;19H[?12l[?25htrain_file, "rb[?25l[14;18H[46m([16C)[?12l[?25h[?25l[m[14;18H([16C)[?12l[?25h; /* train_file[2C[?25l[29;1H[1m-- INSERT --[m[29;13H[K[14;55H[?12l[?25h[?25lãƒã‚¤ãªã„èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;61H[?12l[?25h[?25lèª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;78H[K[14;59H[?12l[?25h[?25lèª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;76H[K[14;57H[?12l[?25h[?25lèª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;74H[K[14;55H[?12l[?25h[?25lèª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;72H[K[14;53H[?12l[?25h[?25lãƒã‚¤ãƒŠãƒªèª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;61H[?12l[?25h[?25lãƒ¢ãƒ¼ãƒ‰èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;67H[?12l[?25h[?25lã§èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã */[14;69H[?12l[?25h[2C[2C[2C[2C[2C[?25lã§é–‹ã */[14;86H[K[14;77H[?12l[?25h[?25lã§é–‹ã */[14;84H[K[14;75H[?12l[?25h[?25lã§é–‹ã */[14;82H[K[14;73H[?12l[?25h[?25lå°‚ç”¨ã§é–‹ã */[14;77H[?12l[?25h[29;1H[K[14;75H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hfopen[?25l[27m[m[H[2J[1;1H[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocab(([3;1H[93m    [m) */
[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb");
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i].cc[16;1H[93m    [mn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* èª­è¾¼ãƒ¢ãƒ¼ãƒ‰ã§read_vocab_fileã‚’é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }[14;18H[?12l[?25hfope[?25ln[46m([21C)[14;23H[?12l[?25h[?25l[m([21C)[14;24H[?12l[?25hsave_vocab_file, "wb[?25l[14;23H[46m([21C)[?12l[?25h[?25l[m[14;23H([21C)[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;47H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l s */[?12l[?25h[?25lsa */[?12l[?25h[?25lav */[?12l[?25h[?25lve */[?12l[?25h[?25le_ */[?12l[?25h[?25l_v */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_s */[?12l[?25h[?25lsi */[?12l[?25h[?25lil */[?12l[?25h[?25li */[14;67H[K[14;64H[?12l[?25h[?25ls */[14;66H[K[14;63H[?12l[?25h[?25l_ */[14;65H[K[14;62H[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã‚’ */[?12l[?25h[?25lãƒã‚¤ãƒŠãƒª */[?12l[?25h[?25lãƒ¢ãƒ¼ãƒ‰ */[?12l[?25h[?25lã§ */[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;84Hæ›¸è¾¼ã¿ [15;1H[93m    [m */[?12l[?25h[?25l[14;88H **[15;1H[93m    [m/[15;6H[K[14;88H[?12l[?25h[?25lå°‚ [15;1H[93m    [mç”¨ */[?12l[?25h[?25lã§ */[?12l[?25h[?25lé–‹ã */[?12l[?25h[17;8H[18;18H[?25l[12;22H[46m{[19;5H}[?12l[?25h[?25l[m[12;22H{[19;5H}[20;5H[?12l[?25h[21;49H[22;26H[23;14H[24;29H[25;88H[?25l[26;25H[?12l[?25h[25;88H[?25lread_vocab_fileã‚’é–‹ã */[25;86H[K[25;62H[?12l[?25h[?25lread_vocab_fileã‚’é–‹ã */[25;84H[K[25;60H[?12l[?25h[?25lread_vocab_fileã‚’é–‹ã */[25;82H[K[25;58H[?12l[?25h[?25lread_vocab_fileã‚’é–‹ã */[25;80H[K[25;56H[?12l[?25h[?25lread_vocab_fileã‚’é–‹ã */[25;78H[K[25;54H[?12l[?25h[?25l read_vocab_fileã‚’é–‹ã */[25;76H[K[25;52H[?12l[?25hread_vocab_file[2C[?25lãƒã‚¤ãƒŠãƒªé–‹ã */[25;77H[?12l[?25h[?25lãƒ¢ãƒ¼ãƒ‰é–‹ã */[25;83H[?12l[?25h[?25l[26;28r[26;1H[L[1;29r[25;83Hã§é–‹ã  [26;1H[93m    [m*/[25;85H[?12l[?25h[?25lèª­è¾¼[94m>>[m[26;1H[93m    [mé–‹ã */[26;5H[?12l[?25h[?25l[93m [må°‚ç”¨é–‹ã */[26;9H[?12l[?25h[?25lã§é–‹ã */[26;11H[?12l[?25h[29;1H[K[26;9H[?25l[?12l[?25h[?25l


/fopen[27m[m[H[2J[1;1H[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */
[93m319 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m320 [m    a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m321 [m    fscanf(fin, "%lld%c", &vocab[a].cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’voo[6;1H[93m    [mcab[a].cnã«å–è¾¼ã¿ï¼Œ */
[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[20;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeo[28;1H[94m@                                                                                        [14;13H[?12l[?25h[mfope[?25ln[46m([16C)[14;18H[?12l[?25h[?25l[m([16C)[14;19H[?12l[?25htrain_file, "rb[?25l[14;18H[46m([16C)[?12l[?25h[?25l[m[14;18H([16C)[?12l[?25h; /* [2C[2C[2C[2C[2C[2Ct[?25l[29;1H?fopen[14;13H[?12l[?25h[?25l[29;1H[1;28r[1;1H[9L[1;29r[1;1H[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­è¾¼[94m>>[m[2;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[8;1H[93m    [mzeã®æ™‚ */
[93m316 [m  vocab_size = 0;[28;1H[94m@                                                                                        [m[29;1H[K[1;19H[?12l[?25h[2;17H[1;87H[?25lå‡º[94m>>[m[2;1H[93m [1;87H[?12l[?25h
    [2C[?25l[m[29;1H/fopen[23;13H[?12l[?25hffope[?25ln[46m([16C)[23;18H[?12l[?25h[?25l[m([16C)[23;19H[?12l[?25htrain_file, "rb[?25l[23;18H[46m([16C)[?12l[?25h[?25l[m[23;18H([16C)[?12l[?25h; /* [2C[2C[2C[?25l[29;1H?[23;13H[?12l[?25h[?25l[29;1H[1;19H[?12l[?25h[?25l[29;1H[1;28r[1;1H[11L[1;29r[1;1H[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ [2;1H[93m    [mç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i].cc[4;1H[93m    [mn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];[29;1H[K[1;18H[?12l[?25hfope[?25ln[46m([21C)[m[43C  [2;1H[93m [1;23H[?12l[?25h[?25l[m([21C)[43C  [2;1H[93m [1;24H[?12l[?25h[msave_vocab_file, "wb[?25l[1;23H[46m([21C)[m[43C  [2;1H[93m [1;45H[?12l[?25h[?25l[m[1;23H([21C)[43C  [2;1H[93m [1;46H[?12l[?25h[m; /* save_vocab_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25lå‡º[1C  [2;1H[93m [1;86H[?12l[?25h[?25l[m[29;1H1 change; before #54  7 seconds ago[1;86Hè¾¼[1C  [2;1H[93m [1;86H[?12l[?25h[?25l[m[29;1H?fope[29;7H[K[29;1H[1;18H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­è¾¼å°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);[14;13H[?12l[?25hfope[?25ln[46m([16C)[14;18H[?12l[?25h[?25l[m([16C)[14;19H[?12l[?25htrain_file, "rb[?25l[14;18H[46m([16C)[?12l[?25h[?25l[m[14;18H([16C)[?12l[?25h; /* train_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[15;7H[14;7Hfin = fope[?25ln[46m([16C)[14;18H[?12l[?25h[?25l[m([16C)[14;19H[?12l[?25htrain_file, "rb[?25l[14;18H[46m([16C)[?12l[?25h[?25l[m[14;18H([16C)[?12l[?25h; /* train_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25lå‡º[?12l[?25h[15;7H[?25l[29;1H?fopen[14;13H[?12l[?25h[?25l[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ã */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;12H[?12l[?25h[mfope[?25ln[46m([17C)[14;17H[?12l[?25h[?25l[m([17C)[14;18H[?12l[?25houtput_file, "wb[?25l[14;17H[46m([17C)[?12l[?25h[?25l[m[14;17H([17C)[?12l[?25h[?25l[29;1H?fopen[29;7H[K[29;1H[14;12H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[4;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[5;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[11;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[13;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[15;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤ [17;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [18;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[26;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[28;1H[93m    [m;[14;18H[?12l[?25hfope[?25ln[46m([16C)[14;23H[?12l[?25h[?25l[m([16C)[14;24H[?12l[?25htrain_file, "rb[?25l[14;23H[46m([16C)[?12l[?25h[?25l[m[14;23H([16C)[?12l[?25h; /* [2C[?25lå‡º[?12l[?25h[?25l[29;1H/fopen[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ã */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;[14;12H[?12l[?25h[?25l[29;1H?fopen[27m[m[H[2J[1;1H[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[4;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[5;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[11;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[13;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³[15;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤ [17;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [18;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[26;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[28;1H[93m    [m;[14;18H[?12l[?25h[?25l[29;1H?fopen[27m[m[H[2J[1;1H[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */
[93m319 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m320 [m    a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m321 [m    fscanf(fin, "%lld%c", &vocab[a].cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’voo[6;1H[93m    [mcab[a].cnã«å–è¾¼ã¿ï¼Œ */
[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å–ãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[20;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizeo[28;1H[94m@                                                                                        [14;13H[?12l[?25h[mfope[?25ln[46m([16C)[14;18H[?12l[?25h[?25l[m([16C)[14;19H[?12l[?25htrain_file, "rb[?25l[14;18H[46m([16C)[?12l[?25h[?25l[m[14;18H([16C)[?12l[?25h; /* [2C[?25lå‡º[?12l[?25h[?25l[29;1H?fopen[14;13H[?12l[?25h[?25l[29;1H[1;28r[1;1H[9L[1;29r[1;1H[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[94m>>[m[2;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[8;1H[93m    [mzeã®æ™‚ */
[93m316 [m  vocab_size = 0;[28;1H[94m@                                                                                        [m[29;1H[K[1;19H[?12l[?25h[?25l[29;1H/fopen[23;13H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[4;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[5;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[11;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[13;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [15;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m373 [m  fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•ã‚¡ã‚¤ [17;1H[93m    [mãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (long  [18;1H[93m    [mlong)idãƒã‚¤ãƒˆç§»å‹• */
[93m374 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(538è¡Œç›®ã¾ã§) */
[93m375 [m    if (word_count - last_word_count > 10000) { /* 387è¡Œç›®ã¾ã§ */
[93m376 [m      word_count_actual += word_count - last_word_count;
[93m377 [m      last_word_count = word_count;
[93m378 [m      if ((debug_mode > 1)) { /* 384è¡Œç›®ã¾ã§ */
[93m379 [m[7C now=clock();
[93m380 [m[7C printf("%cAlpha: %f  Progress: %.2f%%  Words/thread/sec: %.2fk  ", 13, alpha,[26;1H[93m381 [m[8C word_count_actual / (real)(iter * train_words + 1) * 100,
[93m382 [m[8C word_count_actual / ((real)(now - start + 1) / (real)CLOCKS_PER_SEC * 1000)))[28;1H[93m    [m;[14;18H[?12l[?25h[?25l[29;1H/fopen[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ã */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;[14;12H[?12l[?25h[?25l[29;1H/fopen[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[?25l[m[29;1H?fopen[29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ã */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;12H[?12l[?25h[mfope[?25ln[46m([17C)[14;17H[?12l[?25h[?25l[m([17C)[14;18H[?12l[?25houtput_file, "wb[?25l[14;17H[46m([17C)[?12l[?25h[?25l[m[14;17H([17C)[?12l[?25h; /* o[?25l[29;1H[K[29;1H/[?12l[?25hfl[?25l[29;3H[K[29;3H[?12l[?25hclose[?25l[27m[m[H[2J[1;1H[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo);
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 [14;7H[?12l[?25h[?25l[29;1H[m/[?12l[?25hfopen[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[13;1H[93m    [mzeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€  [23;1H[93m    [m*/
[93m277 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m278 [m    train_words++; /* train_wordsã«1ã‚’è¶³ã™ */
[93m279 [m    if ((debug_mode > 1) && (train_words % 100000 == 0)) { /* debug_mode > 1ã‹ã¤trainn[27;1H[93m    [m_wordsãŒ100000ã§å‰²åˆ‡ã‚Œã‚‹æ™‚ */
[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[?25l[m[29;1H?fopen[29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ã */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][21;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[23;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;12H[?12l[?25h[mfope[?25ln[46m([17C)[14;17H[?12l[?25h[?25l[m([17C)[14;18H[?12l[?25houtput_file, "wb[?25l[14;17H[46m([17C)[?12l[?25h[?25l[m[14;17H([17C)[?12l[?25h; /* output_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l[29;1H[1m-- INSERT --[m[29;13H[K[14;85H[?12l[?25h[?25lï¼Œ */[?12l[?25h[?25l6 */[14;87H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;86H61 **[15;1H[93m    [m/[14;88H[?12l[?25h[?25l13  [15;1H[93m    [m*/[14;89H[?12l[?25h[?25l3[94m>>[m[15;1H[93m    [mè¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25lé–‰ã˜ã‚‹ */[?12l[?25h[29;1H[K[15;15H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h613[?25l[27m[m[H[2J[1;1H[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo);
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 [14;7H[?12l[?25h[10C[?25l[m[29;1H[1m-- INSERT --[14;18H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 5 */[?12l[?25h[?25l55 */[?12l[?25h[?25l59 */[?12l[?25h[?25l9è¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25lé–‹ã„ãŸ */[?12l[?25h[?25lf */[?12l[?25h[?25lfo */[?12l[?25h[?25loã‚’ */[?12l[?25h[?25lé–‰ã˜ã‚‹ */[?12l[?25h[29;1H[K[14;45H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h559[?25l[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[15;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][22;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[24;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors[14;7H[?12l[?25hfo = fope[?25ln[46m([17C)[m[53C[94m>>[m[15;1H[93m [14;17H[?12l[?25h[?25l[m([17C)[53C[94m>>[m[15;1H[93m [14;18H[?12l[?25h[moutput_file, "wb[?25l[14;17H[46m([17C)[m[53C[94m>>[m[15;1H[93m [14;35H[?12l[?25h[?25l[m[14;17H([17C)[53C[94m>>[m[15;1H[93m [14;36H[?12l[?25h[m; /* output_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C61[15;5H[2C[2C[2C[2C[2C[2C *[?25l[16;25H[46m{[27;7H}[16;25H[?12l[?25h[?25l[29;1H[m/[?12l[?25hclasses[?25l[1;28r[28;1H
[1;29r[15;25H{[26;7H}

[93m571 [m    int clcn = classes, iter = 10, closeid;[29;1H[K[28;20H[?12l[?25h[?25l
?classes[15;11H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0;
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[14;80H[?12l[?25h[?25l[29;1H/classes[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[?25l[m[29;1H?classes[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0;
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[14;80H[?12l[?25h[15;6H[?25l[29;1H[1m-- INSERT --[15;7H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*?[?12l[?25h?[?25l[15;13H[K[15;13H[?12l[?25h[?25l*/[?12l[?25h [?25l c */[?12l[?25h[?25lcl */[?12l[?25h[?25lla */[?12l[?25h[?25las */[?12l[?25h[?25lss */[?12l[?25h[?25lse */[?12l[?25h[?25les */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h[?25l  */[?12l[?25h[?25l ( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([m6[46m)[m */[?12l[?25h[?25l61[46m)[m */[?12l[?25h[?25l19[46m)[m */[?12l[?25h[?25l9è¡Œç›®[46m)[m */[?12l[?25h[?25lã§[46m)[m */[?12l[?25h[?25lä½¿ç”¨[46m)[m */[?12l[?25h[29;1H[K[15;35H[?25l[15;23H([13C)[?12l[?25h[?25l[29;1H/[?12l[?25hclasses[?25l[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[?25l[29;1H[m?[?12l[?25h [14;11H[?25l[29;1H?classes[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0; /* classes = 0 (619è¡Œç›®ã§ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[15;11H[?12l[?25h[?25l[29;1H/classes[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[?25l[m[29;1H/classes[27;20H[?12l[?25h[?25l

?[14;11H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0; /* classes = 0 (619è¡Œç›®ã§ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[15;11H[?12l[?25h[?25l[29;1H?classes[14;80H[?12l[?25h[?25l[29;1H/[15;11H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[?25l[m[29;1H?classes[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0; /* classes = 0 (619è¡Œç›®ã§ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[15;11H[?12l[?25hclasses = 0[?25l [46m([13C)[15;23H[?12l[?25h[?25l[m([13C)[15;24H[?12l[?25h61[?25l(5[?12l[?25h5[10C[?25l56[?12l[?25h6[?25l60[?12l[?25h[?25l[29;1H[1m-- INSERT --[15;25H[?12l[?25h[?25l[m5h60è¡Œç›®ã§ä½¿ç”¨) */[15;26H[?12l[?25h[?25lhh60è¡Œç›®ã§ä½¿ç”¨) */[15;27H[?12l[?25h[?25lh60è¡Œç›®ã§ä½¿ç”¨) */[15;42H[K[15;26H[?12l[?25h[?25l560è¡Œç›®ã§ä½¿ç”¨) */[15;41H[K[15;25H[?12l[?25h[?25l[46m([13C)[15;24H[?12l[?25h[?25l[m 560è¡Œç›®ã§ä½¿ç”¨) */[15;40H[K[15;23H[?12l[?25h[?25l0560è¡Œç›®ã§ä½¿ç”¨) */[15;39H[K[15;22H[?12l[?25h[?25l 560è¡Œç›®ã§ä½¿ç”¨) */[15;38H[K[15;21H[?12l[?25h[?25l=560è¡Œç›®ã§ä½¿ç”¨) */[15;37H[K[15;20H[?12l[?25h[?25l 560è¡Œç›®ã§ä½¿ç”¨) */[15;36H[K[15;19H[?12l[?25h[?25ls560è¡Œç›®ã§ä½¿ç”¨) */[15;35H[K[15;18H[?12l[?25h[?25le560è¡Œç›®ã§ä½¿ç”¨) */[15;34H[K[15;17H[?12l[?25h[?25ls560è¡Œç›®ã§ä½¿ç”¨) */[15;33H[K[15;16H[?12l[?25h[?25ls560è¡Œç›®ã§ä½¿ç”¨) */[15;32H[K[15;15H[?12l[?25h[?25la560è¡Œç›®ã§ä½¿ç”¨) */[15;31H[K[15;14H[?12l[?25h[?25ll560è¡Œç›®ã§ä½¿ç”¨) */[15;30H[K[15;13H[?12l[?25h[?25lc560è¡Œç›®ã§ä½¿ç”¨) */[15;29H[K[15;12H[?12l[?25h[?25l 560è¡Œç›®ã§ä½¿ç”¨) */[15;28H[K[15;11H[?12l[?25h560[2C[2C[2C[?25lcä½¿ç”¨) */[15;21H[?12l[?25h[?25lclä½¿ç”¨) */[15;22H[?12l[?25h[?25llaä½¿ç”¨) */[15;23H[?12l[?25h[?25lasä½¿ç”¨) */[15;24H[?12l[?25h[?25lssä½¿ç”¨) */[15;25H[?12l[?25h[?25lseä½¿ç”¨) */[15;26H[?12l[?25h[?25lesä½¿ç”¨) */[15;27H[?12l[?25h[?25lsã‚’ä½¿ç”¨) */[15;29H[?12l[?25h[29;1H[K[15;27H[?25l[?12l[?25h[?25l[29;1H/classes[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[mclass[?25l[29;1H?classes[14;11H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[4;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[6;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[8;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[10;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[13;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [15;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[17;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;[15;20H[?12l[?25h[?25l[29;1H/classes[27m[m[H[2J[1;1H[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[8;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[9;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[11;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[13;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) {
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) {
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][20;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[22;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[?25l[m[14C[46m{[25;7H}[14;25H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[14;26H[?12l[?25h[?25l[m{[25;7H}[14;27H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 4 */[?12l[?25h[?25l44 */[?12l[?25h[?25l4è¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25lc */[?12l[?25h[?25lcl */[?12l[?25h[?25lla */[?12l[?25h[?25las */[?12l[?25h[?25lss */[?12l[?25h[?25lse */[?12l[?25h[?25les */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h0[?25l  */[14;51H[K[14;48H[?12l[?25h[?25l */[14;50H[K[14;47H[?12l[?25h[?25l  */[14;49H[K[14;46H[?12l[?25h[?25l */[14;48H[K[14;45H[?12l[?25h[?25le */[14;47H[K[14;44H[?12l[?25h[?25ls */[14;46H[K[14;43H[?12l[?25h[?25ls */[14;45H[K[14;42H[?12l[?25h[?25la */[14;44H[K[14;41H[?12l[?25h[?25ll */[14;43H[K[14;40H[?12l[?25h[?25lc */[14;42H[K[14;39H[?12l[?25h[?25l */[14;41H[K[14;38H[?12l[?25h[?25l */[14;39H[K[14;36H[?12l[?25h[?25lã‚ˆã‚Š */[?12l[?25h[?25lå¸¸ã« */[?12l[?25h[?25lT */[?12l[?25h[?25lTR */[?12l[?25h[?25lRU */[?12l[?25h[?25lUE */[?12l[?25h[2C[2C[?25lTRUE */[14;49H[K[14;42H[?12l[?25h[?25lTRUE */[14;47H[K[14;40H[?12l[?25h[?25lcTRUE */[14;41H[?12l[?25h[?25lclTRUE */[14;42H[?12l[?25h[?25llaTRUE */[14;43H[?12l[?25h[?25lasTRUE */[14;44H[?12l[?25h[?25lssTRUE */[14;45H[?12l[?25h[?25lseTRUE */[14;46H[?12l[?25h[?25lesTRUE */[14;47H[?12l[?25h[?25ls TRUE */[14;48H[?12l[?25h[?25l 0TRUE */[14;49H[?12l[?25h[?25l0 TRUE */[14;50H[?12l[?25h[?25l0TRUE */[14;56H[K[14;49H[?12l[?25h[?25l TRUE */[14;55H[K[14;48H[?12l[?25h[?25l =TRUE */[14;49H[?12l[?25h[?25l= TRUE */[14;50H[?12l[?25h[?25l 0TRUE */[14;51H[?12l[?25h[?25l0ã‚ˆã‚ŠTRUE */[14;55H[?12l[?25h[?25lclasses = 0ã‚ˆã‚ŠTRUE */[14;60H[K[14;38H[?12l[?25h[?25lclasses = 0ã‚ˆã‚ŠTRUE */[14;58H[K[14;36H[?12l[?25h[?25lã®classes = 0ã‚ˆã‚ŠTRUE */[14;38H[?12l[?25h[15;33H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l w */[?12l[?25h[?25lwo */[?12l[?25h[?25lor */[?12l[?25h[?25lrd */[?12l[?25h */[?25l[15;43H[K[15;43H[?12l[?25h[?25l[15;42H[K[15;42H[?12l[?25h[?25l[?12l[?25h[?25l[15;40H[K[15;40H[?12l[?25h[?25l[15;39H[K[15;39H[?12l[?25h[?25l[15;38H[K[15;38H[?12l[?25h[?25l[15;37H[K[15;37H[?12l[?25h[?25l[?12l[?25h[?25l[15;35H[K[15;35H[?12l[?25h[?25l[15;34H[K[15;34H[?12l[?25h[?25l[?12l[?25h[16;33H", vocab_size, layer1_siz[?25l[16;16H[46m([42C)[?12l[?25h[?25l)[?12l[?25h[?25l[m[16;16H([42C)[17;42H[46m{[24;9H}[17;43H[?12l[?25h[?25l[m{[24;9H}[18;45H[?12l[?25h[19;60H[21;60H[23;29H[?25l[17;42H[46m{[24;9H}[?12l[?25h[?25l[m[17;42H{[24;9H}[25;15H[?12l[?25h[?25l[17;42H[46m{[24;9H}[?12l[?25h[?25l[m[17;42H{[24;9H}[23;29H[?12l[?25h[21;60H[19;60H[18;45H[?25l[17;42H[46m{[24;9H}[17;43H[?12l[?25h[?25l[m{a[24;9H}[17;44H[?12l[?25h[?25l[46m{[m[17;43H[K[24;9H[46m}[17;43H[?12l[?25h[?25l[m{[24;9H}[17;44H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h [?25l a */[?12l[?25h[?25l  */[?12l[?25h[?25l < */[?12l[?25h[?25l<- */[?12l[?25h[?25l< */[17;53H[K[17;50H[?12l[?25h[?25l  */[17;52H[K[17;49H[?12l[?25h[?25l */[17;51H[K[17;48H[?12l[?25h[?25l  */[17;50H[K[17;47H[?12l[?25h[?25l 0 */[?12l[?25h[?25l  */[?12l[?25h[?25l < */[?12l[?25h[?25l<= */[?12l[?25h[?25l  */[?12l[?25h[?25l a */[?12l[?25h[?25l  */[?12l[?25h[?25l < */[?12l[?25h[?25l  */[?12l[?25h[?25l v */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_s */[?12l[?25h[?25lsi */[?12l[?25h[?25liz */[?12l[?25h[?25lze */[?12l[?25h *[?25leã® */[?12l[?25h[?25læ™‚ */[?12l[?25h[18;45H[17;70H[?25l[46m{[24;9H}[17;43H[?12l[?25h[?25l[?12l[?25h[?25l[17;13H([26C)[m {[24;9H}[17;41H[?12l[?25h[?25l[?12l[?25h[?25l[17;13H([26C)[?12l[?25h[?25l[46m([26C)[17;14H[?12l[?25h[?25l[?12l[?25h[?25l[m([26C)[17;12H[?12l[?25h[16;5H    fprint[?25lf[46m([42C)[16;16H[?12l[?25h[?25l([?12l[?25h[?25l[m([42C)[16;18H[?12l[?25ho, "[17;22H[16;22H[29;1H[K[16;21H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hll[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25h$[?25l[29;2H[K[29;2H[?12l[?25h%lld[?25l[16;22H[?12l[?25h[?25l[29;1H?[27m[m[H[2J[1;1H[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_sii[2;1H[93m    [mzeã®æ™‚ */
[93m316 [m  vocab_size = 0;
[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */
[93m319 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */
[93m320 [m    a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m321 [m    fscanf(fin, "%lld%c", &vocab[a].cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’voo[9;1H[93m    [mcab[a].cnã«å–è¾¼ã¿ï¼Œ */
[93m322 [m    i++;
[93m323 [m  }
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[94m>>[m[23;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */[15;38H[?12l[?25h[?25l[29;1H?%lld[14;29H[?12l[?25h[?25l[29;1H[8;22H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚[12;1H[93m    [mç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i].cc[14;1H[93m    [mn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[94m>>[m[23;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_si[28;1H[94m@                                                                                        [13;56H[?12l[?25h[?25l[m[29;1H?%lld[3;38H[?12l[?25h[?25l[29;1H[2;29H[?12l[?25h[?25l[29;1H[1;28r[1;1H[13L[1;29r[1;1H[93m280 [m      printf("%lldK%c", train_words / 1000, 13);
[93m281 [m      fflush(stdout);
[93m282 [m    }
[93m283 [m    i = SearchVocab(word); /* 103è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ä¸­ã®å˜èªã®ä½ç½®ã‚’è¿”ã™é–¢æ•°SearchVocaa[5;1H[93m    [mb */
[93m284 [m    if (i == -1) { /* i == -1ã®æ™‚ */
[93m285 [m      a = AddWordToVocab(word);
[93m286 [m      vocab[a].cn = 1;
[93m287 [m    } else vocab[i].cn++;
[93m288 [m    if (vocab_size > vocab_hash_size * 0.7) ReduceVocab();
[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocab(([13;1H[93m    [m) */[29;1H[K[1;19H[?12l[?25h[?25l[29;1H?%lld[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[6;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[7;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[9;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[11;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* 44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size);
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word);
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][18;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[20;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[27;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[28;1H[94m@                                                                                        [m[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[14;27H[?12l[?25h[m%lld\n"[26C[?25l[29;1H[1m-- INSERT --[m[29;13H[K[14;61H[?12l[?25h[?25l [?12l[?25h[?25l ?[?12l[?25h[?25l[14;62H[K[14;62H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l f */[?12l[?25h[?25lfo */[?12l[?25h[?25loã« */[?12l[?25h[?25lv */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_s */[?12l[?25h[?25lsi */[?12l[?25h[?25liz */[?12l[?25h[?25lze */[?12l[?25h[?25leã¨ */[?12l[?25h[?25ll */[?12l[?25h[?25lla */[?12l[?25h[?25lay */[?12l[?25h[?25lye */[?12l[?25h[?25ler */[?12l[?25h[?25lr1 */[14;87H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;86H1_ **[15;1H[93m    [m/[14;88H[?12l[?25h[?25l_s  [15;1H[93m    [m*/[14;89H[?12l[?25h[?25lsii[15;1H[93m    [m */[?12l[?25h[?25l[93m [mz */[?12l[?25h[?25lze */[?12l[?25h[?25leã‚’ */[?12l[?25h[?25ll */[?12l[?25h[?25llo */[?12l[?25h[?25lon */[?12l[?25h[?25lng */[?12l[?25h[?25l  */[?12l[?25h[?25l l */[?12l[?25h[?25llo */[?12l[?25h[?25lon */[?12l[?25h[?25lng */[?12l[?25h[?25lgå‹ */[?12l[?25h[?25lã§ */[?12l[?25h[?25lãã‚Œãã‚Œ */[?12l[?25h[?25læ›¸ãå‡ºã— */[?12l[?25h[16;73H[17;45H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l f */[?12l[?25h[?25lfo */[?12l[?25h[?25loã« */[?12l[?25h[?25lv */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb[ */[?12l[?25h[?25l[a */[?12l[?25h[?25l[46m[[ma[46m][m */[?12l[?25h[?25l[a]. */[?12l[?25h[?25l.w */[?12l[?25h[?25lwo */[?12l[?25h[?25lor */[?12l[?25h[?25lrd */[?12l[?25h[?25ldã‚’ */[?12l[?25h[?25læ–‡å­—åˆ— */[?12l[?25h[?25lã¨ã—ã¦ */[?12l[?25h[?25lå‡ºåŠ› */[?12l[?25h[16;73H[14;46H[29;1H[K[14;43H[?25l[?12l[?25h[15;40H[2C[?25lãå‡ºã— */[15;39H[K[15;30H[?12l[?25h[?25lå‡ºã— */[15;37H[K[15;30H[?12l[?25h[?25lã— */[15;35H[K[15;30H[?12l[?25h[?25l */[15;33H[K[15;30H[?12l[?25h[?25l[29;1H[1m-- INSERT --[15;31H[?12l[?25h[?25l[må‡ºåŠ› */[?12l[?25h[16;73H[17;87H[19;28H[29;1H[K[19;27H[?25l[?12l[?25h[20;11H[18;11H[17;11H[18;11H[20;11H[?25l[29;1H/[?12l[?25hbinary[?25l[27m[m[H[2J[1;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");
[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[5;1H[93m    [m 5\n");
[93m655 [m    printf("\t-alpha <float>\n");
[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[8;1H[93m    [m05 for CBOW\n");
[93m657 [m    printf("\t-classes <int>\n");
[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[11;1H[93m    [mes is 0 (vectors are written)\n");
[93m659 [m    printf("\t-debug <int>\n");
[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");
[93m661 [m    printf("\t-binary <int>\n");
[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[20;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[23;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[26;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }[14;20H[?12l[?25h[?25l[29;1H/binary[15;51H[?12l[?25h[?25l[29;1H[26;27H[?12l[?25h[?25l


[1;28r[1;1H[12M[1;29r[17;1H[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[21;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[22;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[24;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[26;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[29;1H[K[28;33H[?12l[?25h[?25l
/binary[28;60H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[5;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[9;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[11;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[13;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[15;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[18;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [20;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[22;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H/binary[29;8H[K[29;1H[27m[m[H[2J[1;1H[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[5;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[13;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[93m171 [m    vocab[a].point = (int *)calloc(MAX_CODE_LENGTH, sizeof(int));
[93m172 [m  }
[93m173 [m}
[93m174 
175 [m// Reduces the vocabulary by removing infrequent tokens
[93m176 [mvoid ReduceVocab() {
[93m177 [m  int a, b = 0;
[93m178 [m  unsigned int hash;
[93m179 [m  for (a = 0; a < vocab_size; a++) if (vocab[a].cn > min_reduce) {
[93m180 [m    vocab[b].cn = vocab[a].cn;
[93m181 [m    vocab[b].word = vocab[a].word;
[93m182 [m    b++;[14;34H[?12l[?25h[?25l[29;1H/binary[27m[m[H[2J[1;1H[93m184 [m  vocab_size = b;
[93m185 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m186 [m  for (a = 0; a < vocab_size; a++) {
[93m187 [m    // Hash will be re-computed, as it is not actual
[93m188 [m    hash = GetWordHash(vocab[a].word);
[93m189 [m    while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m190 [m    vocab_hash[hash] = a;
[93m191 [m  }
[93m192 [m  fflush(stdout);
[93m193 [m  min_reduce++;
[93m194 [m}
[93m195 
196 [m// Create binary Huffman tree using the word counts /* èªæ•°ã‚’ç”¨ã„ã¦2å€¤Huffmanæœ¨ã‚’ä½œæˆ[14;1H[93m    [m */
[93m197 [m// Frequent words will have short uniqe binary codes /* é«˜é »åº¦ã®å˜èªã«çŸ­ã„ä¸€æ„çš„ãª2é€² [16;1H[93m    [mæ•°ã‚’å‰²å½“ã‚‹ */
[93m198 [mvoid CreateBinaryTree() { /* voidé–¢æ•°CreateBinaryTree() */
[93m199 [m  long long a, b, i, min1i, min2i, pos1, pos2, point[MAX_CODE_LENGTH];
[93m200 [m  char code[MAX_CODE_LENGTH]; /* charå‹code[æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·MAX_CODE_LENGTH] */
[93m201 [m  long long *count = (long long *)calloc(vocab_size * 2 + 1, sizeof(long long)); /* ll[21;1H[93m    [mong longå‹ãƒã‚¤ãƒ³ã‚¿countã«(vocab_size * 2 * 1) * (long long)åˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ */
[93m202 [m  long long *binary = (long long *)calloc(vocab_size * 2 + 1, sizeof(long long)); /*  [23;1H[93m    [mlong longå‹ãƒã‚¤ãƒ³ã‚¿binaryã«(vocab_size * 2 * 1) * (long long)åˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ */
[93m203 [m  long long *parent_node = (long long *)calloc(vocab_size * 2 + 1, sizeof(long long)))[25;1H[93m    [m; /* long longå‹ãƒã‚¤ãƒ³ã‚¿parent_nodeã«(vocab_size * 2 * 1) * (long long)åˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’ç¢º[26;1H[93m    [mä¿ */
[93m204 [m  for (a = 0; a < vocab_size; a++) count[a] = vocab[a].cn; /* ãƒã‚¤ãƒ³ã‚¿countã®0 <= a <<[28;1H[93m    [m vocab_sizeç•ªç›®ã«ã«vocab[a].cnã‚’ä»£å…¥ */[13;15H[?12l[?25h[?25l[29;1H/binary[15;45H[?12l[?25h[?25l[29;1H[22;18H[?12l[?25h[?25l[29;1H[23;24H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m226 [m[7C pos1--;
[93m227 [m      } else { /* count[pos1] >= count[pos2]ã®æ™‚ */
[93m228 [m[7C min2i = pos2;
[93m229 [m[7C pos2++;
[93m230 [m      }
[93m231 [m    } else { /* pos1ãŒè² ã®æ™‚ */
[93m232 [m      min2i = pos2;
[93m233 [m      pos2++;
[93m234 [m    }
[93m235 [m    count[vocab_size + a] = count[min1i] + count[min2i]; /* count[vocab_size + a]ã«coo[11;1H[93m    [munt[min1i] + count[min2i]ã‚’ä»£å…¥ */
[93m236 [m    parent_node[min1i] = vocab_size + a; /* min1iã®è¦ªãƒãƒ¼ãƒ‰ã«vocab_size + a ã‚’ä»£å…¥ */[13;1H[93m237 [m    parent_node[min2i] = vocab_size + a; /* min2iã®è¦ªãƒãƒ¼ãƒ‰ã«vocab_size + a ã‚’ä»£å…¥ */[14;1H[93m238 [m    binary[min2i] = 1;
[93m239 [m  }
[93m240 [m  // Now assign binary code to each vocabulary word /* èªå½™ã®å„å˜èªã«äºŒé€²æ³•ã‚³ãƒ¼ãƒ‰ã‚’å‰²[17;1H[93m    [må½“ */
[93m241 [m  for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m242 [m    b = a;
[93m243 [m    i = 0;
[93m244 [m    while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m245 [m      code[i] = binary[b]; /* code[i]ã«binary[b](æœ€åˆã¯b=a)ã‚’ä»£å…¥ */
[93m246 [m      point[i] = b; /* pont[i]ã«bã‚’ä»£å…¥*/
[93m247 [m      i++;
[93m248 [m      b = parent_node[b]; /* bã«parent_nodeã‚’ä»£å…¥ */
[93m249 [m      if (b == vocab_size * 2 - 2) break; /* b == vocab_size * 2 - 2ã®æ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹[94m>>[m[27;1H[93m    [mã‚‰è„±å‡º */
[93m250 [m    }[14;9H[?12l[?25h[?25l[29;1H/binary[16;21H[?12l[?25h[?25l[29;1H[22;21H[?12l[?25h[?25l[29;1H[22;44H[?12l[?25h[?25l[29;1H[1;28r[1;1H[9M[1;29r[20;1H[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[29;1H[K[28;12H[?12l[?25h[?25l
/binary[28;24H[?12l[?25h[?25l
[27m[m[H[2J[1;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[2;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[3;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[5;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[7;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* 44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[11;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][15;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[17;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[24;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[26;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>[28;1H@                                                                                        [14;15H[?12l[?25h[?25l[m[29;1H/binary[27m[m[H[2J[1;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");
[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[5;1H[93m    [m 5\n");
[93m655 [m    printf("\t-alpha <float>\n");
[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[8;1H[93m    [m05 for CBOW\n");
[93m657 [m    printf("\t-classes <int>\n");
[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[11;1H[93m    [mes is 0 (vectors are written)\n");
[93m659 [m    printf("\t-debug <int>\n");
[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");
[93m661 [m    printf("\t-binary <int>\n");
[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[20;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[23;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[26;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }[14;20H[?12l[?25h[?25l[29;1H/binary[15;51H[?12l[?25h[?25l[29;1H?[14;20H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[2;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[3;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[5;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[7;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* 44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[11;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][15;1H[93m    [m, sizeof(real), 1, fo);
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[17;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[24;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[26;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>[28;1H@                                                                                        [14;15H[?12l[?25h[mbinar[?25l[46m([mbinary[46m)[m[67C]][15;1H[93m [14;21H[?12l[?25h[?25l[m[14;14H(binary)[67C]][15;1H[93m [14;22H[?12l[?25h[m for[?25l [46m([27C)[m[33C]][15;1H[93m [14;27H[?12l[?25h[?25l[m([27C)[33C]][15;1H[93m [14;28H[?12l[?25h[mb = 0[16;33H[14;33H[15;27H[?25l[29;1H[1m-- INSERT --[15;28H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */[?12l[?25h[29;1H[K[15;44H[?25l[?12l[?25h[?25l[29;1H/binary[27m[m[H[2J[1;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");
[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[5;1H[93m    [m 5\n");
[93m655 [m    printf("\t-alpha <float>\n");
[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[8;1H[93m    [m05 for CBOW\n");
[93m657 [m    printf("\t-classes <int>\n");
[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[11;1H[93m    [mes is 0 (vectors are written)\n");
[93m659 [m    printf("\t-debug <int>\n");
[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");
[93m661 [m    printf("\t-binary <int>\n");
[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[20;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[23;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[26;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }[14;20H[?12l[?25h[?25l[29;1H/binary[15;51H[?12l[?25h[?25l[29;1H[26;27H[?12l[?25h[?25l


[1;28r[1;1H[12M[1;29r[17;1H[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[21;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[22;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[24;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[26;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[29;1H[K[28;33H[?12l[?25h[?25l
/binary[28;60H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[5;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã« [9;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[11;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[13;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[15;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12 */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[18;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [20;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[22;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[mbinary = 0, cbow = [15;54H[?25l[29;1H[1m-- INSERT --[m[29;13H[K[15;52H[?12l[?25h[?25l2ï¼Œ */[?12l[?25h[?25lb */[?12l[?25h[?25lbi */[?12l[?25h[?25lin */[?12l[?25h[?25lna */[?12l[?25h[?25lar */[?12l[?25h[?25lry */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h[?25l  */[?12l[?25h[?25l ã¯ */[?12l[?25h[?25l0ã¯ */[15;69H[K[15;64H[?12l[?25h[2C[?25l5 */[?12l[?25h[?25l56 */[?12l[?25h[?25l64 */[?12l[?25h[?25l6 */[15;71H[K[15;68H[?12l[?25h[?25l65 */[?12l[?25h[?25l5è¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25lä½¿ç”¨ */[?12l[?25h[29;1H[K[15;77H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h565[?25l[27m[m[H[2J[1;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[2;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[3;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[5;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[7;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* 44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[11;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][15;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[17;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[24;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[26;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[mif[?25l [46m([mbinary[46m)[m[67C]][15;1H[93m [14;14H[?12l[?25h[?25l[m(binary)[67C]][15;1H[93m [14;15H[?12l[?25h[mbinar[?25l[46m([mbinary[46m)[m[67C]][15;1H[93m [14;21H[?12l[?25h[?25l[m[14;14H(binary)[67C]][15;1H[93m [14;22H[?12l[?25h[m f[?25l[29;1H/[?12l[?25h565[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[5;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã« [9;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[11;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[13;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[15;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[18;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [20;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[22;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;66H[?12l[?25h[?25l[m[29;1H[K[29;1H:[?12l[?25h565[?25l[27m[m[H[2J[1;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[2;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[3;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[5;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[7;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* 44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[11;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][15;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[17;1H[93m    [m + b]);
[93m567 [m      fprintf(fo, "\n");
[93m568 [m    }
[93m569 [m  } else {
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[24;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[26;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>[28;1H@                                                                                        [14;11H[?12l[?25h[mif[15;48H[?25l[29;1H[1m-- INSERT --[15;47H[?12l[?25h[?25l[m4 */[?12l[?25h[?25l41 */[?12l[?25h[?25l1è¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25l */[15;55H[K[15;52H[?12l[?25h[?25lã‚ˆã‚Š */[?12l[?25h[?25lb */[?12l[?25h[?25lbi */[?12l[?25h[?25lin */[?12l[?25h[?25lna */[?12l[?25h[?25lar */[?12l[?25h[?25lry */[?12l[?25h[?25ly= */[?12l[?25h[?25l=0 */[?12l[?25h[?25l0ï¼Œ */[?12l[?25h[?25l==0ï¼Œ */[15;63H[?12l[?25h=[?25ly ==0ï¼Œ */[15;63H[?12l[?25h==[?25l= 0ï¼Œ */[?12l[?25h0[2C[?25l0 */[?12l[?25h[?25l0< */[?12l[?25h[?25l<= */[?12l[?25h[?25l0 <= */[?12l[?25h<=[?25l  */[?12l[?25h[?25l b */[?12l[?25h[?25l  */[?12l[?25h[?25l < */[?12l[?25h[?25l  */[?12l[?25h[?25l l */[?12l[?25h[?25lla */[?12l[?25h[?25lay */[?12l[?25h[?25lys */[?12l[?25h[?25lse */[?12l[?25h[?25ls */[15;85H[K[15;82H[?12l[?25h[?25ly */[15;84H[K[15;81H[?12l[?25h[?25lye */[?12l[?25h[?25ler */[?12l[?25h[?25lr1 */[?12l[?25h[?25l1_ */[?12l[?25h[?25l_s */[?12l[?25h[?25lsi */[15;87H[?12l[?25h[?25l[16;28r[16;1H[L[1;29r[15;86Hiz **[16;1H[93m    [m/[15;88H[?12l[?25h[?25lze  [16;1H[93m    [m*/[15;89H[?12l[?25h[?25le[94m>>[m[16;1H[93m    [mã® */[?12l[?25h[?25læ™‚ */[?12l[?25h[?25lf */[?12l[?25h[?25lfo */[?12l[?25h[?25loã« */[?12l[?25h[?25lãƒã‚¤ãƒ³ã‚¿ */[?12l[?25h[?25ls */[?12l[?25h[?25lsy */[?12l[?25h[?25lyn */[?12l[?25h[?25ln0 */[?12l[?25h[?25l0[ */[?12l[?25h[?25l[a */[?12l[?25h[?25l  */[?12l[?25h[?25l * */[?12l[?25h[?25l  */[?12l[?25h[?25l l */[?12l[?25h[?25lla */[?12l[?25h[?25lay */[?12l[?25h[?25lye */[?12l[?25h[?25ler */[?12l[?25h[?25lr1 */[?12l[?25h[?25l1_ */[?12l[?25h[?25l_s */[?12l[?25h[?25lsi */[?12l[?25h[?25liz */[?12l[?25h[?25lze */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l b */[?12l[?25h[?25lb: */[?12l[?25h[?25lb */[16;48H[K[16;45H[?12l[?25h[?25l[16;25H[46m[[m[18Cb[46m][m */[?12l[?25h[?25l[16;25H[[19C]ã‹ã‚‰ */[?12l[?25h[?25ls */[?12l[?25h[?25lsi */[?12l[?25h[?25liz */[?12l[?25h[?25lze */[?12l[?25h[?25leo */[?12l[?25h[?25lof */[?12l[?25h[?25lf( */[?12l[?25h[?25l(r */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lal */[?12l[?25h[?25l[46m([mreal[46m)[m */[?12l[?25h[?25l(real)ãƒã‚¤ãƒˆ */[?12l[?25h[?25lå˜ä½ã§ */[?12l[?25h[?25lå˜ä½ã§ */[16;75H[K[16;66H[?12l[?25h[?25lå˜ä½ã§ */[16;73H[K[16;64H[?12l[?25h[?25l[16;56H[46m([mreal[46m)[må˜ä½ã§ */[16;71H[K[16;62H[?12l[?25h[?25l(real)bå˜ä½ã§ */[16;63H[?12l[?25h[?25lbiå˜ä½ã§ */[16;64H[?12l[?25h[?25lbå˜ä½ã§ */[16;72H[K[16;63H[?12l[?25h[?25lbyå˜ä½ã§ */[16;64H[?12l[?25h[?25lytå˜ä½ã§ */[16;65H[?12l[?25h[?25lteå˜ä½ã§ */[16;66H[?12l[?25h[?25leså˜ä½ã§ */[16;67H[?12l[?25h[?25l[16;56H[46m([mreal[46m)[?12l[?25h[?25l[m(real) byteså˜ä½ã§ */[16;63H[?12l[?25hbytes[2C[2C[2C[?25l1 */[?12l[?25h[?25l1å€‹ã® */[?12l[?25h[?25lãƒ‡ãƒ¼ã‚¿ã‚’ */[16;87H[?12l[?25h[?25l[17;28r[17;1H[L[1;29r[16;87Hæ›¸[94m>>[m[17;1H[93m    [mè¾¼ã¿ */[?12l[?25h[19;12H[17;9H[19;12H[?25l;a[?12l[?25h[?25l[19;12H[K[19;12H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */[?12l[?25h[?25lå‹•ã‹ãªã„ */[?12l[?25h[20;29H[?25l[12;42H[46m{[21;9H}[?12l[?25h[?25l[m[12;42H{[21;9H}[20;29H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l f */[?12l[?25h[?25lfo */[?12l[?25h[?25loã« */[?12l[?25h[?25læ”¹è¡Œ */[?12l[?25h[?25lã‚’ */[?12l[?25h[?25lå‡ºåŠ› */[?12l[?25h[18;47H[14;47H[13;47H[14;47H[18;47H[20;47H[?25l[12;42H[46m{[21;9H}[?12l[?25h[?25l[?12l[?25h[?25l[m[12;42H{[21;9H}[?12l[?25h[?25l[8;25H[46m{[22;7H}[?12l[?25h[m[29;1H[K[22;7H[?25l[?12l[?25h[?25l[8;25H{[22;7H}[21;7H[?12l[?25h [?25l[12;42H[46m{[21;9H}[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[12;43H[?12l[?25h[?25l[m{a /* 0 <= a < vocab_sizeã®æ™‚ */[21;9H}[12;44H[?12l[?25h[?25l[46m{[m /* 0 <= a < vocab_sizeã®æ™‚ */[12;73H[K[21;9H[46m}[12;43H[?12l[?25h[?25l[m{[21;9H}[12;44H[?12l[?25h/* 0 <= a < vocab_size[2C[2C[?25l, */[?12l[?25h[?25l[12;72H[K[13;5H */[13;11H[K[14;10H fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */[14;88H[K[15;1H[93m566 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][16;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã‚ˆã‚Šbinary == 0ï¼Œ0 <= b < layer1_size[94m>>[m[17;1H[93m    [mã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸[94m>>[m[18;1H[93m    [mè¾¼ã¿ */[18;12H[K[19;1H[93m567[m[1C      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[20;1H[93m   [m[1C + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */[20;41H[K[21;8H   fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[22;6H   }[22;10H[K[23;6H } else {[23;16H[K[24;8H // Run K-means on the word vectors[24;43H[K[25;12H clcn = classes, iter = 10, closeid;[25;48H[K[26;1H[93m573 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[27;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */[27;24H[K[28;1H[93m574 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[28;1H[94m@                                                                                        [13;5H[?12l[?25h[?25l[m[12;71H */[13;5H      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */[14;10H if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][15;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã‚ˆã‚Šbinary == 0ï¼Œ0 <= b < layer1_size[94m>>[m[16;1H[93m    [mã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸[94m>>[m[17;1H[93m    [mè¾¼ã¿ */ [17;13H[K[18;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[19;1H[93m   [m[1C + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */[19;41H[K[20;1H[93m567[m[1C      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[21;8H }[21;11H[K[22;6H } else {[23;6H   // Run K-means on the word vectors[24;8H int clcn = classes, iter = 10, closeid;[25;12H *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[26;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */[26;23H[K[27;1H[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[28;1H[93m    [mç›®ã§è§£æ”¾ */[28;16H[K[12;71H[?12l[?25h[?25l */[12;73H[K[12;70H[?12l[?25h[?25lï¼Œ */[?12l[?25h[?25l5 */[?12l[?25h[?25l56 */[?12l[?25h[?25l68 */[?12l[?25h[?25l8è¡Œç›® */[?12l[?25h[?25lã¾ã§ */[?12l[?25h[13;82H[14;83H[18;83H[14;83H[13;82H[12;83H[29;1H[K[12;79H[?25l[?12l[?25h[?25l[46m{[21;9H}[12;42H[?12l[?25h[?25l[m{[21;9H}[12;85H[?12l[?25h[?25l[46m{[21;9H}[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[21;10H[?12l[?25h[?25l[m[12;42H{[21;9H} [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 5 */[?12l[?25h[?25l56 */[?12l[?25h[?25l63 */[?12l[?25h[?25l3è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ã® */[?12l[?25h[?25lf */[?12l[?25h[?25lfo */[?12l[?25h[?25lor */[?12l[?25h[?25lråˆ† */[?12l[?25h[?25lr */[21;33H[K[21;30H[?12l[?25h[?25lræ–‡ */[?12l[?25h[?25lã“ã“ã¾ã§ */[?12l[?25h[?25l[22;15H[?12l[?25h[23;38H[?25l[22;15H[?12l[?25h[?25l[8;25H[46m{[22;7H}[?12l[?25h[m[29;1H[K[22;7H[?25l[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H[?12l[?25h[?25l[22;7H[?12l[?25h[?25l[8;25H{[22;7H}[23;7H[?12l[?25h[24;7H[23;7H[?25l[8;25H[46m{[22;7H}[?12l[?25h[?25l[m[8;25H{[22;7H}[21;7H[?12l[?25h[20;7H[18;7H[14;7H[13;7H [14;8H   if[?25l [46m([mbinary[46m)[m[67C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;14H[?12l[?25h[?25l[m(binary)[67C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;15H[?12l[?25h[mbinar[?25l[46m([mbinary[46m)[m[67C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;21H[?12l[?25h[?25l[m[14;14H(binary)[67C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;22H[?12l[?25h[m for[?25l [46m([27C)[m[33C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;27H[?12l[?25h[?25l[m([27C)[33C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;28H[?12l[?25h[mb = 0; b < layer1_size; b+[?25l[14;27H[46m([27C)[m[33C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;55H[?12l[?25h[?25l[m[14;27H([27C)[33C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;56H[?12l[?25h[m fwrit[?25le[46m([m[25C]][15;1H[93m [m[24C[46m)[m[62C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;63H[?12l[?25h[?25l[m([25C]][15;1H[93m [m[24C)[62C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;64H[?12l[?25h[m&syn[?25l0[46m[[19C]][m[15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;69H[?12l[?25h[?25l[m[[19C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;70H[?12l[?25h[ma * layer1_size + [?25l[14;69H[46m[[19C]][m[15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;89H[?12l[?25h[?25l[m[14;69H[[19C]][15;1H[93m [m[87C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;5H[?12l[?25h[m, sizeo[?25lf[46m([mreal[46m)[m[70C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;13H[?12l[?25h[?25l[m(real)[70C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;14H[?12l[?25h[mrea[?25l[46m([mreal[46m)[m[70C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;18H[?12l[?25h[?25l[m(real)[70C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;19H[?12l[?25h[m, 1, f[?25l[14;63H[46m([m[25C]][15;1H[93m [m[24C[46m)[m[62C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;26H[?12l[?25h[?25l[m[14;63H([25C]][15;1H[93m [m[24C)[62C[94m>>[m[16;1H[93m [m[87C[94m>>[m[17;1H[93m [15;27H[?12l[?25h[m; /* [2C[2C[2C[2C[2C[2C[2C41[2C[2C[2C[2C[?25l[29;1H[1m-- INSERT --[15;57H[?12l[?25h[?25l[mbinary == 0ï¼Œ0 <= b < layer1_sizeã®[94m>>[m[16;1H[93m    [mæ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸è¾¼[94m>>[m[17;1H[93m    [mã¿ */[17;10H[K[15;54H[?12l[?25h[?25lbinary == 0ï¼Œ0 <= b < layer1_sizeã®æ™‚ff[16;1H[93m    [moã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸è¾¼ã¿ **[17;1H[93m    [m/ [17;8H[K[15;52H[?12l[?25h[?25lã®binary == 0ï¼Œ0 <= b < layer1_sizeã®[94m>>[m[16;1H[93m    [mæ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸è¾¼[94m>>[m[17;1H[93m    [mã¿ */[15;54H[?12l[?25hbinary =[?25l= 0ï¼Œ0 <= b < layer1_sizeã®æ™‚[16;4H[93m [mfoã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸è¾¼ã¿  [17;1H[93m    [m*/[17;8H[K[15;61H[?12l[?25h= 0[?25l0ã‚ˆã‚Šï¼Œ0 <= b < layer1_sizee[16;1H[93m    [mã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸[94m>>[m[17;1H[93m    [mè¾¼ã¿ */[15;68H[?12l[?25h[?25lå‹•ãï¼Œ0 <= b < layer1__[16;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[17;1H[93m    [mã‚’æ›¸è¾¼ã¿ */[15;72H[?12l[?25h[19;41H[20;50H[?25l[20;18H[46m([8C)[?12l[?25h[?25l[?12l[?25h[?25l[m[20;18H([8C)[?12l[?25h[?25l[46m([8C)[20;19H[?12l[?25h[?25l[?12l[?25h[?25l[m([8C)[20;17H[?12l[?25h[?25l[12;42H[46m{[21;9H}[?12l[?25h[m[29;1H[K[21;8H[?25l[12;42H{[21;9H}[?12l[?25h[?25l[12;42H[46m{[21;9H}[12;42H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[12;43H[?12l[?25h[?25l[m{a /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[21;9H}[12;44H[?12l[?25h[?25l[46m{[m /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[12;86H[K[21;9H[46m}[12;43H[?12l[?25h[?25l[m{[21;9H}[12;44H[?12l[?25h/* 0 <=[?25l[46m{[21;9H}[12;43H[?12l[?25h[?25l[?12l[?25h[?25l[12;13H([26C)[m {[21;9H}[12;41H[?12l[?25h[?25l[12;13H([26C)% { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[12;42H[?12l[?25h[?25l[12;13H[46m([26C)[m { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[12;86H[K[12;41H[?12l[?25h[29;1H[K[12;40H[?25l[?12l[?25h[?25l[12;13H([26C)[?12l[?25h[?25l [46m{[21;9H}[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[21;9H[?12l[?25h[?25l[12;42H[?12l[?25h[?25l[m{[21;9H}[10;42H[?12l[?25h[9;32H[8;42H[?25l[46m{[22;7H}[8;25H[?12l[?25h[?25l[m{[22;7H}[8;26H[?12l[?25h /* [?25l[29;1H[1m-- INSERT --[8;31H[?12l[?25h[?25l[m ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUE */[8;44H[?12l[?25h[9;33H[10;44H[12;44H[?25l[13;18H[46m([24C)[?12l[?25h[?25l[m[13;18H([24C)[12;44H[?12l[?25h[10;44H[9;33H[8;44H[9;33H[10;44H[12;44H[?25l[13;18H[46m([24C)[?12l[?25h[?25l[m[13;18H([24C)[14;44H[?12l[?25h[18;44H[20;43H[21;43H[?25l[22;15H[?12l[?25h[21;14H[20;14H[18;14H[?25l[14;14H[46m([mbinary[46m)[m[67C]][15;1H[93m [m[87C__[16;1H[93m [m[87C[94m>>[m[17;1H[93m [14;14H[?12l[?25h[?25l[m(binary)[67C]][15;1H[93m [m[87C__[16;1H[93m [m[87C[94m>>[m[17;1H[93m [13;14H[?12l[?25h[?25l[m[12;13H[46m([26C)[12;14H[?12l[?25h[?25l[m([26C)[10;14H[?12l[?25h[9;14H[8;14H[6;14Hpe[?25ln[46m([17C)[m[53C[94m>>[m[7;1H[93m [6;17H[?12l[?25h[?25l[m[72C[94m>>[m[7;1H[93m [6;18H[?12l[?25h[?25l[m([17C)[53C[94m>>[m[7;1H[93m [6;19H[?12l[?25h[8;19H[9;19H[8;19H[m== [?25l[8;10H[46m([12C)[?12l[?25h[?25l)[?12l[?25h[?25l[m[8;10H([12C) [46m{[22;7H}[8;25H[?12l[?25h[?25l{[?12l[?25h[?25l[m{[22;7H}[8;27H[?12l[?25h/* [2C[2C[2C[2C[2C[2C[2C44[2C[2C[2Cclasses = 0[2C[2CTRUERUE[?25lEï¼Œ */[?12l[?25h[?25l5 */[?12l[?25h[?25l56 */[?12l[?25h[?25l69 */[?12l[?25h[?25l9è¡Œç›® */[?12l[?25h[?25lã¾ã§ */[?12l[?25h[9;33H[10;84H[12;84H[13;84H[14;84H[18;84H[20;50H[21;43H[?25l[22;15H[?12l[?25h[?25l{[?12l[?25h[?25l{a[?12l[?25h[?25l[22;15H[K[22;15H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */[?12l[?25h[?25lc */[?12l[?25h[?25lcl */[?12l[?25h[?25lla */[?12l[?25h[?25las */[?12l[?25h[?25lss */[?12l[?25h[?25lse */[?12l[?25h[?25len */[?12l[?25h[?25le */[22;42H[K[22;39H[?12l[?25h[?25les */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l== */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h[?25l0ã‚ˆã‚Š */[?12l[?25h[?25lå‹•ã‹ãªã„ */[?12l[?25h[?25lï¼ */[?12l[?25h[23;16H[22;13H[21;13H[20;13H[18;13H[14;13H[13;13H[?25l[12;13H[46m([26C)[12;13H[?12l[?25h[?25l[m([26C)[10;13H[?12l[?25h[9;13H[8;13H[9;13H[10;13H[?25l[76Cii[11;1H[93m [m[12;13H[46m([26C)[12;13H[?12l[?25h[?25l[m([26C)[13;13H[?12l[?25h[14;13H[18;13H[20;13H[21;13H[22;13H[23;13H[24;13H[25;13H[27;13H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[28;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */[26;13H[?12l[?25h[27;13H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m576 [m    for [46m([ma = 0; a < vocab_size; a++[46m)[m cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {[27;13H[?12l[?25h[?25l([26C)[28;13H[46m([20C)[28;13H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;13H([20C)
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;[27;13H[?12l[?25h[28;13H[?25l[1;28r[28;1H
[1;29r[28;1H[93m580 [m      for (c = 0; c < vocab_size; c++) {[28;13H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[27;1H[93m    [mayer1_size + d];
[93m582 [m[7C centcn[cl[c]]++;[26;13H[?12l[?25h[28;13H[26;13H[25;13H[24;13H[23;13H[?25l[22;13H[46m([20C)[22;13H[?12l[?25h[?25l[21;13H([26C)[m[22;13H([20C)[21;13H[?12l[?25h[?25l([26C)[19;13H[?12l[?25h[18;13H[16;13H[14;13H[13;13H[12;13H[11;13H[10;13H[11;13H[12;13H[13;13H[14;13H[16;13H[18;13H[19;13H[?25l[76C[94m>>[m[20;1H[93m [m[21;13H[46m([26C)[21;13H[?12l[?25h[?25l[m([26C)[22;13H[46m([20C)[22;13H[?12l[?25h[?25l[m([20C)[23;13H[?12l[?25h[24;13H[25;13H[26;13H[28;13H[?25l[1;28r[28;1H
[1;29r[24;44H[46m{[m[28;1H[93m583 [m      [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[23;44H{[27;11H}
[93m584 [m      for (b = 0; b < clcn; b++) {[28;13H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m585 [m[7C closev = 0;
[93m586 [m[7C for (c = 0; c < layer1_size; c++) {
[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[25;13H[?12l[?25h[26;13H[25;13Hclosev = 0;[26;24H[25;24H[24;24H[?25l[19;44H[46m{[23;11H}[?12l[?25h[?25l[m[19;44H{[22;22H[46m[[mc[46m][m[23;11H}[22;24H[?12l[?25h[?25l[c][20;24H[?12l[?25h[19;24H[18;24H[17;24H[16;24H[15;24H[13;24H[12;24H[13;24H[15;24H[16;24H[17;24H[18;24H[19;24H[20;24H[?25l[65Cll[21;1H[93m [m[22;22H[46m[[mc[46m][?12l[?25h[?25l[19;44H{[m[22;22H[c][23;11H[46m}[?12l[?25h[?25l[m[19;44H{[23;11H}[24;24H[?12l[?25h[25;24H[24;24H[?25l[19;44H[46m{[23;11H}[?12l[?25h[?25l[m[19;44H{[22;22H[46m[[mc[46m][m[23;11H}[22;24H[?12l[?25h[?25l[c][20;24H[?12l[?25h[?25l[65Cll[21;1H[93m [m[22;22H[46m[[mc[46m][?12l[?25h[?25l[m[c][20;24H[?12l[?25h[19;24H[18;24H[17;24H[16;24H[15;24H[13;24H[12;24H[10;24H[12;24H[13;24H[12;24H[10;24H[?25l[8;23H[46m([mint *[46m)[m[59C[94m>>[m[9;1H[93m [8;24H[?12l[?25h[?25l[m(int *)[59C[94m>>[m[9;1H[93m [7;24H[?12l[?25h[6;24H[7;24H[?25l[m[8;23H[46m([mint *[46m)[m[59C[94m>>[m[9;1H[93m [8;24H[?12l[?25h[?25l[m(int *)[59C[94m>>[m[9;1H[93m [10;24H[?12l[?25h[12;24H[13;24H[15;24H[16;24H[17;24H[18;24H[19;24H[20;24H[?25l[m[65Cll[21;1H[93m [m[22;22H[46m[[mc[46m][?12l[?25h[?25l[m[c][20;24H[?12l[?25h[19;24H[18;24H[17;24H[16;24H[15;24H[13;24H[12;24H[10;24H[?25l[8;23H[46m([mint *[46m)[m[59C[94m>>[m[9;1H[93m [8;24H[?12l[?25h[?25l[m(int *)[59C[94m>>[m[9;1H[93m [7;24H[?12l[?25h[6;24H[5;23H[?25l[?12l[?25h[m[29;1H[K[5;13H[?25l[?12l[?25h [?25l[27m[m[H[2J[1;1H[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[3;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][7;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[8;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[9;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[11;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else [46m{[m /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[18;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [20;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[23;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {[14;14H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[3;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][7;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[8;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[9;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[11;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else [46m{[m /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[18;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [20;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[23;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {[14;14H[?12l[?25h[?25l{[?12l[?25h /* [?25l[27m[m[H[2J[1;1H[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[3;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][7;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[8;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[9;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[11;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else [46m{[m /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[18;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [20;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[23;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {[14;14H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[3;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][7;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[8;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[9;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[11;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else [46m{[m /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[18;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [20;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[23;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {[14;14H[?12l[?25h[?25l{[?12l[?25h /* [?25l[29;1H[1m-- INSERT --[14;21H[?12l[?25h[?25l[m 6ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;20H[?12l[?25h[?25l61ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;21H[?12l[?25h[?25l12ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;22H[?12l[?25h[?25l2è¡Œç›®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;26H[?12l[?25h[?25lã¾ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;30H[?12l[?25h[?25lï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[14;32H[?12l[?25h[?25l[?12l[?25h[15;14H[16;14H[17;14H[19;14H[21;14H[22;14H[?25l[75C[94m>>[m[23;1H[93m [m[24;13H[46m([26C)[24;14H[?12l[?25h[?25l[m([26C)[25;13H[46m([20C)[25;14H[?12l[?25h[?25l[m([20C)[26;14H[?12l[?25h[27;14H[26;14H[?25l[25;13H[46m([20C)[25;14H[?12l[?25h[?25l[24;13H([26C)[m[25;13H([20C)[24;14H[?12l[?25h[?25l([26C)[24;15H[?12l[?25h = 0; a < vocab_size; a+[?25l[24;13H[46m([26C)[?12l[?25h[?25l[m[24;13H([26C)[25;37H[?12l[?25h[26;40H[27;40H[28;40H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[27;1H[93m    [mayer1_size + d];
[93m582 [m[7C centcn[cl[c]]++;[26;40H[?12l[?25h[28;29H[?25l[1;28r[28;1H
[1;29r[24;44H[46m{[m[28;1H[93m583 [m      [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[23;44H{[27;11H}
[93m584 [m      for (b = 0; b < clcn; b++) {[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m585 [m[7C closev = 0;
[93m586 [m[7C for (c = 0; c < layer1_size; c++) {
[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[25;24H[?12l[?25h[26;40H[?25l[27;19H[46m[[19C][?12l[?25h[?25l[m[27;19H[[19C][28;40H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[24;47H[46m{[m


[93m589 [m[7C [46m}[m
[93m590 [m[7C closev = sqrt(closev);[27;14H[?12l[?25h[?25l[24;47H{[27;13H}[28;35H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m591 [m[7C for (c = 0; c < layer1_size; c++) cent[layer1_size * b + c] /= closev;[28;40H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[20;38H[46m{[m[28;1H[93m592 [m      [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[19;38H{[27;11H}
[93m593 [m      for (c = 0; c < vocab_size; c++) {[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m594 [m[7C closev = -10;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m595 [m[7C closeid = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m596 [m[7C for (d = 0; d < clcn; d++) {
[93m597 [m[9C x = 0;[27;40H[?12l[?25h[28;21H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[28;1H[93m    [m layer1_size + b];[27;40H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m599 [m[9C if (x > closev) {[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;[27;28H[?12l[?25h[28;29H[?25l[1;28r[28;1H
[1;29r[25;31H[46m{[m


[93m602 [m[9C [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[20;40H[46m{[m[24;31H{[27;15H}
[93m603 [m[7C [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[19;40H{[27;13H}
[93m604 [m[7C cl[c] = closeid;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[15;44H[46m{[m[28;1H[93m605 [m      [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[14;44H{[27;11H}
[93m606 [m    }[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);[27;36H[?12l[?25h[?25l[28;13H[46m([26C)[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;13H([26C)
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;39H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;39H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;40H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[28;39H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m615 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;40H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m617 [m  int a;[?12l[?25h[27;40H[26;5H[25;40H[24;39H[23;30H[22;40H[21;39H[20;39H[29;1H[K[20;37H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25hw[?25l"word2vec.c" 703L, 40850C written[20;37H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ exit
exit

Script done on Mon Oct 26 13:14:55 2015
Script started on Mon Oct 26 13:15:09 2015
bash: /path/to/your/virtualenvwrapper.sh: No such file or directory
[?1034hbash-3.2$ exit
exit

Script done on Mon Oct 26 13:15:13 2015
Script started on Mon Oct 26 13:55:43 2015
bash: /path/to/your/virtualenvwrapper.sh: No such file or directory
[?1034hbash-3.2$ exitvi word2vec.c[4Ptest.cword2vec.c[4Ptest.cword2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 40850C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[28;1H[93m    [mary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h50[?25l[29;3H[K[29;3H[?12l[?25h50[?25l[27m[m[H[2J[1;1H[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº†(557è¡Œç›®ã¨558è¡Œç›®ã«é–¢ä¿‚) */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ[12;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[22;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[23;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[25;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[27;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */[14;7H[?12l[?25h[15;7H[16;7H[17;7H[18;7H[19;7H[20;7H[21;7H[24;7H[26;7H[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m561 [m    // Save the word vectors[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[28;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */[28;7H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][26;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[27;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[28;1H[93m    [mã‚’æ›¸è¾¼ã¿ */[25;7H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[27;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[26;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[14;25H[46m{[m[28;1H[93m569 [m  [46m}[m else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[13;25H{[27;7H}
[93m570 [m    // Run K-means on the word vectors[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m571 [m    int clcn = classes, iter = 10, closeid;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[28;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ[28;1H[93m    [mç›®ã§è§£æ”¾ */[27;7H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[28;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */[26;7H[?12l[?25h[27;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m580 [m      for (c = 0; c < vocab_size; c++) {[28;7H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[27;1H[93m    [mayer1_size + d];
[93m582 [m[7C centcn[cl[c]]++;[26;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m583 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m584 [m      for (b = 0; b < clcn; b++) {[28;7H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m585 [m[7C closev = 0;
[93m586 [m[7C for (c = 0; c < layer1_size; c++) {
[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[25;7H[?12l[?25h[26;7H[27;7H[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m589 [m[7C }
[93m590 [m[7C closev = sqrt(closev);[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m591 [m[7C for (c = 0; c < layer1_size; c++) cent[layer1_size * b + c] /= closev;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m592 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m593 [m      for (c = 0; c < vocab_size; c++) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m594 [m[7C closev = -10;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m595 [m[7C closeid = 0;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m596 [m[7C for (d = 0; d < clcn; d++) {
[93m597 [m[9C x = 0;[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[28;1H[93m    [m layer1_size + b];[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m599 [m[9C if (x > closev) {[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m602 [m[9C }[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m603 [m[7C }[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m604 [m[7C cl[c] = closeid;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m605 [m      }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m606 [m    }[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);[27;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m615 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m619 [m    if (a == argc - 1) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m620 [m      printf("Argument missing for %s\n", str);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m621 [m      exit(1);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m623 [m    return a;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[22;61H[46m{[m[28;1H[93m624 [m  [46m}[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[20;61H{[26;7H}
[93m625 [m  return -1;
[93m626 [m}[27;7H[?12l[?25h[?25l[18;50H[46m{[28;5H}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[17;50H{[27;5H}
[93m627 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m630 [m  if (argc == 1) {[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m632 [m    printf("Options:\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m633 [m    printf("Parameters for training:\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m653 [m    printf("\t-min-count <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;7H[?12l[?25h[27;7H[26;7H[25;7H[23;7H[22;7H[20;7H[19;7H[17;7H[16;7H[15;7H[14;7H[13;7H[12;7H[10;7H[9;7H[8;7H[7;7H[5;7H[3;7H[2;7H[1;7H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) {[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a;[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m621 [m      exit(1);[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) {[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[2;7H[3;7H[4;7H[5;7H[6;7H[7;7H[8;7H[9;7H[?25l[m[4;61H[46m{[10;7H}[?12l[?25h[?25l[m[4;61H{[10;7H}[11;7H[?12l[?25h[?25l[2;50H[46m{[12;5H}[?12l[?25h[?25l[m[2;50H{[12;5H}[13;5H[?12l[?25h[14;7H[15;7H[16;7H[17;7H  print[?25lf[46m([43C)[17;15H[?12l[?25h[?25l[m([43C)[17;16H[?12l[?25h"WOR[18;20H[19;20H[20;20H[21;20H[22;20H[23;20H[24;20H[25;20H[26;20H[27;20H[28;20H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m653 [m    printf("\t-min-count <int>\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;20H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;20H[?12l[?25h[28;20H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[28;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[46m[[m0[46m][m = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;18H[0]
[93m674 [m  save_vocab_file[0] = 0;[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[28;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1])[28;1H[94m@                                                                                        [27;20H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[28;1H[93m    [m;[27;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[28;1H[93m    [mgv[i + 1]);[27;20H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[27;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;20H[?12l[?25h[28;20H[?25l[1;28r[28;1H
[1;29r[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m683 [m  if (cbow) alpha = 0.05;[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[28;1H[93m    [m]);[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[27;20H[?12l[?25h[28;20H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [26;20H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[27;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [27;20H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[27;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m695 [m  vocab_hash = [46m([mint *[46m)[mcalloc(vocab_hash_size, sizeof(int));[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;20H(int *)
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));[28;20H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {[28;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[28;1H[93m    [me exp() table[27;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([28;1H[93m    [mx) = x / (x + 1)[27;20H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[22;44H[46m{[m[27;1H[93m700 [m  [46m}[m
[93m701 [m  TrainModel();[27;7H[?12l[?25h[?25l[22;44H{[27;7H}[28;19H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m702 [m  return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m703 [m}[?12l[?25h[27;15H[26;19H[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[23;20H[?12l[?25h[21;20H[20;20H[21;20H[23;20H[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[26;19H[?12l[?25h[27;15H[26;19H[?25l


/[?12l[?25hTrainModel[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m352 [m    if (syn1neg == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢[2;1H[93m    [mãƒªã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */
[93m353 [m    for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) /* 0 <= a < voo[4;1H[93m    [mcab_size & 0 <= b < layer1_sizeã®æ™‚ */
[93m354 [m     syn1neg[a * layer1_size + b] = 0;
[93m355 [m  }
[93m356 [m  for (a = 0; a < vocab_size; a++) for (b = 0; b < layer1_size; b++) {
[93m357 [m    next_random = next_random * (unsigned long long)25214903917 + 11;
[93m358 [m    syn0[a * layer1_size + b] = (((next_random & 0xFFFF) / (real)65536) - 0.5) / layee[10;1H[93m    [mr1_size;
[93m359 [m  }
[93m360 [m  CreateBinaryTree(); /* 198è¡Œç›®ã§å®šç¾©ã—ãŸCreateBinaryTree()ã§Huffmanæœ¨ã‚’ç”Ÿæˆ */
[93m361 [m}
[93m362 
363 [mvoid *TrainModelThread(void *id) { /* 543è¡Œç›®ã¾ã§ã‚ã‚‹ */
[93m364 [m  long long a, b, d, cw, word, last_word, sentence_length = 0, sentence_position = 0;[17;1H[93m365 [m  long long word_count = 0, last_word_count = 0, sen[MAX_SENTENCE_LENGTH + 1]; /* é…[94m>>[m[18;1H[93m    [måˆ—senã¯1001å€‹ã®è¦ç´ ã‚’æŒã¤ */
[93m366 [m  long long l1, l2, c, target, label, local_iter = iter; /* 44è¡Œç›®ã‚ˆã‚Šiter == 5 */
[93m367 [m  unsigned long long next_random = (long long)id;
[93m368 [m  real f, g; /* realå‹å¤‰æ•°f, g (skip-gramç­‰ã§é »å‡º) */
[93m369 [m  clock_t now;
[93m370 [m  real *neu1 = (real *)calloc(layer1_size, sizeof(real)); /* *neu1ã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«å‰²[94m>>[m[24;1H[93m    [må½“ï¼Œ 540è¡Œç›®ã§è§£æ”¾*/
[93m371 [m  real *neu1e = (real *)calloc(layer1_size, sizeof(real)); /* *neu1eã«ãƒ¡ãƒ¢ãƒªã‚’å‹•çš„ã«[94m>>[m[26;1H[93m    [må‰²å½“ï¼Œ541è¡Œç›®ã§è§£æ”¾ */
[93m372 [m  FILE *fi = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ãï¼Œãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ [28;1H[93m    [mã‚¿fiã«ä»£å…¥ï¼Œ374è¡Œç›®ã‹ã‚‰538è¡Œç›®ã¾ã§ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã®å¾Œ539è¡Œç›®ã§é–‰ã˜ã‚‹ */
[38;5;224msearch hit BOTTOM, continuing at TOP[15;11H[?12l[?25h[?25l[m[29;1H/TrainModel[29;12H[K[29;1H[27m[m[H[2J[1;1H[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[7;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº†(557è¡Œç›®ã¨558è¡Œç›®ã«é–¢ä¿‚) */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread(ãƒ [20;1H[93m    [mãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();[14;23H[?12l[?25h[?25l[29;1H/TrainModel[16;10H[?12l[?25h[?25l[29;1H[1;28r[1;1H[3M[1;29r[26;1H[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[27;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[28;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */[29;1H[K[26;70H[?12l[?25h[?25l


/TrainModel[27;75H[?12l[?25h[?25l

[1;28r[1;1H[2M[1;29r[27;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[28;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[29;1H[K[28;10H[?12l[?25h[?25l
/TrainModel[27m[m[H[2J[1;1H[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */[14;22H[?12l[?25h[?25l[29;1H/TrainModel[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel();
[93m702 [m  return 0;
[93m703 [m}[26;7H[?12l[?25h[12C[?25l


[1m-- INSERT --[26;20H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 5 */[?12l[?25h[?25l54 */[?12l[?25h[?25l45 */[?12l[?25h[?25l5è¡Œç›® */[?12l[?25h[?25lã® */[?12l[?25h[?25lT */[?12l[?25h[?25lTr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[?25lnM */[?12l[?25h[?25lMo */[?12l[?25h[?25lod */[?12l[?25h[?25lde */[?12l[?25h[?25lel */[?12l[?25h[?25llã‚’ */[?12l[?25h[?25lé–‹ã */[?12l[?25h[?25lTrainModelã‚’é–‹ã */[26;50H[K[26;31H[?12l[?25h[?25lã§TrainModelã‚’é–‹ã */[26;33H[?12l[?25h[?25lå®šç¾©ã—ãŸTrainModelã‚’é–‹ã */[26;41H[?12l[?25h[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[23;41H[?12l[?25h[21;41H[20;41H[?25l[19;18H[46m([mreal *[46m)[?12l[?25h[m[29;1H[K[19;24H[?25l(real *)[?12l[?25h[?25l[29;1H/[?12l[?25hs[?25l[29;2H[K[29;2H[?12l[?25hexpTable[?25l[21;9H[?12l[?25h[?25l[29;1H?[19;7H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m515 [m[11C target = table[(next_random >> 16) % table_size]; /* targetã«table[(next__[2;1H[93m    [mrandom >> 16) % table_size]ã‚’ä»£å…¥ */
[93m516 [m[11C if (target == 0) target = next_random % (vocab_size - 1) + 1;
[93m517 [m[11C if (target == word) continue; /* target == wordã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦510[94m>>[m[5;1H[93m    [mè¡Œç›®ã«æˆ»ã‚‹ */
[93m518 [m[11C label = 0;
[93m519 [m[9C }
[93m520 [m[9C l2 = target * layer1_size;
[93m521 [m[9C f = 0;
[93m522 [m[9C for (c = 0; c < layer1_size; c++) f += syn0[c + l1] * syn1neg[c + l2];
[93m523 [m[9C if (f > MAX_EXP) g = (label - 1) * alpha;
[93m524 [m[9C else if (f < -MAX_EXP) g = (label - 0) * alpha;
[93m525 [m[9C else g = (label - expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP  [14;1H[93m    [m/ 2))]) * alpha;
[93m526 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1neg[c + l2];
[93m527 [m[9C for (c = 0; c < layer1_size; c++) syn1neg[c + l2] += g * syn0[c + l1];
[93m528 [m[7C } /* 509è¡Œç›®ã‹ã‚‰ã®foræ–‡ã¯ã“ã“ã¾ã§ */
[93m529 [m[7C // Learn weights input -> hidden
[93m530 [m[7C for (c = 0; c < layer1_size; c++) syn0[c + l1] += neu1e[c];
[93m531 [m      }
[93m532 [m    } /* 483è¡Œç›®ã‹ã‚‰ã®skip-gramçµ‚ã‚ã‚Š */
[93m533 [m    sentence_position++; /* sentence_positionã¯ã“ã“ã§1å¢—ãˆã‚‹ */
[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[94m>>[m[26;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */[13;33H[?12l[?25h[?25l[29;1H?expTable[27m[m[H[2J[1;1H[93m491 [m[7C for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m492 [m[7C // HIERARCHICAL SOFTMAX /* éšå±¤çš„ã‚½ãƒ•ãƒˆãƒãƒƒã‚¯ã‚¹ */
[93m493 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) { /* 507è¡Œç›®ã¾ã§(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ[4;1H[93m    [mã ã¨hs == 0ã ã‹ã‚‰å‹•ã‹ãªã„ï¼) */
[93m494 [m[9C f = 0; /* realå‹å¤‰æ•°f(368è¡Œç›®ã§å®£è¨€æ¸ˆ)ã«0ã‚’ä»£å…¥ */
[93m495 [m[9C l2 = vocab[word].point[d] * layer1_size;
[93m496 [m[9C // Propagate hidden -> output /* hiddenã‹ã‚‰outputã«åæ˜  */
[93m497 [m[9C for (c = 0; c < layer1_size; c++) f += syn0[c + l1] * syn1[c + l2];
[93m498 [m[9C if (f <= -MAX_EXP) continue; /* f <= -MAX_EXP(== -6, 23è¡Œç›®)ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­[94m>>[m[10;1H[93m    [mãƒƒãƒ— */
[93m499 [m[9C else if (f >= MAX_EXP) continue; /* f >= MAX_EXP(== 6, 23è¡Œç›®)ã®æ™‚å‡¦ç†ã‚’ã‚¹[94m>>[m[12;1H[93m    [mã‚­ãƒƒãƒ— */
[93m500 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))]; //[14;1H[93m    [m* -MAX_EXP < f < MAX_EXPã®æ™‚ fã«expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX__[15;1H[93m    [mEXP / 2))]ã‚’ä»£å…¥ */
[93m501 [m[9C // 'g' is the gradient multiplied by the learning rate /* 'g'ã¯å‹¾é…ã¨å­¦ç¿’æ¯”[17;1H[93m    [mã®ç© */
[93m502 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m503 [m[9C // Propagate errors output -> hidden /* ã‚¨ãƒ©ãƒ¼ã‚’outputã‹ã‚‰hiddenã«åæ˜  */
[93m504 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m505 [m[9C // Learn weights hidden -> output /* é‡ã¿ã‚’å­¦ç¿’ã—ã¦hidenã‹ã‚‰ */
[93m506 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * syn0[c + l1];
[93m507 [m[7C } /* 493è¡Œç›®ã‹ã‚‰ */
[93m508 [m[7C // NEGATIVE SAMPLING /* ãƒã‚¬ãƒ†ã‚£ãƒ–ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° */
[93m509 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) { /* 528è¡Œç›®ã¾ã§(ãƒ‡ãƒ•ã‚©[94m>>[m[26;1H[93m    [mãƒ«ãƒˆã ã¨negative == 5ã ã‹ã‚‰ã“ã£ã¡ãŒå‹•ã) */
[93m510 [m[9C if (d == 0) { /* ãƒ«ãƒ¼ãƒ—ã®æœ€åˆã ã‘ */
[93m511 [m[11C target = word;[14;37H[?12l[?25h[?25l[29;1H?expTable[13;24H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m456 [m[11C label = 1;
[93m457 [m[9C } else {
[93m458 [m[11C next_random = next_random * (unsigned long long)25214903917 + 11;
[93m459 [m[11C target = table[(next_random >> 16) % table_size];
[93m460 [m[11C if (target == 0) target = next_random % (vocab_size - 1) + 1;
[93m461 [m[11C if (target == word) continue;
[93m462 [m[11C label = 0;
[93m463 [m[9C }
[93m464 [m[9C l2 = target * layer1_size;
[93m465 [m[9C f = 0;
[93m466 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1neg[c + l2];
[93m467 [m[9C if (f > MAX_EXP) g = (label - 1) * alpha;
[93m468 [m[9C else if (f < -MAX_EXP) g = (label - 0) * alpha;
[93m469 [m[9C else g = (label - expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP  [15;1H[93m    [m/ 2))]) * alpha;
[93m470 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1neg[c + l2];
[93m471 [m[9C for (c = 0; c < layer1_size; c++) syn1neg[c + l2] += g * neu1[c];
[93m472 [m[7C }
[93m473 [m[7C // hidden -> in
[93m474 [m[7C for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {
[93m475 [m[9C c = sentence_position - window + a;
[93m476 [m[9C if (c < 0) continue;
[93m477 [m[9C if (c >= sentence_length) continue;
[93m478 [m[9C last_word = sen[c];
[93m479 [m[9C if (last_word == -1) continue;
[93m480 [m[9C for (c = 0; c < layer1_size; c++) syn0[c + last_word * layer1_size] += neu11[27;1H[93m    [me[c];
[93m481 [m[7C }[14;33H[?12l[?25h[?25l[29;1H?expTable[1;28r[1;1H[12L[1;29r[1;1H[93m444 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))];
[93m445 [m[9C // 'g' is the gradient multiplied by the learning rate
[93m446 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m447 [m[9C // Propagate errors output -> hidden
[93m448 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m449 [m[9C // Learn weights hidden -> output
[93m450 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * neu1[c];
[93m451 [m[7C }
[93m452 [m[7C // NEGATIVE SAMPLING
[93m453 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) {
[93m454 [m[9C if (d == 0) {
[93m455 [m[11C target = word;[29;1H[K[1;24H[?12l[?25h[?25l[29;1H?expTable[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;[14;35H[?12l[?25h[?25l[29;1H?expTable[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[23;38H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[23;23H[?12l[?25h[?25l[29;1H[23;9H[?12l[?25h[?25l[29;1H[21;9H[?12l[?25h[?25l[29;1H[19;7H[?12l[?25h[?25l[29;1H/[21;9H[?12l[?25h[?25l[29;1H[23;9H[?12l[?25h[?25l[29;1H[23;23H[?12l[?25h[?25l[29;1H[23;38H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[38;5;224msearch hit BOTTOM, continuing at TOP[14;35H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[23;38H[?12l[?25h[?25l[m[29;1H/expTable[29;10H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[38;5;224msearch hit BOTTOM, continuing at TOP[14;35H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[23;38H[?12l[?25h[?25l[m[29;1H/expTable[29;10H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[38;5;224msearch hit BOTTOM, continuing at TOP[14;35H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[23;38H[?12l[?25h[?25l[m[29;1H/expTable[29;10H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[38;5;224msearch hit BOTTOM, continuing at TOP[14;35H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real));
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[23;38H[?12l[?25h[?25l[m[29;1H?expTable[29;10H[K[29;1H[23;23H[?12l[?25h[?25l[29;1H[23;9H[?12l[?25h[?25l[29;1H[21;9H[?12l[?25h[?25l[29;1H[19;7H[?12l[?25h[62C[?25l[29;1H[1m-- INSERT --[19;70H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l å‹•çš„ã« */[?12l[?25h[29;1H[K[19;78H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hå‹•çš„[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[2;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[15;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[93m 60 [m  d1 = pow(vocab[i].cn, power) / train_words_pow;
[93m 61 [m  for (a = 0; a < table_size; a++) {
[93m 62 [m    table[a] = i;
[93m 63 [m    if (a / (double)table_size > d1) {
[93m 64 [m      i++;
[93m 65 [m      d1 += pow(vocab[i].cn, power) / train_words_pow;
[93m 66 [m    }
[93m 67 [m    if (i >= vocab_size) i = vocab_size - 1;
[93m 68 [m  }
[93m 69 [m}
[93m 70 [m
[38;5;224msearch hit BOTTOM, continuing at TOP[15;11H[?12l[?25h[?25l[m[29;1H?å‹•çš„[29;6H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* å‹•çš„ã« */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[19;74H[?12l[?25h[?25l[m[29;1H?å‹•çš„[29;6H[K[29;1H[27m[m[H[2J[1;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[2;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[9;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [11;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[14;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {
[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[21;1H[93m    [mayer1_size + d];
[93m582 [m[7C centcn[cl[c]]++;
[93m583 [m      }
[93m584 [m      for (b = 0; b < clcn; b++) {
[93m585 [m[7C closev = 0;
[93m586 [m[7C for (c = 0; c < layer1_size; c++) {
[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[13;85H[?12l[?25h[?25l[29;1H/å‹•çš„[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* å‹•çš„ã« */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}[19;74H[?12l[?25h[?25l[29;1H?å‹•çš„[27m[m[H[2J[1;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[2;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */
[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */
[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;
[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[94m>>[m[9;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611è¡Œ [11;1H[93m    [mç›®ã§è§£æ”¾ */
[93m574 [m    real closev, x;
[93m575 [m    real *cent = (real *)calloc(classes * layer1_size, sizeof(real)); /* *centã«å‹•çš„[94m>>[m[14;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ610è¡Œç›®ã§è§£æ”¾ */
[93m576 [m    for (a = 0; a < vocab_size; a++) cl[a] = a % clcn;
[93m577 [m    for (a = 0; a < iter; a++) {
[93m578 [m      for (b = 0; b < clcn * layer1_size; b++) cent[b] = 0;
[93m579 [m      for (b = 0; b < clcn; b++) centcn[b] = 1;
[93m580 [m      for (c = 0; c < vocab_size; c++) {
[93m581 [m[7C for (d = 0; d < layer1_size; d++) cent[layer1_size * cl[c] + d] += syn0[c * ll[21;1H[93m    [mayer1_size + d];
[93m582 [m[7C centcn[cl[c]]++;
[93m583 [m      }
[93m584 [m      for (b = 0; b < clcn; b++) {
[93m585 [m[7C closev = 0;
[93m586 [m[7C for (c = 0; c < layer1_size; c++) {
[93m587 [m[9C cent[layer1_size * b + c] /= centcn[b];
[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];[13;85H[?12l[?25h[?25l[29;1H?å‹•çš„[10;67H[?12l[?25h[?25l[29;1H/[13;85H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[5;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[10;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[12;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[15;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int));
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* å‹•çš„ã« */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}[19;74H[?12l[?25h[?25l[29;1H[1m-- INSERT --[19;76H[?12l[?25h[?25l[m eå‹•çš„ã« */[19;75H[?12l[?25h[?25lexå‹•çš„ã« */[19;76H[?12l[?25h[?25lxTå‹•çš„ã« */[19;77H[?12l[?25h[?25lTaå‹•çš„ã« */[19;78H[?12l[?25h[?25labå‹•çš„ã« */[19;79H[?12l[?25h[?25lblå‹•çš„ã« */[19;80H[?12l[?25h[?25lleå‹•çš„ã« */[19;81H[?12l[?25h[?25l[20;28r[20;1H[L[1;29r[19;75HxpTableå‹•çš„ã« **[20;1H[93m    [m/[19;77H[?12l[?25hTable[?25leã«å‹•çš„ã«[20;4H[93m [m */[19;84H[?12l[?25h[2C[2C[20;5H[?25l[93m [mãƒ¡ãƒ¢ãƒª */[?12l[?25h[?25lå‰²å½“ */[?12l[?25h[?25l( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([mã©ã“ã§[46m)[m */[?12l[?25h[?25lè§£æ”¾[46m)[m */[?12l[?25h[?25lï¼Ÿ[46m)[m */[?12l[?25h[29;1H[K[20;26H[?25l[20;15H([12C)[?12l[?25h[?25l[29;1H/[?12l[?25hfree(e[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[m[97m[41mE486: Pattern not found: free(e[m[29;32H[K[20;26H[?12l[?25h[18;63H[?25l[29;1H[1m-- INSERT --[m[29;13H[K[18;64H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l v */[?12l[?25h[?25lvo */[?12l[?25h[?25lob */[?12l[?25h[?25lba */[?12l[?25h[?25lb */[18;74H[K[18;71H[?12l[?25h[?25lo */[18;73H[K[18;70H[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_h */[?12l[?25h[?25lha */[?12l[?25h[?25las */[?12l[?25h[?25lsh */[?12l[?25h[?25lhã« */[?12l[?25h[?25lå‹•çš„ã« */[?12l[?25h[?25l[19;28r[19;1H[L[1;29r[18;86Hãƒ¡ãƒ¢[19;1H[93m    [mãƒª */[?12l[?25h[?25lå‰²å½“ */[?12l[?25h[?25l( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([mã©ã“ã§[46m)[m */[?12l[?25h[?25lè§£æ”¾[46m)[m */[?12l[?25h[?25lï¼Ÿ[46m)[m */[?12l[?25h[29;1H[K[19;22H[?25l[19;11H([12C)[?12l[?25h[18;7H[?25l[29;1H/[?12l[?25hfree([?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[2;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[4;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[10;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ[12;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[17;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[25;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[38;5;224msearch hit BOTTOM, continuing at TOP[14;11H[?12l[?25h[?25l[m[29;1H?free([29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[2;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[38;5;224msearch hit TOP, continuing at BOTTOM[15;9H[?12l[?25h[?25l[m[29;1H/free([29;7H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[2;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[4;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[10;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ[12;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[17;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[25;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[38;5;224msearch hit BOTTOM, continuing at TOP[14;11H[?12l[?25h[?25l[m[29;1H?free([29;7H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[2;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[38;5;224msearch hit TOP, continuing at BOTTOM[15;9H[?12l[?25h[?25l[m[29;1H?free([29;7H[K[29;1H[14;9H[?12l[?25h[?25l[29;1H/[15;9H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[2;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[4;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[10;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ[12;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[17;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[25;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[38;5;224msearch hit BOTTOM, continuing at TOP[14;11H[?12l[?25h[?25l[m[29;1H[K[29;1H/[?12l[?25hvoda[?25l[29;5H[K[29;5H[?12l[?25h[?25l[29;4H[K[29;4H[?12l[?25hcab_c[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[m[97m[41mE486: Pattern not found: vocab_c[m[29;33H[K[14;11H[?12l[?25h[?25l[29;1H[K[29;1H/[?12l[?25hvocab[?25l[14;16H[?12l[?25h[?25l[29;1H?[13;28H[?12l[?25h[?25l[29;1H[13;11H[?12l[?25h[?25l[29;1H[11;57H[?12l[?25h[?25l[29;1H[11;14H[?12l[?25h[?25l[29;1H[10;31H[?12l[?25h[?25l[29;1H[9;80H[?12l[?25h[?25l[29;1H[6;14H[?12l[?25h[?25l[29;1H[5;45H[?12l[?25h[?25l[29;1H[5;23H[?12l[?25h[?25l[29;1H[4;19H[?12l[?25h[?25l[29;1H[3;84H[?12l[?25h[?25l[29;1H[3;54H[?12l[?25h[?25l[29;1H[3;24H[?12l[?25h[?25l[29;1H[3;14H[?12l[?25h[?25l[29;1H[1;19H[?12l[?25h[?25l[29;1H[1;28r[1;1H[5L[1;29r[1;1H[93m145 [m// Sorts the vocabulary by frequency using word counts /* èªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †[94m>>[m[2;1H[93m    [mã«ä¸¦æ›¿ãˆ */
[93m146 [mvoid SortVocab() { /* voidé–¢æ•°SortVocab() */
[93m147 [m  int a, size;
[93m148 [m  unsigned int hash;[29;1H[K[1;18H[?12l[?25h[?25l[29;1H?vocab[1;28r[1;1H[3L[1;29r[1;1H[93m142 [m    return ((struct vocab_word *)b)->cn - ((struct vocab_word *)a)->cn;
[93m143 [m}
[93m144 [m[29;1H[K[1;56H[?12l[?25h[?25l[29;1H?vocab[1;25H[?12l[?25h[?25l[29;1H[1;28r[1;1H[5L[1;29r[1;1H[93m137 [m  return vocab_size - 1;
[93m138 [m}
[93m139 
140 [m// Used later for sorting by word counts /* å˜èªæ•°ã§ä¸¦æ›¿ãˆã‚’ã™ã‚‹éš›ã«ä½¿ç”¨ */
[93m141 [mint VocabCompare(const void *a, const void *b) {[29;1H[K[1;14H[?12l[?25h[?25l[29;1H?vocab[1;28r[1;1H[L[1;29r[1;1H[93m136 [m  vocab_hash[hash] = vocab_size - 1;[29;1H[K[1;26H[?12l[?25h[?25l[29;1H?vocab[1;7H[?12l[?25h[?25l[29;1H[1;28r[1;1H[L[1;29r[1;1H[93m135 [m  while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;[29;1H[K[1;58H[?12l[?25h[?25l[29;1H?vocab[1;14H[?12l[?25h[?25l[29;1H[1;28r[1;1H[4L[1;29r[1;1H[93m132 [m    vocab = (struct vocab_word *)realloc(vocab, vocab_max_size * sizeof(struct vocab__[2;1H[93m    [mword)); /*  */
[93m133 [m  }
[93m134 [m  hash = GetWordHash(word); /* hashã«wordã®hashã‚’ä»£å…¥ */[28;1H[94m@                                                                                        [m[29;1H[K[1;84H[?12l[?25h[?25l[29;1H?vocab[1;53H[?12l[?25h[?25l[29;1H[1;46H[?12l[?25h[?25l[29;1H[1;25H[?12l[?25h[?25l[29;1H[1;9H[?12l[?25h[?25l[29;1H[1;28r[1;1H[L[1;29r[1;1H[93m131 [m    vocab_max_size += 1000; /* vocab_max_sizeã«1000ã‚’è¶³ã™ */[29;1H[K[1;36H[?12l[?25h[?25l[29;1H?vocab[1;9H[?12l[?25h[?25l[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m130 [m  if (vocab_size + 2 >= vocab_max_size) { /* vocab_size + 2ãŒvocab_max_sizeä»¥ä¸Šã®æ™‚ **[2;1H[93m    [m/[29;1H[K[1;66H[?12l[?25h[?25l[29;1H?vocab[1;50H[?12l[?25h[?25l[29;1H[1;29H[?12l[?25h[?25l[29;1H[1;11H[?12l[?25h[?25l[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m128 [m  vocab_size++; /* vocab_sizeã«1ã‚’è¶³ã™ */
[93m129 [m  // Reallocate memory if needed /* å¿…è¦æ™‚ã«ãƒ¡ãƒ¢ãƒªã®å‰²å½“ã‚’å¤‰æ›´ */[29;1H[K[1;24H[?12l[?25h[?25l[29;1H?vocab[1;7H[?12l[?25h[?25l[29;1H[1;28r[1;1H[L[1;29r[1;1H[93m127 [m  vocab[vocab_size].cn = 0; /* vocab[vocab_size].cnã«0ã‚’ä»£å…¥ */[28;1H[94m@                                                                                        [m[29;1H[K[1;42H[?12l[?25h[?25l[29;1H?vocab[1;36H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h700[?25l[27m[m[H[2J[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[3;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[10;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[13;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢[17;1H[93m    [mãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[19;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}[25;7H[?12l[?25h[23;7H[21;7H[20;7H[18;7H[16;7H[?25l[29;1H/[?12l[?25hvocab_hash[?25l[16;34H[?12l[?25h[?25l[29;1H[16;68H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[15;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[24;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[28;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;15H[?12l[?25h[?25l[m[29;1H/vocab_hash[29;12H[K[29;1H[1;28r[1;1H[7M[1;29r[22;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[23;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[25;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[27;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */[29;1H[K[28;10H[?12l[?25h[?25l
?vocab_hash[7;15H[?12l[?25h[?25l[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[3;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[10;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[13;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word));
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢ [17;1H[93m    [mãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã« [19;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[38;5;224msearch hit TOP, continuing at BOTTOM[16;68H[?12l[?25h[mvocab_hash[2C[2C[2C[2C[2C[17;5H[2C[?25l[29;1H[1m-- INSERT --[m[29;13H[K[17;9H[?12l[?25h[2C[?25l(å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;8H[?12l[?25h[?25l[46m()[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;9H[?12l[?25h[?25l[?12l[?25h[?25l[46m([mv[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;9H[?12l[?25h[?25lvo[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;10H[?12l[?25h[?25loc[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;11H[?12l[?25h[?25lca[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;12H[?12l[?25h[?25lab[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;13H[?12l[?25h[?25lb_[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;14H[?12l[?25h[?25l_h[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;15H[?12l[?25h[?25lha[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;16H[?12l[?25h[?25las[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;17H[?12l[?25h[?25lsh[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;18H[?12l[?25h[?25lh_[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;19H[?12l[?25h[?25l_s[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;20H[?12l[?25h[?25lsi[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;21H[?12l[?25h[?25liz[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;22H[?12l[?25h[?25lze[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;23H[?12l[?25h[?25le=[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;24H[?12l[?25h[?25l=3[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;25H[?12l[?25h[?25l30[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;26H[?12l[?25h[?25l0M[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;27H[?12l[?25h[?25lMN[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;28H[?12l[?25h[?25lM[46m)[må‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;49H[K[17;27H[?12l[?25h[?25l[17;7H([19C)[?12l[?25h[?25le =30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;24H[?12l[?25h=[?25l= 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[17;26H[?12l[?25h30[?25l[17;7H[46m([21C)[?12l[?25h[?25l[m[17;7H([21C)[15;86H[?12l[?25h[14;89H[15;86H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l[16;5H[?12l[?25h[?25l[16;28r[16;1H[L[1;29r[16;1H[93m    [m [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[15;89H[16;5H[?25l[93m [mv */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lbã« */[?12l[?25h[?25lå‹•çš„ã« */[?12l[?25h[?25lãƒ¡ãƒ¢ãƒª */[?12l[?25h[?25lå‰²å½“ */[?12l[?25h[?25l/ */[?12l[?25h[?25l */[16;31H[K[16;28H[?12l[?25h[29;1H[K[16;26H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hfree(v[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[2;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[4;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[10;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ[12;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[17;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[25;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {
[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[38;5;224msearch hit BOTTOM, continuing at TOP[14;11H[?12l[?25h[?25l[m[29;1H/free(v[29;8H[K[29;1H[1;28r[1;1H[13M[1;29r[16;1H[93m171 [m    vocab[a].point = (int *)calloc(MAX_CODE_LENGTH, sizeof(int));
[93m172 [m  }
[93m173 [m}
[93m174 
175 [m// Reduces the vocabulary by removing infrequent tokens
[93m176 [mvoid ReduceVocab() {
[93m177 [m  int a, b = 0;
[93m178 [m  unsigned int hash;
[93m179 [m  for (a = 0; a < vocab_size; a++) if (vocab[a].cn > min_reduce) {
[93m180 [m    vocab[b].cn = vocab[a].cn;
[93m181 [m    vocab[b].word = vocab[a].word;
[93m182 [m    b++;
[93m183 [m  } else free(vocab[a].word);[29;1H[K[28;14H[?12l[?25h[?25l
/free(v[38;5;224msearch hit BOTTOM, continuing at TOP[1;11H[?12l[?25h[?25l[m[29;1H/free(v[29;8H[K[29;1H[28;14H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[1;11H[?12l[?25h[?25l[m[29;1H/free(v[29;8H[K[29;1H[28;14H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[1;11H[?12l[?25h[?25l[m[29;1H/free(v[29;8H[K[29;1H[28;14H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[1;11H[?12l[?25h[?25l[m[29;1H/free(v[29;8H[K[29;1H[28;14H[?12l[?25h[?25l
[38;5;224msearch hit BOTTOM, continuing at TOP[1;11H[?12l[?25h[?25l[m[29;1H[K[29;1H/[?12l[?25hvocab[?25l[29;6H[K[29;6H[?12l[?25h[?25l[29;5H[K[29;5H[?12l[?25h[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25h [1;11H[?25l[29;1H/[?12l[?25hword[?25l[1;25H[?12l[?25h[?25l[29;1H?[1;28r[1;1H[7L[1;29r[1;1H[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[4;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ [6;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */[29;1H[K[1;13H[?12l[?25h[?25l[29;1H?word[1;28r[1;1H[4L[1;29r[1;1H[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[2;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;[29;1H[K[1;60H[?12l[?25h[?25l[29;1H?word[1;28r[1;1H[7L[1;29r[1;1H[93m145 [m// Sorts the vocabulary by frequency using word counts /* èªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †[94m>>[m[2;1H[93m    [mã«ä¸¦æ›¿ãˆ */
[93m146 [mvoid SortVocab() { /* voidé–¢æ•°SortVocab() */
[93m147 [m  int a, size;
[93m148 [m  unsigned int hash;
[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[7;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */[29;1H[K[1;48H[?12l[?25h[?25l[29;1H?word[1;28r[1;1H[3L[1;29r[1;1H[93m142 [m    return ((struct vocab_word *)b)->cn - ((struct vocab_word *)a)->cn;
[93m143 [m}
[93m144 [m[29;1H[K[1;62H[?12l[?25h[?25l[29;1H?word[1;31H[?12l[?25h[?25l[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m140 [m// Used later for sorting by word counts /* å˜èªæ•°ã§ä¸¦æ›¿ãˆã‚’ã™ã‚‹éš›ã«ä½¿ç”¨ */
[93m141 [mint VocabCompare(const void *a, const void *b) {[29;1H[K[1;34H[?12l[?25h[?25l[29;1H?word[1;28r[1;1H[6L[1;29r[1;1H[93m134 [m  hash = GetWordHash(word); /* hashã«wordã®hashã‚’ä»£å…¥ */
[93m135 [m  while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m136 [m  vocab_hash[hash] = vocab_size - 1;
[93m137 [m  return vocab_size - 1;
[93m138 [m}
[93m139 [m[29;1H[K[1;42H[?12l[?25h[?25l[29;1H?word[1;26H[?12l[?25h[?25l[29;1H[1;28r[1;1H[3L[1;29r[1;1H[93m132 [m    vocab = (struct vocab_word *)realloc(vocab, vocab_max_size * sizeof(struct vocab__[2;1H[93m    [mword)); /*  */
[93m133 [m  }[28;1H[94m@                                                                                        [m[29;1H[K[2;5H[?12l[?25h[?25l[29;1H?word[1;31H[?12l[?25h[?25l[29;1H[1;28r[1;1H[7L[1;29r[1;1H[93m126 [m  strcpy(vocab[vocab_size].word, word); /* vocab[vocab_size].wordã«wordã‚’ã‚³ãƒ”ãƒ¼ */
[93m127 [m  vocab[vocab_size].cn = 0; /* vocab[vocab_size].cnã«0ã‚’ä»£å…¥ */
[93m128 [m  vocab_size++; /* vocab_sizeã«1ã‚’è¶³ã™ */
[93m129 [m  // Reallocate memory if needed /* å¿…è¦æ™‚ã«ãƒ¡ãƒ¢ãƒªã®å‰²å½“ã‚’å¤‰æ›´ */
[93m130 [m  if (vocab_size + 2 >= vocab_max_size) { /* vocab_size + 2ãŒvocab_max_sizeä»¥ä¸Šã®æ™‚ **[6;1H[93m    [m/
[93m131 [m    vocab_max_size += 1000; /* vocab_max_sizeã«1000ã‚’è¶³ã™ */[29;1H[K[1;72H[?12l[?25h[?25l[29;1H?word[1;66H[?12l[?25h[?25l[29;1H[1;38H[?12l[?25h[?25l[29;1H[1;32H[?12l[?25h[?25l[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m125 [m  vocab[vocab_size].word = (char *)calloc(length, sizeof(char)); /* lengthå€‹ã®charã‚µ[94m>>[m[2;1H[93m    [mã‚¤ã‚ºã®ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã—ï¼Œcharå‹ã«ã—ã¦vocab[vocab_size].wordã«ä»£å…¥ */[29;1H[K[2;57H[?12l[?25h[?25l[29;1H?word[1;25H[?12l[?25hword =[?25l [46m([mchar *[46m)[m[49C[94m>>[m[2;1H[93m [1;32H[?12l[?25h[?25l[m(char *)[49C[94m>>[m[2;1H[93m [1;33H[?12l[?25h[mchar [?25l[46m([mchar *[46m)[m[49C[94m>>[m[2;1H[93m [1;39H[?12l[?25h[?25l[m[1;32H(char *)[49C[94m>>[m[2;1H[93m [1;40H[?12l[?25h[mcallo[?25lc[46m([20C)[m[21C[94m>>[m[2;1H[93m [1;46H[?12l[?25h[?25l[m([20C)[21C[94m>>[m[2;1H[93m [1;47H[?12l[?25h[mlength, siz[?25l[29;1H[K[29;1H/[?12l[?25hfree(v[?25l[1;28r[1;1H[14M[1;29r[15;1H[93m149 [m  // Sort the vocabulary and keep </s> at the first position /* èªå½™ã‚’ä¸¦æ›¿ãˆã¦æ–‡å­—åˆ—<<[16;1H[93m    [m/s>ã‚’å…ˆé ­ã«ä¿ã¤ */
[93m150 [m  qsort(&vocab[1], vocab_size - 1, sizeof(struct vocab_word), VocabCompare);/* vocab[[[18;1H[93m    [m1]ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼Œvocab_size -1ï¼Œ */
[93m151 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m152 [m  size = vocab_size;
[93m153 [m  train_words = 0;
[93m154 [m  for (a = 0; a < size; a++) {
[93m155 [m    // Words occuring less than min_count times will be discarded from the vocab /* mm[24;1H[93m    [min_countä»¥ä¸‹ã®é »åº¦ã®å˜èªã‚’vocabã‹ã‚‰é™¤å¤–ã™ã‚‹ */
[93m156 [m    if ((vocab[a].cn < min_count) && (a != 0)) { /* vocab[a].cnãŒmin_countæœªæº€ã‹ã¤aãŒ [26;1H[93m    [m0ã§ãªã„æ™‚ */
[93m157 [m      vocab_size--; /* vocab_sizeã‹ã‚‰1å¼•ã */
[93m158 [m      free(vocab[a].word); /* vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[29;1H[K[28;11H[?12l[?25hfre[?25le[46m([13C)[28;15H[?12l[?25h[?25l[m([13C)[28;16H[?12l[?25hvoca[?25lb[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h.wor[?25l[28;15H[46m([13C)[?12l[?25h[?25l[m[28;15H([13C)[?12l[?25h; /* [?25l
[1m-- INSERT --[28;36H[?12l[?25h[?25l[m 1vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;36H[?12l[?25h[?25l12vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;37H[?12l[?25h[?25l25vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;38H[?12l[?25h[?25l5è¡Œç›®vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;42H[?12l[?25h[?25lã§vocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;44H[?12l[?25h[?25lç¢ºä¿ã—ãŸvocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[28;52H[?12l[?25h[29;1H[K[28;50H[?25l[?12l[?25h[?25l
/[?12l[?25hvocab[?25l[29;6H[K[29;6H[?12l[?25h[?25l[29;5H[K[29;5H[?12l[?25h[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25hfree@[?25l[29;6H[K[29;6H[?12l[?25h(v[?25l[27m[m[H[2J[1;1H[93m170 [m    vocab[a].code = (char *)calloc(MAX_CODE_LENGTH, sizeof(char));
[93m171 [m    vocab[a].point = (int *)calloc(MAX_CODE_LENGTH, sizeof(int));
[93m172 [m  }
[93m173 [m}
[93m174 
175 [m// Reduces the vocabulary by removing infrequent tokens
[93m176 [mvoid ReduceVocab() {
[93m177 [m  int a, b = 0;
[93m178 [m  unsigned int hash;
[93m179 [m  for (a = 0; a < vocab_size; a++) if (vocab[a].cn > min_reduce) {
[93m180 [m    vocab[b].cn = vocab[a].cn;
[93m181 [m    vocab[b].word = vocab[a].word;
[93m182 [m    b++;
[93m183 [m  } else free(vocab[a].word);
[93m184 [m  vocab_size = b;
[93m185 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1;
[93m186 [m  for (a = 0; a < vocab_size; a++) {
[93m187 [m    // Hash will be re-computed, as it is not actual
[93m188 [m    hash = GetWordHash(vocab[a].word);
[93m189 [m    while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m190 [m    vocab_hash[hash] = a;
[93m191 [m  }
[93m192 [m  fflush(stdout);
[93m193 [m  min_reduce++;
[93m194 [m}
[93m195 
196 [m// Create binary Huffman tree using the word counts /* èªæ•°ã‚’ç”¨ã„ã¦2å€¤Huffmanæœ¨ã‚’ä½œæˆ[28;1H[93m    [m */[14;14H[?12l[?25hfre[?25le[46m([13C)[14;18H[?12l[?25h[?25l[m([13C)[14;19H[?12l[?25hvo[12C[?25l[29;1H[1m-- INSERT --[14;34H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 1 */[?12l[?25h[?25l12 */[?12l[?25h[?25l25 */[?12l[?25h[?25l5è¡Œç›® */[?12l[?25h[?25lã§ */[?12l[?25h[?25lç¢ºä¿ */[?12l[?25h[?25lã—ãŸ */[?12l[?25h[?25lv */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb[ */[?12l[?25h[?25l[1 */[?12l[?25h[?25l[46m[[m1[46m][m */[?12l[?25h[?25l[1 */[14;65H[K[14;62H[?12l[?25h[?25l[ */[14;64H[K[14;61H[?12l[?25h[?25l[a */[?12l[?25h[?25la[ */[?12l[?25h[?25la */[14;65H[K[14;62H[?12l[?25h[?25l[46m[[ma[46m][m */[?12l[?25h[?25l[a]. */[?12l[?25h[?25l.w */[?12l[?25h[?25lwo */[?12l[?25h[?25lor */[?12l[?25h[?25lrd */[?12l[?25h[?25ldã® */[?12l[?25h[?25lãƒ¡ãƒ¢ãƒª */[?12l[?25h[?25lã‚’ */[?12l[?25h[?25lè§£æ”¾ */[?12l[?25h[29;1H[K[14;80H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h [14;80H[?25l[29;1H:.[?12l[?25h1[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25h [14;80H[?25l[29;1H/[?12l[?25h125[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[1;28r[m[1;1H[14L[1;29r[1;1H[93m158 [m      free(vocab[a].word); /* 125è¡Œç›®ã§ç¢ºä¿ã—ãŸvocab[a].wordã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m159 [m    } else {
[93m160 [m      // Hash will be re-computed, as after the sorting it is not actual /* ãƒãƒƒã‚·ãƒ¥[94m>>[m[4;1H[93m    [mã‚’ */
[93m161 [m      hash=GetWordHash(vocab[a].word);
[93m162 [m      while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m163 [m      vocab_hash[hash] = a;
[93m164 [m      train_words += vocab[a].cn;
[93m165 [m    }
[93m166 [m  }
[93m167 [m  vocab = (struct vocab_word *)realloc(vocab, (vocab_size + 1) * sizeof(struct vocab__[12;1H[93m    [mword));
[93m168 [m  // Allocate memory for the binary tree construction
[93m169 [m  for (a = 0; a < vocab_size; a++) {[29;1H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[1;35H[?12l[?25h[2;9H[3;11H[5;11H[?25l[m[29;1H/125[29;5H[K[29;1H[28;38H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h125[?25l[27m[m[H[2J[1;1H[93m116 [m  ReadWord(word, fin); /* å…ˆç¨‹å®šç¾©ã—ãŸReadWordã‚’charå‹ãƒã‚¤ãƒ³ã‚¿wordã¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ff[2;1H[93m    [minã‚’å¼•æ•°ã«è¨ˆç®— */
[93m117 [m  if (feof(fin)) return -1; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚-1ã‚’è¿”ã™ */
[93m118 [m  return SearchVocab(word); /* å˜èªwordã®èªå½™ä¸­ã§ã®ä½ç½®ã‚’è¿”ã™ */
[93m119 [m}
[93m120 
121 [m// Adds a word to the vocabulary /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹ */
[93m122 [mint AddWordToVocab(char *word) { /* charå‹ãƒã‚¤ãƒ³ã‚¿wordã‚’å¼•æ•°ã«æŒã¤intå‹é–¢æ•°AddWordToVV[9;1H[93m    [mocab() */
[93m123 [m  unsigned int hash, length = strlen(word) + 1; /* ç¬¦å·ç„¡intå‹bash, length(wordã®æ–‡å­—[11;1H[93m    [mé•·+1ã‚’ä»£å…¥) */
[93m124 [m  if (length > MAX_STRING) length = MAX_STRING; /* lengthãŒæœ€å¤§æ–‡å­—æ•°ã‚ˆã‚Šå¤§ãã„å ´åˆã¯[13;1H[93m    [mlenghã«æœ€å¤§æ–‡å­—æ•°ã‚’ä»£å…¥ */
[93m125 [m  vocab[vocab_size].word = (char *)calloc(length, sizeof(char)); /* lengthå€‹ã®charã‚µ[94m>>[m[15;1H[93m    [mã‚¤ã‚ºã®ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã—ï¼Œcharå‹ã«ã—ã¦vocab[vocab_size].wordã«ä»£å…¥ */
[93m126 [m  strcpy(vocab[vocab_size].word, word); /* vocab[vocab_size].wordã«wordã‚’ã‚³ãƒ”ãƒ¼ */
[93m127 [m  vocab[vocab_size].cn = 0; /* vocab[vocab_size].cnã«0ã‚’ä»£å…¥ */
[93m128 [m  vocab_size++; /* vocab_sizeã«1ã‚’è¶³ã™ */
[93m129 [m  // Reallocate memory if needed /* å¿…è¦æ™‚ã«ãƒ¡ãƒ¢ãƒªã®å‰²å½“ã‚’å¤‰æ›´ */
[93m130 [m  if (vocab_size + 2 >= vocab_max_size) { /* vocab_size + 2ãŒvocab_max_sizeä»¥ä¸Šã®æ™‚ **[21;1H[93m    [m/
[93m131 [m    vocab_max_size += 1000; /* vocab_max_sizeã«1000ã‚’è¶³ã™ */
[93m132 [m    vocab = (struct vocab_word *)realloc(vocab, vocab_max_size * sizeof(struct vocab__[24;1H[93m    [mword)); /*  */
[93m133 [m  }
[93m134 [m  hash = GetWordHash(word); /* hashã«wordã®hashã‚’ä»£å…¥ */
[93m135 [m  while (vocab_hash[hash] != -1) hash = (hash + 1) % vocab_hash_size;
[93m136 [m  vocab_hash[hash] = vocab_size - 1;[14;7H[?12l[?25h[15;69H[?25l[29;1H[1m-- INSERT --[15;68H[?12l[?25h[?25l[m( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([m1[46m)[m */[?12l[?25h[?25l15[46m)[m */[?12l[?25h[?25l58[46m)[m */[?12l[?25h[?25l8,[46m)[m */[?12l[?25h[?25l, [46m)[m */[?12l[?25h[?25l 1[46m)[m */[?12l[?25h[?25l18[46m)[m */[?12l[?25h[?25l83[46m)[m */[?12l[?25h[?25l3è¡Œç›®[46m)[m */[?12l[?25h[?25lã§[46m)[m */[?12l[?25h[?25lè§£æ”¾[46m)[m */[15;86H[?12l[?25h[29;1H[K[15;84H[?25l[15;67H([18C)[?12l[?25h[?25l[29;1H:[?12l[?25h600[?25l[27m[m[H[2J[1;1H[93m588 [m[9C closev += cent[layer1_size * b + c] * cent[layer1_size * b + c];
[93m589 [m[7C }
[93m590 [m[7C closev = sqrt(closev);
[93m591 [m[7C for (c = 0; c < layer1_size; c++) cent[layer1_size * b + c] /= closev;
[93m592 [m      }
[93m593 [m      for (c = 0; c < vocab_size; c++) {
[93m594 [m[7C closev = -10;
[93m595 [m[7C closeid = 0;
[93m596 [m[7C for (d = 0; d < clcn; d++) {
[93m597 [m[9C x = 0;
[93m598 [m[9C for (b = 0; b < layer1_size; b++) x += cent[layer1_size * d + b] * syn0[c **[12;1H[93m    [m layer1_size + b];
[93m599 [m[9C if (x > closev) {
[93m600 [m[11C closev = x;
[93m601 [m[11C closeid = d;
[93m602 [m[9C }
[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[14;17H[?12l[?25h[15;17H[?25l[13;31H[46m{[16;15H}[?12l[?25h[?25l[9;40H{[m[13;31H{[16;15H}[17;13H[46m}[?12l[?25h[?25l[m[9;40H{[17;13H}[18;15H[46m[[mc[46m][?12l[?25h[?25l[6;44H{[m[18;15H[c][19;11H[46m}[?12l[?25h[?25l[m[6;44H{[19;11H}[20;9H[?12l[?25h[21;17H[22;17H[23;17H[24;17H[25;17H[26;17H[27;17H[28;17H[?25l[1;28r[28;1H
[1;29r[28;1H[93m615 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m619 [m    if (a == argc - 1) {[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m620 [m      printf[46m([m"Argument missing for %s\n", str[46m)[m;[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;17H([32C)
[93m621 [m      exit[46m([m1[46m)[m;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[25;28H[46m{[m[27;15H(1)
[93m622 [m    [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[24;28H{[27;9H}
[93m623 [m    return a;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[22;61H[46m{[m[28;1H[93m624 [m  [46m}[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[20;61H{[26;7H}
[93m625 [m  return -1;
[93m626 [m}[27;16H[?12l[?25h[?25l[18;50H[46m{[28;5H}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[17;50H{[27;5H}
[93m627 [?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m630 [m  if (argc == 1) {[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m632 [m    printf("Options:\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m633 [m    printf("Parameters for training:\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;17H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;17H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;17H[?12l[?25h[26;17H[24;17H[23;17H[22;17H[23;17H[24;17H[26;17H[28;17H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;17H[?12l[?25h[27;17H[25;17H[23;17H[22;17H[21;17H[20;17H[19;17H[18;17H[17;17H[16;17H[15;17H[14;17H[13;17H[12;17H[11;17H[10;17H[9;12H[8;17H[7;5H[6;5H[5;16H[4;7H[3;17H[2;9H[?25l[1;15H[46m([m1[46m)[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m620 [m      printf[46m([m"Argument missing for %s\n", str[46m)[m;[2;15H(1)[1;17H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) {[2;17H([32C)[1;17H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {[28;1H[94m@                                                                                        [1;17H[?12l[?25h[2;17H[?25l[m[3;17H[46m([32C)[3;17H[?12l[?25h[?25l[m([32C)[4;15H[46m([m1[46m)[?12l[?25h[?25l[2;28H{[m[4;15H(1)[5;9H[46m}[?12l[?25h[?25l[m[2;28H{[5;9H}[6;17H[?12l[?25h[?25l[1;61H[46m{[7;7H}[?12l[?25h[?25l[m[1;61H{[7;7H}[8;16H[?12l[?25h[9;5H[10;5H[11;17H[12;12H[13;17H[12;12H[11;17H[10;5H[11;17H[12;12H[13;17H[14;17H[15;17H[16;17H[17;17H[18;17H[19;17H[20;17H[21;17H[22;17H[23;17H[24;17H[25;17H[26;17H[?25l[1;28r[28;1H
[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;17H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;17H[?12l[?25h[26;17H[25;17H[24;17H[22;17H[20;17H[19;17H[18;17H[17;17H[16;17H[15;17H[14;17H[13;17H[12;17H[11;17H[10;17H[?25l[29;1H/[?12l[?25haf[?25l[29;3H[K[29;3H[?12l[?25hrgc[?25l[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;40H[?12l[?25h[?25l[29;1H/argc[15;41H[?12l[?25h[?25l[29;1H[17;46H[?12l[?25h[?25l[29;1H[19;46H[?12l[?25h[?25l[29;1H[21;41H[?12l[?25h[?25l[29;1H[22;42H[?12l[?25h[?25l[29;1H[23;40H[?12l[?25h[?25l[29;1H[25;41H[?12l[?25h[?25l[29;1H[26;42H[?12l[?25h[?25l


[28;42H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;42H[?12l[?25h[?25l

/argc[28;38H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;44H[?12l[?25h[?25l


/argc[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;43H[?12l[?25h[?25l

/argc[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;40H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;45H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;43H[?12l[?25h[?25l
/argc[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[16;23H[?12l[?25h[?25l[29;1H[17;18H[?12l[?25h[?25l[29;1H[26;18H[?12l[?25h[?25l


[28;11H[?12l[?25h[?25l
[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;40H[?12l[?25h[?25l[29;1H/argc[15;41H[?12l[?25h[?25l[29;1H[17;46H[?12l[?25h[?25l[29;1H[19;46H[?12l[?25h[?25l[29;1H[21;41H[?12l[?25h[?25l[29;1H[22;42H[?12l[?25h[?25l[29;1H[23;40H[?12l[?25h[?25l[29;1H[25;41H[?12l[?25h[?25l[29;1H[26;42H[?12l[?25h[?25l


[28;42H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;42H[?12l[?25h[?25l

/argc[28;38H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;44H[?12l[?25h[?25l


/argc[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;43H[?12l[?25h[?25l

/argc[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;40H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;45H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;43H[?12l[?25h[?25l
/argc[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[16;23H[?12l[?25h[?25l[29;1H[17;18H[?12l[?25h[?25l[29;1H?[16;23H[?12l[?25h[?25l[29;1H[14;31H[?12l[?25h[?25l[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[3;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[10;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[13;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [16;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢ [18;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[20;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[23;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([25;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;43H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[?25l[m[29;1H?argc[29;6H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[3;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[10;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[13;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [16;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢ [18;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[20;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[23;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([25;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;43H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[16;23H[?12l[?25h[?25l[29;1H[17;18H[?12l[?25h[?25l[29;1H[26;18H[?12l[?25h[?25l


[28;11H[?12l[?25h[?25l
[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;40H[?12l[?25h[?25l[29;1H/argc[15;41H[?12l[?25h[?25l[29;1H[17;46H[?12l[?25h[?25l[29;1H[19;46H[?12l[?25h[?25l[29;1H[21;41H[?12l[?25h[?25l[29;1H[22;42H[?12l[?25h[?25l[29;1H[23;40H[?12l[?25h[?25l[29;1H[25;41H[?12l[?25h[?25l[29;1H?[23;40H[?12l[?25h[?25l[29;1H[22;42H[?12l[?25h[?25l[29;1H[21;41H[?12l[?25h[?25l[29;1H[19;46H[?12l[?25h[?25l[29;1H[17;46H[?12l[?25h[?25l[29;1H[15;41H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hw[?25l"word2vec.c" 703L, 41202C written[15;41H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ exit
exit

Script done on Mon Oct 26 14:31:41 2015
Script started on Mon Oct 26 14:31:54 2015
bash: /path/to/your/virtualenvwrapper.sh: No such file or directory
[?1034hbash-3.2$ vi word2vec.c 
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 41202C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[28;1H[93m    [mary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h6[?25l[29;2H[K[29;2H[?12l[?25h/[?25l[29;2H[K[29;2H[?12l[?25h [1;5H[?25l[29;1H/[?12l[?25hargc[?25l[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {[14;31H[?12l[?25h[?25l[29;1H/[?12l[?25hARG[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25hrgPos[?25l[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H?ArgPos[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {[14;9H[?12l[?25h[?25l[29;1H/ArgPos[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H/ArgPos[15;16H[?12l[?25h[?25l[29;1H[17;16H[?12l[?25h[?25l[29;1H[19;16H[?12l[?25h[?25l[29;1H[21;16H[?12l[?25h[?25l[29;1H[22;16H[?12l[?25h[?25l[29;1H[23;16H[?12l[?25h[?25l[29;1H[25;16H[?12l[?25h[?25l[29;1H[26;16H[?12l[?25h[?25l


[28;16H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[28;16H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;16H[?12l[?25h[?25l


/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;16H[?12l[?25h[?25l
/ArgPos[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H/ArgPos[29;8H[K[29;1H[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H?ArgPos[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {[14;9H[?12l[?25h[?25l[29;1H/ArgPos[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H/ArgPos[15;16H[?12l[?25h[?25l[29;1H[17;16H[?12l[?25h[?25l[29;1H[19;16H[?12l[?25h[?25l[29;1H[21;16H[?12l[?25h[?25l[29;1H[22;16H[?12l[?25h[?25l[29;1H[23;16H[?12l[?25h[?25l[29;1H[25;16H[?12l[?25h[?25l[29;1H[26;16H[?12l[?25h[?25l


[28;16H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[28;16H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;16H[?12l[?25h[?25l


/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;16H[?12l[?25h[?25l
/ArgPos[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H/ArgPos[29;8H[K[29;1H[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H/ArgPos[15;16H[?12l[?25h[?25l[29;1H[17;16H[?12l[?25h[?25l[29;1H[19;16H[?12l[?25h[?25l[29;1H[21;16H[?12l[?25h[?25l[29;1H[22;16H[?12l[?25h[?25l[29;1H[23;16H[?12l[?25h[?25l[29;1H[25;16H[?12l[?25h[?25l[29;1H[26;16H[?12l[?25h[?25l


[28;16H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[28;16H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;16H[?12l[?25h[?25l


/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;16H[?12l[?25h[?25l
/ArgPos[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H/ArgPos[29;8H[K[29;1H[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H/ArgPos[15;16H[?12l[?25h[?25l[29;1H[17;16H[?12l[?25h[?25l[29;1H[19;16H[?12l[?25h[?25l[29;1H[21;16H[?12l[?25h[?25l[29;1H[22;16H[?12l[?25h[?25l[29;1H[23;16H[?12l[?25h[?25l[29;1H[25;16H[?12l[?25h[?25l[29;1H[26;16H[?12l[?25h[?25l


[28;16H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[28;16H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;16H[?12l[?25h[?25l


/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;16H[?12l[?25h[?25l

/ArgPos[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;16H[?12l[?25h[?25l
/ArgPos[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H/ArgPos[29;8H[K[29;1H[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;16H[?12l[?25h[?25l[29;1H/ArgPos[15;16H[?12l[?25h[?25l[29;1H[17;16H[?12l[?25h[?25l[29;1H[19;16H[?12l[?25h[?25l[29;1H[21;16H[?12l[?25h[?25l[29;1H[22;16H[?12l[?25h[?25l[29;1H[23;16H[?12l[?25h[?25l[29;1H[25;16H[?12l[?25h[?25l[29;1H[26;16H[?12l[?25h[?25l


[28;16H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;16H[?12l[?25h[?25l[1;28r[1;1H[23M[1;29r[6;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[7;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[9;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[12;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [15;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢[17;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[19;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[22;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([24;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}[?12l[?25h[?25l
/[?12l[?25hmain[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");
[38;5;224msearch hit BOTTOM, continuing at TOP[14;9H[?12l[?25h[?25l[m[29;1H?main[29;6H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[14;42H[?12l[?25h[?25l[m[29;1H?main[29;6H[K[29;1H[14;9H[?12l[?25h[?25l[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[14;42H[?12l[?25h[?25l[m[29;1H?main[29;6H[K[29;1H[14;9H[?12l[?25h[?25l[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[14;42H[?12l[?25h[?25l[m[29;1H?main[29;6H[K[29;1H[14;9H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h/[?25l[29;2H[K[29;2H[?12l[?25h [14;9H[?25l[29;1H/[?12l[?25hargg[?25l[29;5H[K[29;5H[?12l[?25hc[?25l[14;18H[?12l[?25h[?25l[29;1H[16;11H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;40H[?12l[?25h[?25l[29;1H/argc[15;41H[?12l[?25h[?25l[29;1H[17;46H[?12l[?25h[?25l[29;1H[19;46H[?12l[?25h[?25l[29;1H[21;41H[?12l[?25h[?25l[29;1H[22;42H[?12l[?25h[?25l[29;1H[23;40H[?12l[?25h[?25l[29;1H[25;41H[?12l[?25h[?25l[29;1H[26;42H[?12l[?25h[?25l


[28;42H[?12l[?25h[?25l
[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[29;1H[K[27;42H[?12l[?25h[?25l

/argc[28;38H[?12l[?25h[?25l
[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[26;44H[?12l[?25h[?25l


/argc[1;28r[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;43H[?12l[?25h[?25l

/argc[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [m[29;1H[K[27;40H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[29;1H[K[27;45H[?12l[?25h[?25l

/argc[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[29;1H[K[28;43H[?12l[?25h[?25l
/argc[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[16;23H[?12l[?25h[?25l[29;1H[17;18H[?12l[?25h[?25l[29;1H[26;18H[?12l[?25h[?25l


[28;11H[?12l[?25h[?25l
[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[5;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[8;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[15;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[16;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[18;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[20;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[22;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[27;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;40H[?12l[?25h[?25l[29;1H?argc[27m[m[H[2J[1;1H[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[14;11H[?12l[?25h[?25l[29;1H?argc[12;18H[?12l[?25h[?25l[29;1H[3;18H[?12l[?25h[?25l[29;1H[2;23H[?12l[?25h[?25l[29;1H[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[28;1H[94m@                                                                                        [m[29;1H[K[1;31H[?12l[?25h[?25l[29;1H?argc[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[3;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[10;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[13;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [16;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢[18;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã« [20;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[23;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f(([25;1H[93m    [mx) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[38;5;224msearch hit TOP, continuing at BOTTOM[14;43H[?12l[?25h[?25l[m[29;1H/argc[29;6H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) {
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§ */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) {
[38;5;224msearch hit BOTTOM, continuing at TOP[14;31H[?12l[?25h[margc, char **arg[?25l[14;15H[46m([32C)[?12l[?25h[?25l[m[14;15H([32C)[?12l[?25h[?25l [46m{[24;5H}[14;50H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[m[29;13H[K[14;51H[?12l[?25h[?25l{/[24;5H}[14;52H[?12l[?25h[?25l[46m{[m[14;51H[K[24;5H[46m}[14;51H[?12l[?25h[?25l[m{[24;5H}[14;52H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h */[?25l[14;57H[K[14;57H[?12l[?25h[?25l[14;56H[K[14;56H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[14;53H[K[14;53H[?12l[?25h[?25l[14;52H[K[14;52H[?12l[?25h[?25l[46m{[24;5H}[14;51H[?12l[?25h[?25l[m{[24;5H}[15;13H[?12l[?25h[?25l[14;50H[46m{[24;5H}[14;51H[?12l[?25h[?25l[m{[24;5H}[15;13H[?12l[?25h[16;51H[?25l[17;28H[46m{[20;9H}[17;29H[?12l[?25h[?25l[m{[18;17H[46m([32C)[m[20;9H}[18;51H[?12l[?25h[?25l[18;17H([32C)[19;19H[?12l[?25h[?25l[17;28H[46m{[20;9H}[?12l[?25h[?25l[m[17;28H{[20;9H}[21;18H[?12l[?25h[?25l[16;61H[46m{[22;7H}[?12l[?25h[?25l[m[16;61H{[22;7H}[23;17H[?12l[?25h[?25l[14;50H[46m{[24;5H}[?12l[?25h[?25l[m[14;50H{[24;5H}[25;5H[?12l[?25h[26;50H[27;13H[26;50H[2C703[2C[2C[2C[2C[?25l( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([ma[46m)[m */[?12l[?25h[?25lar[46m)[m */[?12l[?25h[?25lrg[46m)[m */[?12l[?25h[?25lgc[46m)[m */[?12l[?25h[?25lcã¯[46m)[m */[?12l[?25h[?25lã©ã“ã§[46m)[m */[?12l[?25h[?25lä»£å…¥[46m)[m */[?12l[?25h[?25lã™ã‚‹[46m)[m */[?12l[?25h[?25lï¼Ÿ[46m)[m */[26;86H[?12l[?25h[?25l[26;63H([22C)[27;13H[?12l[?25h[?25l[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m633 [m    printf("Parameters for training:\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf[46m([m"\t\tUse <file> to save the resulting word vectors / word clusters\n"[46m)[m;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;15H([69C)
[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[28;15H[46m([21C)[?12l[?25h[?25l[?12l[?25h[?25l[m[28;15H([21C)[27;37H[?12l[?25h[26;37H[25;37H[24;35H[23;37H[?25l[22;15H[46m([20C)[?12l[?25h[?25l[m[22;15H([20C)[21;37H[?12l[?25h[20;37H[19;37H[29;1H[K[19;34H[?25l[?12l[?25h[18;29H[17;34H[16;22H[15;12H[14;34H[?25l[14;13H[46m([21C)[?12l[?25h[?25l[m[14;13H([21C)[?12l[?25h { /* main[2C[2C[2C703[2C[2C[2C[?25l[2C[46m([22C)[14;63H[?12l[?25h[?25l[m([22C)[14;64H[?12l[?25hargc[2C[2C[2C[2C[2C[?25l[29;1H[1m-- INSERT --[14;65H[?12l[?25h[?25l[m[46m([22C)[14;64H[?12l[?25h[?25l[15;28r[m[15;1H[L[1;29r[14;63H(å¼•æ•°argcã¯ã©ã“ã§ä»£å…¥ã™ã‚‹ï¼Ÿ [15;1H[93m    [m) */[14;68H[?12l[?25hargc[2C[2C[2C[2C[2C[2C[2C[2C[?25l[14;63H[46m([m[25C  [15;1H[93m [m[3C[46m)[?12l[?25h[?25l[14;88H)[m  [15;1H[93m    [m*/[15;7H[K[14;88H[?12l[?25h[?25l[14;28r[28;1H
[1;29r[14;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§[46m([må¼•æ•°argcã¯ã©ã“ã§ä»£å…¥ã™[46m)[m */[28;1H[93m642 [m    printf("\t-sample <float>\n");[14;86H[?12l[?25h[?25l[46m)[m */[14;88H[K[14;84H[?12l[?25h[?25l[46m)[m */[14;86H[K[14;82H[?12l[?25h[?25l[46m)[m */[14;84H[K[14;80H[?12l[?25h[?25l[46m)[m */[14;82H[K[14;78H[?12l[?25h[?25l[46m)[m */[14;80H[K[14;76H[?12l[?25h[?25l[46m)[m */[14;78H[K[14;74H[?12l[?25h[?25lc[46m)[m */[14;76H[K[14;72H[?12l[?25h[?25lcï¼Œ[46m)[m */[?12l[?25h[?25lt[46m)[m */[?12l[?25h[?25lto[46m)[m */[?12l[?25h[?25lt[46m)[m */[14;79H[K[14;75H[?12l[?25h[?25l[46m)[m */[14;78H[K[14;74H[?12l[?25h[?25la[46m)[m */[?12l[?25h[?25lar[46m)[m */[?12l[?25h[?25lrg[46m)[m */[?12l[?25h[?25lgv[46m)[m */[?12l[?25h[?25l[14;63H([14C)[?12l[?25h[?25l*argv) */[14;75H[?12l[?25h[?25l**argv) */[14;76H[?12l[?25harg[?25l[14;63H[46m([16C)[?12l[?25h[?25l[mvã¯[46m)[m */[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;82Hã‚³ãƒãƒ³ãƒ‰[15;1H[93m    [mãƒ©ã‚¤ãƒ³[46m)[m */[?12l[?25h[?25l[14;63H([15;11H)[?12l[?25h[14;88H[?25largcï¼Œ**argvã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©[15;5Hã‚¤ãƒ³) */[15;13H[K[14;66H[?12l[?25h[?25l[46m([margcï¼Œ**argvã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤[15;5Hãƒ³[46m)[m */[15;11H[K[14;64H[?12l[?25h[?25largcï¼Œ**argvã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤[94m>>[m[15;1H[93m [m[5C)[14;63H[?12l[?25h[?25l[46m([margcï¼Œ**argvã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤[15;7H[46m)[14;64H[?12l[?25h[?25l[m([15;7H)[14;65H[?12l[?25hrg[13;5H[14;67Hcc[?25lc:ï¼Œ**argvã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©[94m>>[m[15;1H[93m [m[3Cã‚¤ãƒ³) */[14;69H[?12l[?25h[?25l:å¼•æ•°ã®ï¼Œ**argvã¯ã‚³ãƒ[94m>>[m[15;1H[93m [m[3Cãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³) */[14;75H[?12l[?25h[?25lç·å€‹æ•°ï¼Œ**argv[94m>>[m[15;1H[93m [m[3Cã¯ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³) */[14;81H[?12l[?25h[2C**arg[15;5H[2C[2C[2C[2C[2C[2C[2C[?25l[14;63H[46m([m[25C[94m>>[m[15;1H[93m [m[19C[46m)[?12l[?25h[?25l)[?12l[?25h[?25l[?12l[?25h[?25l)[m */[15;23H[K[15;19H[?12l[?25h[?25l[46m)[m */[15;21H[K[15;17H[?12l[?25h[?25l[46m)[m */[15;19H[K[15;15H[?12l[?25h[?25l[46m)[m */[15;17H[K[15;13H[?12l[?25h[?25l[46m)[m */[15;15H[K[15;11H[?12l[?25h[?25l[46m)[m */[15;13H[K[15;9H[?12l[?25h[?25l[46m)[m */[15;11H[K[15;7H[?12l[?25h[?25l[14;88Hv[46m))[m[15;1H[93m    [m */[15;9H[K[14;89H[?12l[?25h[?25l[46m))[m[15;1H[93m    [?12l[?25h[?25l[14;89H[?12l[?25h[?25l[mvaa[15;1H[93m    [m[46m)[m */[?12l[?25h[?25l[14;88Hv[46m))[m[15;1H[93m    [m */[15;8H[K[14;89H[?12l[?25h[?25l[46m))[m[15;1H[93m    [?12l[?25h[?25l[m[14;63H([25C))[15;1H[93m    [m: */[?12l[?25h[?25l[14;63H[46m([25C))[m[15;1H[93m    [m */[15;8H[K[15;5H[?12l[?25h[?25l[14;63H([24Cv  [15;1H[93m    [m*/[15;7H[K[14;89H[?12l[?25h[?25lg **[15;1H[93m    [m/[15;6H[K[14;88H[?12l[?25h [?25l[14;28r[28;1H
[1;29r[14;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:å¼•æ•°ã®ç·å€‹æ•°ï¼Œ**ar */[28;1H[93m642 [m    printf("\t-sample <float>\n");[14;87H[?12l[?25h[?25la */[14;89H[K[14;86H[?12l[?25h[?25lar */[14;87H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;86Hrg **[15;1H[93m    [m/[14;88H[?12l[?25h[?25lgv  [15;1H[93m    [m*/[14;89H[?12l[?25h[?25lv::[15;1H[93m    [m */[?12l[?25h[?25l  */[?12l[?25h[?25l å¼•æ•°ã® */[?12l[?25h[?25læ–‡å­—åˆ— */[?12l[?25h[?25lã‚’ */[?12l[?25h[?25lã•ã™ */[?12l[?25h[?25l */[15;25H[K[15;22H[?12l[?25h[?25l */[15;23H[K[15;20H[?12l[?25h[?25læŒ‡ã™ */[?12l[?25h[?25lãƒã‚¤ãƒ³ã‚¿ã® */[?12l[?25h[?25lé…åˆ— */[?12l[?25h[16;13H[?25l[17;23H[?12l[?25h[18;61H[19;30H[20;46H[21;37H[20;46H[19;30H[18;61H[?25l[17;23H[?12l[?25h[16;13H[15;38H[13;5H[15;38H[14;89H[2C[2C[?25lã‚æ•°ã®ç·å€‹æ•°ï¼Œ**argg[15;1H[93m    [mv: å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;73H[?12l[?25h[?25læ•°ã®ç·å€‹æ•°ï¼Œ**argv::[15;1H[93m    [m å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[15;41H[K[14;71H[?12l[?25h[?25l:æ•°ã®ç·å€‹æ•°ï¼Œ**argv: [94m>>[m[15;1H[93m    [må¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[15;40H[K[14;69H[?12l[?25h[?25l:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³æ•°ã®ç·[94m>>[m[15;1H[93m [m[3Cå€‹[2Cï¼Œ**argv: å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;83H[?12l[?25h[?25lå¼•ãæ•°[94m>>[m[15;1H[93m    [mã®ç·å€‹æ•°ï¼Œ**argv: å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;87H[?12l[?25h[?25læ•°ã®[94m>>[m[15;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[15;56H[K[14;85H[?12l[?25h[2C[15;5H[2C[2C[2C[2C**argv: [2C[2C[?25l ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[15;35H[?12l[?25h[16;13H[?25l[17;23H[?12l[?25h[18;61H[19;30H[20;46H[21;37H[22;70H[23;38H[24;87H[25;35H[26;66H[27;37H[28;73H[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[27;33H[26;14H[24;35H[22;39H[21;73H[20;37H[19;66H[18;35H[17;87H[16;38H[15;70H[14;37H[13;46H[12;30H[11;61H[?25l[10;23H[?12l[?25h[11;61H[12;30H[13;46H[14;37H[15;70H[16;38H[17;87H[18;35H[19;66H[20;37H[21;73H[22;39H[24;35H[26;14H[27;33H[28;75H[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;66H[?12l[?25h[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;20H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[28;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[28;35H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  }[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[28;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1])[28;1H[94m@                                                                                        [28;5H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[28;1H[93m    [m;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[28;1H[93m    [mgv[i + 1]);[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[27;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[27;16H[?12l[?25h[29;5H[?25l[1;28r[28;1H
[1;29r[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[?12l[?25h[28;5H[26;16H[24;16H[22;6H[21;5H[19;30H[18;30H[17;26H[?25l[16;8H[?12l[?25h[15;18H[14;35H[12;33H[11;20H[9;35H[8;20H[6;42H[5;64H[4;42H[3;88H[2;37H[1;86H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[2;1H[93m    [mes is 0 (vectors are written)\n");[28;1H[94m@                                                                                        [2;35H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[2;1H[93m    [m05 for CBOW\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[28;1H[94m@                                                                                        [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[2;1H[93m    [m 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([2;1H[93m    [m0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                        [1;75H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[2;1H[93m    [me-5)\n");[28;1H[94m@                                                                                        [2;14H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [2;1H[93m    [mfrequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;46H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) {[28;1H[94m@                                                                                        [1;23H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;35H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[?12l[?25h[?25l[2;6H[?12l[?25h[3;5H[5;35H[6;13H[?25l[7;23H[?12l[?25h[?25l{a[?12l[?25h[?25l[7;23H[K[7;23H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ */[?12l[?25h[?25lå¼•æ•° */[?12l[?25h[?25lãŒ */[?12l[?25h[?25l1 */[?12l[?25h[?25l1å€‹ã® */[?12l[?25h[?25læ™‚ */[?12l[?25h[29;1H[K[7;29H[?25l[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[6;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[9;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[12;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[19;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[20;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[22;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[24;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[12;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) [46m{[m /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[14;22H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[6;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[9;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[12;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[19;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[20;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[22;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[24;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;[14;7H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) {
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1);
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[12;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) [46m{[m /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[14;22H[?12l[?25h[?25l{[?12l[?25h /* [2C[2C[2C[2C[2C[2C[2C[2C[2C[2C1[2C[2C[2C[?25l[29;1H[1m-- INSERT --[14;55H[?12l[?25h[?25l[mï¼Œ */[?12l[?25h[?25l6 */[?12l[?25h[?25l67 */[?12l[?25h[?25l72 */[?12l[?25h[?25l2è¡Œç›® */[?12l[?25h[?25lã¾ã§ */[?12l[?25h[29;1H[K[14;63H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h672[?25l[27m[m[H[2J[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");
[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[6;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[9;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[12;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  }
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[19;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[20;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[22;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[24;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;[14;7H[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;8H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l**[?12l[?25h[?25l*/[?12l[?25h[?25l* */[?12l[?25h[?25l  */[?12l[?25h [?25l 6 */[?12l[?25h[?25l63 */[?12l[?25h[?25l30 */[?12l[?25h[?25l0è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ã® */[?12l[?25h[?25li */[?12l[?25h[?25lif */[?12l[?25h[?25lfçµ‚ã‚ã‚Š */[?12l[?25hf[?25lfæ–‡çµ‚ã‚ã‚Š */[14;29H[?12l[?25h[29;1H[K[14;27H[?25l[?12l[?25h[15;9H[16;9H[15;9H[14;9H[13;9H[11;9H[13;9H[14;9H[15;9H[16;9H[17;9H[18;9H[19;9H[21;9H[23;9H[25;9H[26;9H[27;9H[28;9H[?25l[1;28r[28;1H
[1;29r[28;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[28;9H[?12l[?25h[27;9H[26;9H[25;9H[24;9H[22;9H[20;9H[18;9H[17;9H[?25l [46m([45C)[17;10H[?12l[?25h[?25l[m([46m([39C)[m > 0)[17;11H[?12l[?25h[?25l([39C)[18;11H[46m([40C)[m[36C))[19;1H[93m [18;11H[?12l[?25h[?25l[m([40C)[36C))[19;1H[93m [m[20;11H[46m([45C)[m[31Crr[21;1H[93m [20;11H[?12l[?25h[?25l[m([45C)[31Crr[21;1H[93m [m[22;11H[46m([45C)[m[31Crr[23;1H[93m [22;11H[?12l[?25h[?25l[m([45C)[31Crr[23;1H[93m [m[24;11H[46m([40C)[24;11H[?12l[?25h[?25l[m([40C)[25;11H[46m([41C)[25;11H[?12l[?25h[?25l[m([41C)[26;11H[46m([39C)[26;11H[?12l[?25h[?25l[m([39C)[27;11H[?12l[?25h[?25l[28;11H[46m([40C)[28;11H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;11H([40C)
[93m685 [m  if ([46m([mi = ArgPos((char *)"-output", argc, argv)[46m)[m > 0) strcpy(output_file, argv[i + 11[28;1H[93m    [m]);[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[26;11H([41C)[35C11[27;1H[93m 
686 [m  if ([46m([mi = ArgPos((char *)"-window", argc, argv)[46m)[m > 0) window = atoi(argv[i + 1]);[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;11H([41C)
[93m687 [m  if ([46m([mi = ArgPos((char *)"-sample", argc, argv)[46m)[m > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[27;11H[?12l[?25h[?25l([41C)[28;11H[46m([37C)[28;11H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[25;11H([37C)
[93m689 [m  if ([46m([mi = ArgPos((char *)"-negative", argc, argv)[46m)[m > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [26;11H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[25;11H([43C)[33C))[26;1H[93m 
690 [m  if ([46m([mi = ArgPos((char *)"-threads", argc, argv)[46m)[m > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[25;11H([42C)[34C11[26;1H[93m 
691 [m  if ([46m([mi = ArgPos((char *)"-iter", argc, argv)[46m)[m > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [27;11H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[26;11H([39C)
[93m692 [m  if ([46m([mi = ArgPos((char *)"-min-count", argc, argv)[46m)[m > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[26;11H([44C)[32C11[27;1H[93m 
693 [m  if ([46m([mi = ArgPos((char *)"-classes", argc, argv)[46m)[m > 0) classes = atoi(argv[i + 1]);[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;11H([42C)
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [28;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢[28;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[28;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m697 [m  for [46m([mi = 0; i < EXP_TABLE_SIZE; i++[46m)[m {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute th[28;1H[94m@                                                                                        [27;11H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[25;11H([30C)
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[27;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f([28;1H[94m@                                                                                        [26;11H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);                   // Precompute f(([28;1H[93m    [mx) = x / (x + 1)[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[23;44H[46m{[m[28;1H[93m700 [m  [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[22;44H{[27;7H}
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m702 [m  return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m703 [m}[?12l[?25h[27;11H[26;11H[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[23;11H[?12l[?25h[21;11H[?25l[20;11H[46m([30C)[20;11H[?12l[?25h[?25l[m([30C)[21;11H[?12l[?25h[23;11H[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[26;11H[?12l[?25h[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[23;11H[?12l[?25h[21;11H[?25l[20;11H[46m([30C)[20;11H[?12l[?25h[?25l[m([30C)[18;11H[?12l[?25h[16;11H[14;11H[?25l[13;11H[46m([42C)[13;11H[?12l[?25h[?25l[11;11H([44C)[m[32C11[12;1H[93m [m[13;11H([42C)[11;11H[?12l[?25h[?25l[10;11H[46m([39C)[m[11;11H([44C)[32C11[12;1H[93m [10;11H[?12l[?25h[?25l[m[8;11H[46m([42C)[m[34C11[9;1H[93m [m[10;11H([39C)[8;11H[?12l[?25h[?25l[6;11H[46m([43C)[m[33C))[7;1H[93m [m[8;11H([42C)[34C11[9;1H[93m [6;11H[?12l[?25h[?25l[m[5;11H[46m([37C)[m[6;11H([43C)[33C))[7;1H[93m [5;11H[?12l[?25h[?25l[m[4;11H[46m([41C)[m[5;11H([37C)[4;11H[?12l[?25h[?25l[3;11H[46m([41C)[m[4;11H([41C)[3;11H[?12l[?25h[?25l[1;11H[46m([41C)[m[35C11[2;1H[93m [m[3;11H([41C)[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m684 [m  if ([46m([mi = ArgPos((char *)"-alpha", argc, argv)[46m)[m > 0) alpha = atof(argv[i + 1]);[2;11H([41C)[35C11[3;1H[93m [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m683 [m  if (cbow) alpha = 0.05;[2;11H([40C)[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m682 [m  if ([46m([mi = ArgPos((char *)"-cbow", argc, argv)[46m)[m > 0) cbow = atoi(argv[i + 1]);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m681 [m  if ([46m([mi = ArgPos((char *)"-binary", argc, argv)[46m)[m > 0) binary = atoi(argv[i + 1]);[2;11H([39C)[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m680 [m  if ([46m([mi = ArgPos((char *)"-debug", argc, argv)[46m)[m > 0) debug_mode = atoi(argv[i + 1]);[2;11H([41C)[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m679 [m  if ([46m([mi = ArgPos((char *)"-read-vocab", argc, argv)[46m)[m > 0) strcpy(read_vocab_file, arr[2;1H[93m    [mgv[i + 1]);[3;11H([40C)[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m678 [m  if ([46m([mi = ArgPos((char *)"-save-vocab", argc, argv)[46m)[m > 0) strcpy(save_vocab_file, arr[2;1H[93m    [mgv[i + 1]);[3;11H([45C)[31Crr[4;1H[93m [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m677 [m  if ([46m([mi = ArgPos((char *)"-train", argc, argv)[46m)[m > 0) strcpy(train_file, argv[i + 1]))[2;1H[93m    [m;[3;11H([45C)[31Crr[4;1H[93m [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m676 [m  if ([46m([mi = ArgPos((char *)"-size", argc, argv)[46m)[m > 0) layer1_size = atoi(argv[i + 1]);[2;11H([40C)[36C))[3;1H[93m [m[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m675 [m  read_vocab_file[0] = 0;[2;11H([39C)[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m674 [m  save_vocab_file[0] = 0;[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m673 [m  output_file[0] = 0;[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m671 [m    return 0;[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[2;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m669 [m    printf("\nExamples:\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[2;1H[93m    [mram model)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m667 [m    printf("\t-cbow <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[2;1H[93m    [mining data\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[2;1H[93m    [mes is 0 (vectors are written)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[2;1H[93m    [m05 for CBOW\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[2;1H[93m    [m 5\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([2;1H[93m    [m0 = not used)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[2;1H[93m    [me-5)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [2;1H[93m    [mfrequency in the training data\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m623 [m    return a;[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m621 [m      exit(1);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) {[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m618 [m  for [46m([ma = 1; a < argc; a++[46m)[m if (!strcmp(str, argv[a])) {[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[2;11H([20C)[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[1;11H[?12l[?25h[2;11H[3;5H[4;11H[5;11H[?25l[6;11H[46m([20C)[6;11H[?12l[?25h[?25l[m([20C)[7;11H[?12l[?25h[8;11H[9;11H[?25l[7;28H[46m{[10;9H}[?12l[?25h[?25l[m[7;28H{[10;9H}[11;11H[?12l[?25h[?25l[6;61H[46m{[12;7H}[?12l[?25h[?25l[m[6;61H{[12;7H}[13;11H[?12l[?25h[?25l[4;50H[46m{[14;5H}[?12l[?25h[?25l[m[4;50H{[14;5H}[13;11H[?12l[?25h[?25l[6;61H[46m{[12;7H}[?12l[?25h[?25l[m[6;61H{[12;7H}[11;11H[?12l[?25h[?25l[7;28H[46m{[10;9H}[?12l[?25h[?25l[m[7;28H{[10;9H}[11;11H[?12l[?25h[?25l[6;61H[46m{[12;7H}[?12l[?25h[?25l[m[6;61H{[12;7H}[13;11H[?12l[?25h[?25l[4;50H[46m{[14;5H}[?12l[?25h[?25l[m[4;50H{[14;5H}[15;5H[?12l[?25h[16;11H[18;11H[19;11H[20;11H[21;11H[22;11H[23;11H[24;11H[25;11H[26;11H[27;11H[28;11H[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;11H[?12l[?25h[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;11H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;11H[?12l[?25h[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[27;11H[?12l[?25h[26;11H[24;11H[23;11H[22;11H[21;11H[20;11H[19;11H[18;11H[17;11H[15;11H[14;11H[12;11H[11;11H[9;11H[8;11H[7;11H[6;11H[5;11H[4;11H[2;11H[1;11H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[2;1H[93m    [me-5)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [2;1H[93m    [mfrequency in the training data\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[2;5H[3;11H[5;11H[6;11H[7;11H[8;11H[9;11H[10;11H[11;11H[12;11H[13;11H[14;11H[15;11H[16;11H[17;11H[18;11H[19;11H[21;11H[23;11H[24;11H[25;11H[26;11H[28;11H[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;11H[?12l[?25h[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;11H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;11H[?12l[?25h[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[28;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ([46m([mi = ArgPos((char *)"-size", argc, argv)[46m)[m > 0) layer1_size = atoi(argv[i + 1]);[28;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1])[28;1H[94m@                                                                                        [27;11H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[26;11H([39C)
[93m677 [m  if ([46m([mi = ArgPos((char *)"-train", argc, argv)[46m)[m > 0) strcpy(train_file, argv[i + 1]))[28;1H[93m    [m;[27;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[25;11H([40C)[36C))[26;1H[93m 
678 [m  if ([46m([mi = ArgPos((char *)"-save-vocab", argc, argv)[46m)[m > 0) strcpy(save_vocab_file, arr[28;1H[93m    [mgv[i + 1]);[27;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[24;11H([45C)[31Crr[25;1H[93m 
679 [m  if ([46m([mi = ArgPos((char *)"-read-vocab", argc, argv)[46m)[m > 0) strcpy(read_vocab_file, arr[27;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;11H[?12l[?25h[?25l([45C)[31Crr[27;1H[93m [m[28;11H[46m([40C)[28;11H[?12l[?25h[?25l[26;11H([45C)[m[31Crr[27;1H[93m [m[28;11H([40C)[26;11H[?12l[?25h[?25l([45C)[31Crr[27;1H[93m [m[28;11H[46m([40C)[28;11H[?12l[?25h[?25l[26;11H([45C)[m[31Crr[27;1H[93m [m[28;11H([40C)[26;11H[?12l[?25h[?25l[24;11H[46m([45C)[m[31Crr[25;1H[93m [m[26;11H([45C)[31Crr[27;1H[93m [24;11H[?12l[?25h[?25l[m[22;11H[46m([40C)[m[36C))[23;1H[93m [m[24;11H([45C)[31Crr[25;1H[93m [22;11H[?12l[?25h[?25l[m[21;11H[46m([39C)[m[22;11H([40C)[36C))[23;1H[93m [21;11H[?12l[?25h[?25l[m([39C)[20;11H[?12l[?25h[19;11H[18;11H[17;11H[16;11H[14;11H[13;11H[11;11H[10;11H[8;11H[7;11H[6;11H[5;11H[4;11H[3;11H[2;11H[1;11H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[2;1H[93m    [mes is 0 (vectors are written)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[2;1H[93m    [m05 for CBOW\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[2;1H[93m    [m 5\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([2;1H[93m    [m0 = not used)\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[2;1H[93m    [me-5)\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [2;1H[93m    [mfrequency in the training data\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m623 [m    return a;[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m621 [m      exit(1);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) {[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m618 [m  for [46m([ma = 1; a < argc; a++[46m)[m if (!strcmp(str, argv[a])) {[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[2;11H([20C)[28;1H[94m@                                                                                        [1;11H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) {[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);[1;11H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m607 [m    // Save the K-means classes[1;11H[?12l[?25h[2;11H[3;11H[4;11H[5;11H[6;11H[7;11H[8;11H[9;5H[10;11H[11;11H[10;11HgPo[?25ls[46m([32C)[10;15H[?12l[?25h[?25l[m([32C)[10;16H[?12l[?25hch[11;12H[12;18H[13;18H[14;18H[15;18H[?25l[13;28H[46m{[16;9H}[?12l[?25h[?25l[m[13;28H{[16;9H}[17;17H[?12l[?25h[?25l[12;61H[46m{[18;7H}[?12l[?25h[?25l[m[12;61H{[18;7H}[19;16H[?12l[?25h[?25l[10;50H[46m{[20;5H}[?12l[?25h[?25l[m[10;50H{[20;5H}[21;5H[?12l[?25h[22;18H[24;12H[25;18H[26;18H[27;18H[28;18H[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [28;1H[93m    [mfrequency in the training data\n");[27;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[28;1H[93m    [me-5)\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;18H[?12l[?25h[28;18H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;18H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;18H[?12l[?25h[28;18H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[28;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[28;17H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[46m[[m0[46m][m = 0;[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;18H[0]
[93m674 [m  save_vocab_file[0] = 0;[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[28;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1])[28;1H[94m@                                                                                        [27;18H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[28;1H[93m    [m;[27;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[28;1H[93m    [mgv[i + 1]);[27;18H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[27;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;18H[?12l[?25h[28;18H[?25l[1;28r[28;1H
[1;29r[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m683 [m  if (cbow) alpha = 0.05;[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[28;1H[93m    [m]);[27;18H[?12l[?25h[26;18H[25;18H[24;18H[23;18H[22;18H[20;18H[18;18H[16;18H[15;18H[14;18H[13;18H[?25l[12;18H[46m[[m0[46m][?12l[?25h[?25l[m[0][11;17H[?12l[?25h[10;17H[8;18H[7;18H[5;18H[4;18H[?25l[29;1H/[?12l[?25houtput_file[?25l[12;7H[?12l[?25h[?25l[29;1H?[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[15;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[19;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][23;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[24;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[25;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[27;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[14;41H[?12l[?25h[?25l[29;1H/output_file[27m[m[H[2J[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[5;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[8;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[11;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[18;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[19;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[21;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[23;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[25;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[14;7H[?12l[?25h[?25l[29;1H?output_file[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[15;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[19;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][23;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[24;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[25;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[27;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[14;41H[?12l[?25h[?25l[29;1H/output_file[27m[m[H[2J[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[5;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[8;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[11;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[18;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[19;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[21;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[23;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[25;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[14;7H[?12l[?25h[13;7H[12;7H[10;7H[9;7H[7;7H[6;7H[4;7H[3;7H[2;7H[1;7H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[2;1H[93m    [mes is 0 (vectors are written)\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[2;1H[93m    [m05 for CBOW\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[2;1H[93m    [m 5\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([2;1H[93m    [m0 = not used)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0, 11[2;1H[93m    [me-5)\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher  [2;1H[93m    [mfrequency in the training data\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[94m>>[m[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[28;1H[94m@                                                                                        [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m623 [m    return a;[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[2;7H[3;7H[4;7H[5;5H[6;5H[7;7H[9;7H[10;7H[11;7H[12;7H[13;7H[14;7H[15;7H[16;7H[17;7H[18;7H[19;7H[20;7H[21;7H[22;7H[23;7H[25;7H[27;7H[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10 (([28;1H[93m    [m0 = not used)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default iss[28;1H[93m    [m 5\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 0..[28;1H[93m    [m05 for CBOW\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of classs[28;1H[93m    [mes is 0 (vectors are written)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tra[28;1H[94m@                                                                                        [27;7H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[27;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[28;1H[93m    [mram model)\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[28;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[28;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1])[28;1H[94m@                                                                                        [27;7H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[28;1H[93m    [m;[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[28;1H[93m    [mgv[i + 1]);[27;7H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[27;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[26;7H[?12l[?25h[28;7H[?25l[1;28r[28;1H
[1;29r[28;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m683 [m  if (cbow) alpha = 0.05;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[28;1H[93m    [m]);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[27;7H[?12l[?25h[28;7H[?25l
/output_file[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[2;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[11;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[15;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[17;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[19;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[21;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[24;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [26;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[28;1H[93m    [mearning rate) */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;34H[?12l[?25h[?25l[m[29;1H?output_file[29;13H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[3;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[4;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[6;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[8;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[10;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[15;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[20;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[22;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[25;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [28;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[38;5;224msearch hit TOP, continuing at BOTTOM[14;67H[?12l[?25h[?25l[m[29;1H?output_file[29;13H[K[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;[29;1H[K[1;7H[?12l[?25h[?25l[29;1H/output_file[16;67H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabull[2;1H[93m    [mary
[93m 28 
 29 [mtypedef float real;[19C // Precision of float numbers
[93m 30 
 31 [m/* æ§‹é€ ä½“å‹struct vocab_wordã‚’å®£è¨€ */
[93m 32 [mstruct vocab_word {
[93m 33 [m  long long cn; /* long longå‹(64 bitç¬¦å·ä»˜æ•´æ•°å‹) cn */
[93m 34 [m  int *point; /* intå‹ãƒã‚¤ãƒ³ã‚¿pointã‚’å®£è¨€ */
[93m 35 [m  char *word, *code, codelen; /* charå‹(1 byteæ–‡å­—å‹)codelenã¨ãƒã‚¤ãƒ³ã‚¿wordï¼Œcodeã‚’å®£[94m>>[m[11;1H[93m    [mè¨€ */
[93m 36 [m}; /* ã“ã®æ®µéšã§å¤‰æ•°ç„¡ã— */
[93m 37 
 38 [mchar train_file[MAX_STRING], output_file[MAX_STRING]; /* æœ€å¤§æ–‡å­—æ•°MAX_STRINGã‚’å¼•æ•°ã«[15;1H[93m    [mæŒã¤charå‹(1 byteæ–‡å­—å‹)train_fileã¨output_fileã‚’å®£è¨€ */
[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[17;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[19;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[21;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[24;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [26;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[28;1H[93m    [mearning rate) */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;34H[?12l[?25h[?25l[m[29;1H?output_file[29;13H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[3;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[4;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[6;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[8;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[10;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[15;1H[93m    [m]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[20;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[22;1H[93m    [m]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[25;1H[93m    [m]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [28;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[38;5;224msearch hit TOP, continuing at BOTTOM[14;67H[?12l[?25h[?25l[m[29;1H?output_file[29;13H[K[29;1H[1;28r[1;1H[2L[1;29r[1;1H[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;[29;1H[K[1;7H[?12l[?25h[?25l[29;1H?output_file[27m[m[H[2J[1;1H[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (vv[10;1H[93m    [moid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThreaa[11;1H[93m    [mdã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a]ãŒ[13;1H[93m    [mçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ613[94m>>[m[15;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */
[93m561 [m    // Save the word vectors
[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_sii[19;1H[93m    [mzeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */
[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */
[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */
[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + b]][23;1H[93m    [m, sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layer1__[24;1H[93m    [msizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼ã‚¿[94m>>[m[25;1H[93m    [mã‚’æ›¸è¾¼ã¿ */
[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizee[27;1H[93m    [m + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[14;41H[?12l[?25h[?25l[29;1H/output_file[27m[m[H[2J[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the traa[5;1H[93m    [mining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip-gg[8;1H[93m    [mram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 1ee[11;1H[93m    [m-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]);[18;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]))[19;1H[93m    [m;
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, arr[21;1H[93m    [mgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, arr[23;1H[93m    [mgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]);[25;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);[14;7H[?12l[?25h[15;7H[16;7H[17;7H[18;7H[20;7H[22;7H[24;7H[25;7H[26;7H[27;7H[28;7H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i + 11[28;1H[93m    [m]);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);[27;7H[?12l[?25h[28;7H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]))[27;1H[93m    [m;
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 1[28;1H[94m@                                                                                        [26;7H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i + 11[28;1H[93m    [m]);[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 1[28;1H[94m@                                                                                        [27;7H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i + 11[28;1H[93m    [m]);[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[28;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*  [28;1H[93m    [mvocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡ãƒ¢[28;1H[93m    [mãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„ã«[28;1H[93m    [mãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[27;7H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute th[28;1H[94m@                                                                                        [27;7H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute thh[27;1H[93m    [me exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f([28;1H[94m@                                                                                        [26;7H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);                   // Precompute f(([28;1H[93m    [mx) = x / (x + 1)[27;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[23;44H[46m{[m[28;1H[93m700 [m  [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[22;44H{[27;7H}
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m702 [m  return 0;[28;7H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m703 [m}[?12l[?25h[27;7H[26;7H[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[25;7H}[23;7H[?12l[?25h[21;7H[20;7Hfor[?25l [46m([30C)[20;11H[?12l[?25h[?25l[m([30C)[20;12H[?12l[?25hi = 0; i < EXP_TABLE_SIZE; i+[?25l[20;11H[46m([30C)[?12l[?25h[?25l[m[20;11H([30C)[?12l[?25h[?25l [46m{[25;7H}[20;44H[?12l[?25h[?25l[m{[25;7H}[21;44H[?12l[?25h[?25l[20;44H[46m{[25;7H}[20;44H[?12l[?25h[?25l[m{[25;7H}[20;43H[?12l[?25h[?25l[20;11H[46m([30C)[?12l[?25h[?25l[m[20;11H([30C)[?12l[?25h[?25l[21;32H[46m([mreal[46m)[m[51Chh[22;1H[93m [21;32H[?12l[?25h[?25l[m(real)[51Chh[22;1H[93m [21;33H[?12l[?25h[mrea[?25l[46m([mreal[46m)[m[51Chh[22;1H[93m [21;37H[?12l[?25h[?25l[m(real)[51Chh[22;1H[93m [21;38H[?12l[?25h[mEXP_TABLE_SIZE * 2 - [?25l[21;27H[46m([32C)[m[28Chh[22;1H[93m [21;60H[?12l[?25h[?25l[m[21;27H([32C)[28Chh[22;1H[93m [21;61H[?12l[?25h[m * MAX_EX[?25l[29;1H/[?12l[?25hexpTable[?25l[23;9H[?12l[?25h[?25l[29;1H[23;23H[?12l[?25h[?25l[29;1H[23;38H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;
[38;5;224msearch hit BOTTOM, continuing at TOP[14;35H[?12l[?25h[?25l[m[29;1H/expTable[29;10H[K[29;1H[27m[m[H[2J[1;1H[93m432 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] += syn0[c + last_word * layer1_sizee[2;1H[93m    [m];
[93m433 [m[7C cw++;
[93m434 [m      }
[93m435 [m      if (cw) {
[93m436 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] /= cw;
[93m437 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) {
[93m438 [m[9C f = 0;
[93m439 [m[9C l2 = vocab[word].point[d] * layer1_size;
[93m440 [m[9C // Propagate hidden -> output
[93m441 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1[c + l2];
[93m442 [m[9C if (f <= -MAX_EXP) continue;
[93m443 [m[9C else if (f >= MAX_EXP) continue;
[93m444 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))];
[93m445 [m[9C // 'g' is the gradient multiplied by the learning rate
[93m446 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m447 [m[9C // Propagate errors output -> hidden
[93m448 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m449 [m[9C // Learn weights hidden -> output
[93m450 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * neu1[c];
[93m451 [m[7C }
[93m452 [m[7C // NEGATIVE SAMPLING
[93m453 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) {
[93m454 [m[9C if (d == 0) {
[93m455 [m[11C target = word;
[93m456 [m[11C label = 1;
[93m457 [m[9C } else {
[93m458 [m[11C next_random = next_random * (unsigned long long)25214903917 + 11;[14;24H[?12l[?25h[13;24H[12;24H[11;24H[10;24H[9;24H[8;20H[7;24H[6;24H[5;19H[4;11H[3;17H[1;24H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m431 [m[7C if (last_word == -1) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m430 [m[7C last_word = sen[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m429 [m[7C if (c >= sentence_length) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m428 [m[7C if (c < 0) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m427 [m[7C c = sentence_position - window + a;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m425 [m      cw = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m424 [m      // in -> hidden[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›® [2;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[2;1H[93m    [m */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[2;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m418 [m    if (word == -1) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ•[2;1H[93m    [mã‚¡ã‚¤ãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[3;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m413 [m      sentence_length = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m412 [m      last_word_count = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m411 [m      word_count = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m408 [m      word_count_actual += word_count - last_word_count;[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ[2;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[2;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[4L[1;29r[1;1H[93m403 [m[7C if (sentence_length >= MAX_SENTENCE_LENGTH) break; /* sentence_lengthãŒMAX_SEE[2;1H[93m    [mNTENCE_LENGTH == 1000ã«é”ã—ãŸæ™‚389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º (i.e. é…åˆ—senã¯MAX_SENN[3;1H[93m    [mTENCE_LENGTH + 1å€‹ã®è¦ç´ ãŒæœ‰ã‚‹ã®ã§ï¼Œsenã®å„è¦ç´ ã«wordã‚’ä»£å…¥ã—çµ‚ã‚ã£ãŸã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’æŠœ [4;1H[93m    [mã‘ã‚‹) */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m402 [m[7C sentence_length++; /* ã“ã“ã§sentence_lengthãŒå¢—ãˆã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m401 [m[7C sen[sentence_length] = word; /* é…åˆ—senã®å„è¦ç´ ã«wordã‚’ä»£å…¥ */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[2;24H[3;24H[7;24H[8;24H[10;23H[11;24H[13;24H[14;24H[15;24H[16;24H[17;24H[18;24H[19;24H[22;24H[23;23H[24;24H[25;24H[26;24H[27;24H[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[28;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */[27;24H[?12l[?25h[?25l[1;28r[1;1H[5M[1;29r[24;1H[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã† [25;1H[93m    [m */
[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›®[27;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */
[93m424 [m      // in -> hidden[24;24H[?12l[?25h[26;24H[28;24H[?25l[1;28r[28;1H
[1;29r[28;1H[93m425 [m      cw = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {
[93m427 [m[7C c = sentence_position - window + a;[27;24H[?12l[?25h[?25l

/expTable[27m[m[H[2J[1;1H[93m432 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] += syn0[c + last_word * layer1_sizee[2;1H[93m    [m];
[93m433 [m[7C cw++;
[93m434 [m      }
[93m435 [m      if (cw) {
[93m436 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] /= cw;
[93m437 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) {
[93m438 [m[9C f = 0;
[93m439 [m[9C l2 = vocab[word].point[d] * layer1_size;
[93m440 [m[9C // Propagate hidden -> output
[93m441 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1[c + l2];
[93m442 [m[9C if (f <= -MAX_EXP) continue;
[93m443 [m[9C else if (f >= MAX_EXP) continue;
[93m444 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))];
[93m445 [m[9C // 'g' is the gradient multiplied by the learning rate
[93m446 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m447 [m[9C // Propagate errors output -> hidden
[93m448 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m449 [m[9C // Learn weights hidden -> output
[93m450 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * neu1[c];
[93m451 [m[7C }
[93m452 [m[7C // NEGATIVE SAMPLING
[93m453 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) {
[93m454 [m[9C if (d == 0) {
[93m455 [m[11C target = word;
[93m456 [m[11C label = 1;
[93m457 [m[9C } else {
[93m458 [m[11C next_random = next_random * (unsigned long long)25214903917 + 11;[14;24H[?12l[?25h[?25l[29;1H?expTable[27m[m[H[2J[1;1H[93m 39 [mchar save_vocab_file[MAX_STRING], read_vocab_file[MAX_STRING]; /* charå‹save_vocab_fii[2;1H[93m    [mleã¨read_vocab_fileã‚’å®£è¨€ */
[93m 40 [mstruct vocab_word *vocab; /* æ§‹é€ ä½“å‹struct vocab_wordã§ãƒã‚¤ãƒ³ã‚¿vocab(ã“ã‚Œã¯å¤‰æ•°ã ã‹[94m>>[m[4;1H[93m    [mã‚‰vocab.cn, vocab.point, vocab.word, vocab.code, vocab.codelenã‚’æŒã¤)ã‚’å®£è¨€ */
[93m 41 [mint binary = 0, cbow = 1, debug_mode = 2, window = 5, min_count = 5, num_threads = 122[6;1H[93m    [m, min_reduce = 1; /* ã‚¹ãƒ¬ãƒƒãƒ‰æ•°num_threads = 12ï¼Œbinary = 0ã¯565è¡Œç›®ã§ä½¿ç”¨ */
[93m 42 [mint *vocab_hash; /* intå‹ãƒã‚¤ãƒ³ã‚¿vocab_hash(SearchVocab()ã§ä½¿ç”¨) */
[93m 43 [mlong long vocab_max_size = 1000, vocab_size = 0, layer1_size = 100; /* long longå‹vocc[9;1H[93m    [mab_max_size, vocab_sizeã¨layer1_sizeã‚’å®£è¨€ */
[93m 44 [mlong long train_words = 0, word_count_actual = 0, iter = 5, file_size = 0, classes =  [11;1H[93m    [m0; /* 560è¡Œç›®ã§classesã‚’ä½¿ç”¨) */
[93m 45 [mreal alpha = 0.025, starting_alpha, sample = 1e-3; /* 655, 656è¡Œç›®ã‚ˆã‚Šalphaã¯å­¦ç¿’æ¯”(ll[13;1H[93m    [mearning rate) */
[93m 46 [mreal *syn0, *syn1, *syn1neg, *expTable; /* realå‹ãƒã‚¤ãƒ³ã‚¿ */
[93m 47 [mclock_t start;
[93m 48 
 49 [mint hs = 0, negative = 5; /* hsã¯344è¡Œç›®ï¼Œnegativeã¯350è¡Œç›®ã§åˆå‡º */
[93m 50 [mconst int table_size = 1e8;
[93m 51 [mint *table; /* intå‹ãƒã‚¤ãƒ³ã‚¿table */
[93m 52 [m/* voidå‹(å€¤ã‚’è¿”ã•ãªã„é–¢æ•°)InitUnigramTable()â†ã‹ãªã‚Šå¾Œã«å‡ºã¦ãã‚‹ */
[93m 53 [mvoid InitUnigramTable() {
[93m 54 [m  int a, i;
[93m 55 [m  double train_words_pow = 0;
[93m 56 [m  double d1, power = 0.75;
[93m 57 [m  table = (int *)malloc(table_size * sizeof(int)); /* table_size * sizeof(int)åˆ†ã®ãƒ¡[94m>>[m[26;1H[93m    [mãƒ¢ãƒªã‚’å‹•çš„ã«å‰²ã‚Šå½“ã¦(ã“ã®ãƒ¡ãƒ¢ãƒªã¯ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m 58 [m  for (a = 0; a < vocab_size; a++) train_words_pow += pow(vocab[a].cn, power);
[93m 59 [m  i = 0;[14;35H[?12l[?25h[?25l[29;1H/expTable[27m[m[H[2J[1;1H[93m432 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] += syn0[c + last_word * layer1_sizee[2;1H[93m    [m];
[93m433 [m[7C cw++;
[93m434 [m      }
[93m435 [m      if (cw) {
[93m436 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] /= cw;
[93m437 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) {
[93m438 [m[9C f = 0;
[93m439 [m[9C l2 = vocab[word].point[d] * layer1_size;
[93m440 [m[9C // Propagate hidden -> output
[93m441 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1[c + l2];
[93m442 [m[9C if (f <= -MAX_EXP) continue;
[93m443 [m[9C else if (f >= MAX_EXP) continue;
[93m444 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))];
[93m445 [m[9C // 'g' is the gradient multiplied by the learning rate
[93m446 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m447 [m[9C // Propagate errors output -> hidden
[93m448 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m449 [m[9C // Learn weights hidden -> output
[93m450 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * neu1[c];
[93m451 [m[7C }
[93m452 [m[7C // NEGATIVE SAMPLING
[93m453 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) {
[93m454 [m[9C if (d == 0) {
[93m455 [m[11C target = word;
[93m456 [m[11C label = 1;
[93m457 [m[9C } else {
[93m458 [m[11C next_random = next_random * (unsigned long long)25214903917 + 11;[14;24H[?12l[?25h[?25l[29;1H/expTable[1;28r[1;1H[12M[1;29r[17;1H[93m459 [m[11C target = table[(next_random >> 16) % table_size];
[93m460 [m[11C if (target == 0) target = next_random % (vocab_size - 1) + 1;
[93m461 [m[11C if (target == word) continue;
[93m462 [m[11C label = 0;
[93m463 [m[9C }
[93m464 [m[9C l2 = target * layer1_size;
[93m465 [m[9C f = 0;
[93m466 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1neg[c + l2];
[93m467 [m[9C if (f > MAX_EXP) g = (label - 1) * alpha;
[93m468 [m[9C else if (f < -MAX_EXP) g = (label - 0) * alpha;
[93m469 [m[9C else g = (label - expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP  [28;1H[93m    [m/ 2))]) * alpha;[29;1H[K[27;33H[?12l[?25h[?25l

/expTable[27m[m[H[2J[1;1H[93m491 [m[7C for (c = 0; c < layer1_size; c++) neu1e[c] = 0;
[93m492 [m[7C // HIERARCHICAL SOFTMAX /* éšå±¤çš„ã‚½ãƒ•ãƒˆãƒãƒƒã‚¯ã‚¹ */
[93m493 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) { /* 507è¡Œç›®ã¾ã§(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ[4;1H[93m    [mã ã¨hs == 0ã ã‹ã‚‰å‹•ã‹ãªã„ï¼) */
[93m494 [m[9C f = 0; /* realå‹å¤‰æ•°f(368è¡Œç›®ã§å®£è¨€æ¸ˆ)ã«0ã‚’ä»£å…¥ */
[93m495 [m[9C l2 = vocab[word].point[d] * layer1_size;
[93m496 [m[9C // Propagate hidden -> output /* hiddenã‹ã‚‰outputã«åæ˜  */
[93m497 [m[9C for (c = 0; c < layer1_size; c++) f += syn0[c + l1] * syn1[c + l2];
[93m498 [m[9C if (f <= -MAX_EXP) continue; /* f <= -MAX_EXP(== -6, 23è¡Œç›®)ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­[94m>>[m[10;1H[93m    [mãƒƒãƒ— */
[93m499 [m[9C else if (f >= MAX_EXP) continue; /* f >= MAX_EXP(== 6, 23è¡Œç›®)ã®æ™‚å‡¦ç†ã‚’ã‚¹[94m>>[m[12;1H[93m    [mã‚­ãƒƒãƒ— */
[93m500 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))]; //[14;1H[93m    [m* -MAX_EXP < f < MAX_EXPã®æ™‚ fã«expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX__[15;1H[93m    [mEXP / 2))]ã‚’ä»£å…¥ */
[93m501 [m[9C // 'g' is the gradient multiplied by the learning rate /* 'g'ã¯å‹¾é…ã¨å­¦ç¿’æ¯” [17;1H[93m    [mã®ç© */
[93m502 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;
[93m503 [m[9C // Propagate errors output -> hidden /* ã‚¨ãƒ©ãƒ¼ã‚’outputã‹ã‚‰hiddenã«åæ˜  */
[93m504 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];
[93m505 [m[9C // Learn weights hidden -> output /* é‡ã¿ã‚’å­¦ç¿’ã—ã¦hidenã‹ã‚‰ */
[93m506 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * syn0[c + l1];
[93m507 [m[7C } /* 493è¡Œç›®ã‹ã‚‰ */
[93m508 [m[7C // NEGATIVE SAMPLING /* ãƒã‚¬ãƒ†ã‚£ãƒ–ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° */
[93m509 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) { /* 528è¡Œç›®ã¾ã§(ãƒ‡ãƒ•ã‚©[94m>>[m[26;1H[93m    [mãƒ«ãƒˆã ã¨negative == 5ã ã‹ã‚‰ã“ã£ã¡ãŒå‹•ã) */
[93m510 [m[9C if (d == 0) { /* ãƒ«ãƒ¼ãƒ—ã®æœ€åˆã ã‘ */
[93m511 [m[11C target = word;[13;24H[?12l[?25h[11;24H[9;24H[8;24H[7;24H[6;24H[5;24H[3;24H[2;24H[1;24H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m490 [m[7C l1 = last_word * layer1_size; /* 366è¡Œç›®ã§å®šç¾©ã—ãŸl1ã«last_word * layer1_sizee[2;1H[93m    [mã‚’ä»£å…¥ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m489 [m[7C if (last_word == -1) continue; /* last_word == -1ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ— */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m488 [m[7C last_word = sen[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m487 [m[7C if (c >= sentence_length) continue; /* c >= sentence_lengthã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ— [2;1H[93m    [mã—ã¦485è¡Œç›®ã«æˆ»ã‚‹(384è¡Œç›®ã‚ˆã‚Šå½“åˆã¯sentence_lengh == 0) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m486 [m[7C if (c < 0) continue; /* c < 0ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦485è¡Œç›®ã«æˆ»ã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m485 [m[7C c = sentence_position - window + a; /* 41è¡Œç›®ã‚ˆã‚Šwindow == 5 */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m484 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) { /* 531è¡Œç›®ã¾ã§ï¼Œ(422[2;1H[93m    [m2è¡Œç›®ã‚ˆã‚Š next_random % window =) b <= a < window *2 + 1 -bã®é–“ã§ï¼Œa != windowã®æ™‚ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m483 [m    } else {  //train skip-gram /* skip-gramã®å­¦ç¿’(41è¡Œç›®ã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ[94m>>[m[2;1H[93m    [mã ã¨å‹•ã‹ãªã„ï¼)ï¼Œ532è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m482 [m      }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m481 [m[7C }[27;1H[94m@                                                                                        [28;1H@                                                                                        [1;13H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m480 [m[9C for (c = 0; c < layer1_size; c++) syn0[c + last_word * layer1_size] += neu11[2;1H[93m    [me[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m479 [m[9C if (last_word == -1) continue;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m478 [m[9C last_word = sen[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m477 [m[9C if (c >= sentence_length) continue;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m476 [m[9C if [46m([mc < 0[46m)[m continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m475 [m[9C c = sentence_position - window + a;[2;18H(c < 0)[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m474 [m[7C for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m473 [m[7C // hidden -> in[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m472 [m[7C }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m471 [m[9C for (c = 0; c < layer1_size; c++) syn1neg[c + l2] += g * neu1[c];[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m470 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1neg[c + l2];[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m469 [m[9C else g = [46m([mlabel - expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP  [2;1H[93m    [m/ 2))][46m)[m * alpha;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m468 [m[9C else if (f < -MAX_EXP) g = (label - 0) * alpha;[2;24H([64C  [3;1H[93m [m[9C)[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m467 [m[9C if (f > MAX_EXP) g = (label - 1) * alpha;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m466 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1neg[c + l2];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m465 [m[9C f = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m464 [m[9C l2 = target * layer1_size;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m463 [m[9C }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m462 [m[11C label = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m461 [m[11C if (target == word) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m460 [m[11C if (target == 0) target = next_random % (vocab_size - 1) + 1;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m459 [m[11C target = table[(next_random >> 16) % table_size];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m458 [m[11C next_random = next_random * (unsigned long long)25214903917 + 11;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m457 [m[9C } else [46m{[7;15H}[1;22H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m456 [m[11C label = 1;[2;22H{[8;15H}[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m455 [m[11C target = word;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m454 [m[9C if (d == 0) {[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m453 [m[7C if (negative > 0) for (d = 0; d < negative + 1; d++) {[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m452 [m[7C // NEGATIVE SAMPLING[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m451 [m[7C }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m450 [m[9C for (c = 0; c < layer1_size; c++) syn1[c + l2] += g * neu1[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m449 [m[9C // Learn weights hidden -> output[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m448 [m[9C for (c = 0; c < layer1_size; c++) neu1e[c] += g * syn1[c + l2];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m447 [m[9C // Propagate errors output -> hidden[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m446 [m[9C g = (1 - vocab[word].code[d] - f) * alpha;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m445 [m[9C // 'g' is the gradient multiplied by the learning rate[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m444 [m[9C else f = expTable[(int)((f + MAX_EXP) * (EXP_TABLE_SIZE / MAX_EXP / 2))];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m443 [m[9C else if (f >= MAX_EXP) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m442 [m[9C if (f <= -MAX_EXP) continue;[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m441 [m[9C for (c = 0; c < layer1_size; c++) f += neu1[c] * syn1[c + l2];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m440 [m[9C // Propagate hidden -> output[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m439 [m[9C l2 = vocab[word].point[d] * layer1_size;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m438 [m[9C f = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m437 [m[7C if (hs) for (d = 0; d < vocab[word].codelen; d++) {[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m436 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] /= cw;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m435 [m      if (cw) {[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m434 [m      }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m433 [m[7C cw++;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m432 [m[7C for (c = 0; c < layer1_size; c++) neu1[c] += syn0[c + last_word * layer1_sizee[2;1H[93m    [m];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m431 [m[7C if (last_word == -1) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m430 [m[7C last_word = sen[c];[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m429 [m[7C if (c >= sentence_length) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m428 [m[7C if (c < 0) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m427 [m[7C c = sentence_position - window + a;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m426 [m      for (a = b; a < window * 2 + 1 - b; a++) if (a != window) {[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m425 [m      cw = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m424 [m      // in -> hidden[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m423 [m    if (cbow) {  //train the cbow architecture /* é€£ç¶šå˜èªé›†åˆãƒ¢ãƒ‡ãƒ«CBOWã®å­¦ç¿’(41è¡Œç›® [2;1H[93m    [mã‹ã‚‰cbow == 1ã‚ˆã‚Šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã“ã‚ŒãŒå‹•ã)ã“ã“ã‹ã‚‰482è¡Œç›®ã¾ã§èª­ã¿é£›ã°ã™ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m422 [m    b = next_random % window; /* 41è¡Œç›®ã‚ˆã‚Šwindow = 5, ã“ã®bã¯483è¡Œç›®ä»¥é™ã®elseã§ä½¿ã†[2;1H[93m    [m */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m421 [m    next_random = next_random * (unsigned long long)25214903917 + 11; /* ç·šå½¢åˆåŒæ³•ã§[2;1H[93m    [mä¹±æ•°next_randomã‚’ç”Ÿæˆ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m420 [m    for (c = 0; c < layer1_size; c++) neu1e[c] = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m419 [m    for (c = 0; c < layer1_size; c++) neu1[c] = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m418 [m    if (word == -1) continue;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m417 [m    word = sen[sentence_position]; /* æœ€åˆã¯word = sen[0] */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m416 [m    } /* 407è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m415 [m      continue; /* ä»¥ä¸‹ã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦375è¡Œç›®ã«ä¸€æ°—ã«æˆ»ã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m414 [m      fseek(fi, file_size / (long long)num_threads * (long long)id, SEEK_SET);  /* ãƒ• [2;1H[93m    [mã‚¡ã‚¤ãƒ«fiã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_SETã‚’åŸºæº–ã«file_size / (long long)num_threads * (ll[3;1H[93m    [mong long)idãƒã‚¤ãƒˆç§»å‹• */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m413 [m      sentence_length = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m412 [m      last_word_count = 0;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m411 [m      word_count = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m410 [m      if (local_iter == 0) break; /* ã“ã“ã§374è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡ºï¼ */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m409 [m      local_iter--; /* local_iterã‚’1ã¤æ¸›ã‚‰ã™(366è¡Œç›®ã‚ˆã‚Šå½“åˆã¯local_iter == 5) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m408 [m      word_count_actual += word_count - last_word_count;[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m407 [m    if (feof(fi) || (word_count > train_words / num_threads)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒ [2;1H[93m    [mçµ‚ç«¯ã«é”ã—ãŸè‹¥ãã¯word_countãŒtrain_words / num_threadsã‚ˆã‚Šå¤šã„å ´åˆ(416è¡Œç›®ã¾ã§) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m406 [m    } /* 388è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m405 [m      sentence_position = 0; /* 364è¡Œç›®ã§long long sentence_position = 0ã¨ç½®ã„ã¦ã„ã‚‹[94m>>[m[2;1H[93m    [mãŒï¼Œã“ã“ã§ã‚‚æ”¹ã‚ã¦ä»£å…¥(533è¡Œç›®ã®sentence_position++ã¯ã“ã“ã«éŸ¿ãï¼Ÿ) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m404 [m      } /*  389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã“ã“ã¾ã§ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[4L[1;29r[1;1H[93m403 [m[7C if (sentence_length >= MAX_SENTENCE_LENGTH) break; /* sentence_lengthãŒMAX_SEE[2;1H[93m    [mNTENCE_LENGTH == 1000ã«é”ã—ãŸæ™‚389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º (i.e. é…åˆ—senã¯MAX_SENN[3;1H[93m    [mTENCE_LENGTH + 1å€‹ã®è¦ç´ ãŒæœ‰ã‚‹ã®ã§ï¼Œsenã®å„è¦ç´ ã«wordã‚’ä»£å…¥ã—çµ‚ã‚ã£ãŸã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’æŠœ[4;1H[93m    [mã‘ã‚‹) */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m402 [m[7C sentence_length++; /* ã“ã“ã§sentence_lengthãŒå¢—ãˆã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m401 [m[7C sen[sentence_length] = word; /* é…åˆ—senã®å„è¦ç´ ã«wordã‚’ä»£å…¥ */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m400 [m[7C } /* 396è¡Œç›®ã‹ã‚‰ã®ifæ–‡ã“ã“ã¾ã§ */[1;23H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m399 [m[9C if (ran < (next_random & 0xFFFF) / (real)65536) continue; /* ran < (next_raa[2;1H[93m    [mndom & 0xFFFF) / (real)65536 ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦390è¡Œç›®ã«æˆ»ã‚‹ */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m398 [m[9C next_random = next_random * (unsigned long long)25214903917 + 11;[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m397 [m[9C real ran = (sqrt(vocab[word].cn / (sample * train_words)) + 1) * (sample *  [2;1H[93m    [mtrain_words) / vocab[word].cn;[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m396 [m[7C if (sample > 0) { /* sample > 0 ã®æ™‚(400è¡Œç›®ã¾ã§) */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m395 [m[7C // The subsampling randomly discards frequent words while keeping the rankingg[2;1H[93m    [m same[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m394 [m[7C if (word == 0) break; /* 389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m393 [m[7C word_count++;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m392 [m[7C if (word == -1) continue; /* word == -1ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ— */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m391 [m[7C if (feof[46m([mfi[46m)[m) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼[2;1H[93m    [mãƒ—ã‹ã‚‰è„±å‡º */[1;24H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m390 [m[7C word = ReadWordIndex(fi); /* 114è¡Œç›®ã§å®šç¾©ã®å˜èªã‚’èª­å–ã‚Šï¼Œèªå½™ä¸­ã§ã®å˜èªã®ç•ª[94m>>[m[2;1H[93m    [må·ã‚’è¿”ã™ReadWordIndex */[3;21H(fi)[1;24H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m389 [m      while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ—(404è¡Œç›®ã¾ã§) */[28;1H[94m@                                                                                        [1;24H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m388 [m    if (sentence_length == 0) { /* ifæ–‡(406è¡Œç›®ã¾ã§),364è¡Œç›®ã‚ˆã‚Šå½“åˆã¯sentence_lengthh[2;1H[93m    [m == 0ã ãŒ389è¡Œç›®ã‹ã‚‰ã®ç„¡é™ãƒ«ãƒ¼ãƒ—ã§æœ€çµ‚çš„ã«sentence_lengthãŒ1000ã«ãªã‚‹ */[1;24H[?12l[?25h[?25l[29;1H:[?12l[?25hw[?25l"word2vec.c" 703L, 41431C written[1;24H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ exit
exit

Script done on Mon Oct 26 15:44:44 2015
Script started on Mon Oct 26 15:47:33 2015
bash: /path/to/your/virtualenvwrapper.sh: No such file or directory
[?1034hbash-3.2$ vi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 41431C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h263[?25l[27m[m[H[2J[1;1H[93m250 [m    }
[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€[28;1H[94m@                                                                                       [14;5H[?12l[?25h[mvoid LearnVocabFromTrainFil[?25le[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h [?25l[27m[m[H[2J[1;1H[93m285 [m      a = AddWordToVocab(word);
[93m286 [m      vocab[a].cn = 1;
[93m287 [m    } else vocab[i].cn++;
[93m288 [m    if (vocab_size > vocab_hash_size * 0.7) ReduceVocab();
[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocabb[7;1H[93m    [m() */
[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[21;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m250 [m    }
[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() [46m{[m /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€[28;1H[94m@                                                                                       [14;36H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m285 [m      a = AddWordToVocab(word);
[93m286 [m      vocab[a].cn = 1;
[93m287 [m    } else vocab[i].cn++;
[93m288 [m    if (vocab_size > vocab_hash_size * 0.7) ReduceVocab();
[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocabb[7;1H[93m    [m() */
[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[21;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m250 [m    }
[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() [46m{[m /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€[28;1H[94m@                                                                                       [14;36H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m285 [m      a = AddWordToVocab(word);
[93m286 [m      vocab[a].cn = 1;
[93m287 [m    } else vocab[i].cn++;
[93m288 [m    if (vocab_size > vocab_hash_size * 0.7) ReduceVocab();
[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocabb[7;1H[93m    [m() */
[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[21;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m250 [m    }
[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() [46m{[m /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€[28;1H[94m@                                                                                       [14;36H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m285 [m      a = AddWordToVocab(word);
[93m286 [m      vocab[a].cn = 1;
[93m287 [m    } else vocab[i].cn++;
[93m288 [m    if (vocab_size > vocab_hash_size * 0.7) ReduceVocab();
[93m289 [m  }
[93m290 [m  SortVocab(); /* 146è¡Œç›®ã§å®šç¾©ã—ãŸèªå½™ã‚’å˜èªæ•°ã‚’ç”¨ã„ã¦é »åº¦é †ã«ä¸¦æ›¿ãˆã‚‹é–¢æ•°SortVocabb[7;1H[93m    [m() */
[93m291 [m  if (debug_mode > 0) {
[93m292 [m    printf("Vocab size: %lld\n", vocab_size);
[93m293 [m    printf("Words in train file: %lld\n", train_words);
[93m294 [m  }
[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m}
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[21;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];[14;5H[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;6H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h [?25l 2 */[?12l[?25h[?25l26 */[?12l[?25h[?25l63 */[?12l[?25h[?25l3è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ã® */[?12l[?25h[?25lL */[?12l[?25h[?25lLe */[?12l[?25h[?25ler */[?12l[?25h[?25lra */[?12l[?25h[?25lan */[?12l[?25h[?25la */[14;30H[K[14;27H[?12l[?25h[?25lr */[14;29H[K[14;26H[?12l[?25h[?25le */[14;28H[K[14;25H[?12l[?25h[?25lea */[?12l[?25h[?25lan */[?12l[?25h[?25la */[14;29H[K[14;26H[?12l[?25h[?25lar */[?12l[?25h[?25lrn */[?12l[?25h[?25lnV */[?12l[?25h[?25lVo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lbF */[?12l[?25h[?25lFr */[?12l[?25h[?25lro */[?12l[?25h[?25lom */[?12l[?25h[?25lmT */[?12l[?25h[?25lTr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[?25lnF */[?12l[?25h[?25lFi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leçµ‚ã‚ã‚Š */[?12l[?25h[29;1H[K[14;50H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h263[?25l[27m[m[H[2J[1;1H[93m250 [m    }
[93m251 [m    vocab[a].codelen = i;
[93m252 [m    vocab[a].point[0] = vocab_size - 2;
[93m253 [m    for (b = 0; b < i; b++) {
[93m254 [m      vocab[a].code[i - b - 1] = code[b];
[93m255 [m      vocab[a].point[i - b] = point[b] - vocab_size;
[93m256 [m    }
[93m257 [m  }
[93m258 [m  free(count); /* countåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m259 [m  free(binary); /* binaryåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m260 [m  free(parent_node); /* parent_nodeåˆ†ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m261 [m}
[93m262 
263 [mvoid LearnVocabFromTrainFile() { /* voidå‹é–¢æ•°LearnVocabFromTrainFile() */
[93m264 [m  char word[MAX_STRING];
[93m265 [m  FILE *fin; /* FILEå‹ãƒã‚¤ãƒ³ã‚¿fin */
[93m266 [m  long long a, i; /* long longå‹å¤‰æ•°a, i */
[93m267 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚vocab_hash[a]ã«-1ã‚’ä»£å…¥ */
[93m268 [m  fin = fopen(train_file, "rb"); /* train_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡ºå°‚ç”¨ã§é–‹ã */
[93m269 [m  if (fin == NULL) { /* ãƒã‚¤ãƒ³ã‚¿finãŒNULLã®æ™‚ */
[93m270 [m    printf("ERROR: training data file not found!\n");
[93m271 [m    exit(1);
[93m272 [m  }
[93m273 [m  vocab_size = 0;
[93m274 [m  AddWordToVocab((char *)"</s>"); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */
[93m275 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m276 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•°ã§train_fileã®å˜èªã‚’èª­ã¿è¾¼ã‚€[28;1H[94m@                                                                                       [14;5H[?12l[?25h[mvoid LearnVocabFromTrainFil[?25le[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h { /* void[2C[2C[2CLearnVocabFromTrainFil[?25le[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;77H[?12l[?25h[?25l[m[46m()[?12l[?25h[?25l[m()ï¼Œ */[?12l[?25h[?25l2 */[?12l[?25h[?25l29 */[?12l[?25h[?25l97 */[?12l[?25h[?25l7è¡Œç›® */[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;85Hã¾ã§[15;1H[93m    [m */[?12l[?25h[16;29H[17;41H[18;48H[20;5H[21;86H[22;53H[23;58H[29;1H[K[23;57H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hstrcpy[?25l[27m[m[H[2J[1;1H[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[3;1H[93m    [mgram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[6;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[13;1H[93m    [m;
[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][15;1H[93m    [m);
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[17;1H[93m    [mrgv[i + 1]);
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[19;1H[93m    [mrgv[i + 1]);
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[21;1H[93m    [m;
[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [27;1H[93m    [m1]);
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);[14;59H[?12l[?25h[15;6H[?25l[29;1H[1m-- INSERT --[15;7H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*?[?12l[?25h?[?25l[15;13H[K[15;13H[?12l[?25h[?25l*/[?12l[?25h [?25l t */[?12l[?25h[?25ltr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[?25ln_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã« */[?12l[?25h[?25la */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv@ */[?12l[?25h[?25l@i */[?12l[?25h[?25l@ */[15;31H[K[15;28H[?12l[?25h[?25lv */[15;30H[K[15;27H[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[15;27H[i + 1]ã‚’ */[?12l[?25h[?25lã‚³ãƒ”ãƒ¼ */[?12l[?25h[17;17H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h [?25l s */[?12l[?25h[?25lsa */[?12l[?25h[?25lav */[?12l[?25h[?25lve */[?12l[?25h[?25le_ */[?12l[?25h[?25l_v */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã« */[?12l[?25h[?25la */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[17;42H[i + 1]ã‚’ */[?12l[?25h[?25lã‚³ãƒ”ãƒ¼ */[?12l[?25h[19;17H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l  */[?12l[?25h[?25l r */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25ld_ */[?12l[?25h[?25l_v */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã« */[?12l[?25h[?25la */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv@ */[?12l[?25h[?25lv */[19;45H[K[19;42H[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l+1 */[?12l[?25h[?25l+ */[19;49H[K[19;46H[?12l[?25h[?25l  */[?12l[?25h[?25l[46m[[mi + [46m][m */[?12l[?25h[?25l[i +  */[19;50H[K[19;47H[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[19;42H[i + 1]ã‚’ */[?12l[?25h[?25lã‚³ãƒ”ãƒ¼ */[?12l[?25h[29;1H[K[19;55H[?25l[?12l[?25h[?25l[29;1H/strcpy[26;60H[?12l[?25h[27;8H[?25l

[1m-- INSERT --[27;9H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l o */[?12l[?25h[?25lou */[?12l[?25h[?25lut */[?12l[?25h[?25ltp */[?12l[?25h[?25lpu */[?12l[?25h[?25lut */[?12l[?25h[?25lt_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25leã« */[?12l[?25h[?25la */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l+1 */[?12l[?25h[?25l+ */[27;37H[K[27;34H[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;30H[i + 1]ã‚’ */[?12l[?25h[?25lã‚³ãƒ”ãƒ¼ */[?12l[?25h[29;1H[K[27;43H[?25l[?12l[?25h[?25l

/strcpy[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m 73 [m  int a = 0, ch; /* intå‹aã¨ch */
[93m 74 [m  while (!feof(fin)) { /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finãŒãƒ•ã‚¡ã‚¤ãƒ«ã®çµ‚ç«¯ã«é”ã—ãŸæ™‚ã«ãƒ«ãƒ¼ãƒ—çµ‚äº†  [3;1H[93m    [m*/
[93m 75 [m    ch = fgetc(fin); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰1æ–‡å­—èª­è¾¼ã‚“ã§intå‹ã§è¿”ã™ */
[93m 76 [m    if (ch == 13) continue; /* ch == 13ã®æ™‚å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ— */
[93m 77 [m    if ((ch == ' ') || (ch == '\t') || (ch == '\n')) {/* ç©ºç™½ãƒ»ã‚¿ãƒ–ãƒ»æ”¹è¡ŒãŒã‚ã‚‹å ´åˆ  [7;1H[93m    [m*/
[93m 78 [m      if (a > 0) { /* æœ€åˆã¯æ¡ä»¶ã‚’æº€ãŸã•ãªã„ */
[93m 79 [m[7C if (ch == '\n') ungetc(ch, fin); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã«1æ–‡å­—è¿”å´ã—chã‚’è¿”ã™[10;1H[93m    [m */
[93m 80 [m[7C break;
[93m 81 [m      }
[93m 82 [m      if (ch == '\n') { /* æ”¹è¡ŒãŒæœ‰ã‚‹å ´åˆ */
[93m 83 [m[7C strcpy(word, (char *)"</s>"); /* é…åˆ—wordã«æ–‡å­—åˆ—"</s>"ã‚’ã‚³ãƒ”ãƒ¼ */
[93m 84 [m[7C return;
[93m 85 [m      } else continue; /* æ”¹è¡ŒãŒç„¡ã„å ´åˆå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ— */
[93m 86 [m    }
[93m 87 [m    word[a] = ch; /* é…åˆ—wordã®aç•ªç›®ã«intå‹chã‚’ä»£å…¥ */
[93m 88 [m    a++;
[93m 89 [m    if (a >= MAX_STRING - 1) a--;   // Truncate too long words /* é•·ã™ãã‚‹å˜èªã‚’å‰Šé™¤[21;1H[93m    [m */
[93m 90 [m  }
[93m 91 [m  word[a] = 0;
[93m 92 [m}
[93m 93 
 94 [m// Returns hash value of a word /* å˜èªã®hashå€¤ã‚’è¿”ã™ */
[93m 95 [mint GetWordHash(char *word) { /* charå‹ãƒã‚¤ãƒ³ã‚¿wordã‚’å¼•æ•°ã«æŒã¤intå‹é–¢æ•°GetWordHash  [28;1H[93m    [m*/
[38;5;224msearch hit BOTTOM, continuing at TOP[14;13H[?12l[?25h[?25l[m[29;1H?strcpy[29;8H[K[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[27m[m[H[2J[1;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][2;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[4;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[6;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[8;1H[93m    [m;
[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]);
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]);
[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]);
[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [14;1H[93m    [m1]); /* output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]);
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]);
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]);
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]][19;1H[93m    [m);
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [21;1H[93m    [m1]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [24;1H[93m    [m1]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[26;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[27;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>[28;1H@                                                                                       [m[29;1H[38;5;224msearch hit TOP, continuing at BOTTOM[13;60H[?12l[?25h[?25l[m[29;1H[K[29;1H/[?12l[?25hatoi[?25l[15;69H[?12l[?25h[?25l[29;1H[17;61H[?12l[?25h[?25l[29;1H[18;73H[?12l[?25h[?25l[29;1H[20;75H[?12l[?25h[?25l[29;1H[22;65H[?12l[?25h[?25l[29;1H[23;75H[?12l[?25h[?25l[29;1H[25;71H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[1;28r[m[1;1H[2L[1;29r[1;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[2;1H[93m    [m;[28;1H[94m@                                                                                       [m[29;1H[K[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[1;72H[?12l[?25h[?25l[m[29;1H/atoi[29;6H[K[29;1H[9;72H[?12l[?25h[?25l[29;1H[11;69H[?12l[?25h[?25l[29;1H[12;65H[?12l[?25h[?25l[29;1H[17;69H[?12l[?25h[?25l[29;1H[19;61H[?12l[?25h[?25l[29;1H[20;73H[?12l[?25h[?25l[29;1H[22;75H[?12l[?25h[?25l[29;1H[24;65H[?12l[?25h[?25l[29;1H[25;75H[?12l[?25h[?25l[29;1H[27;71H[?12l[?25h[?25l

[38;5;224msearch hit BOTTOM, continuing at TOP[1;72H[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[m[29;13H[K[1;73H[?12l[?25h[29;1H[K[1;72H[?25l[?12l[?25h[2;5H[?25l[29;1H[1m-- INSERT --[2;6H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lat */[?12l[?25h[?25lto */[?12l[?25h[?25loi */[?12l[?25h[?25li( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([ma[46m)[m */[?12l[?25h[?25lar[46m)[m */[?12l[?25h[?25lrg[46m)[m */[?12l[?25h[?25lgv[46m)[m */[?12l[?25h[?25lv[[46m)[m */[?12l[?25h[?25l[i[46m)[m */[?12l[?25h[?25li [46m)[m */[?12l[?25h[?25l +[46m)[m */[?12l[?25h[?25l+ [46m)[m */[?12l[?25h[?25l 1[46m)[m */[?12l[?25h[?25l1][46m)[m */[?12l[?25h[?25l]ã‚’[46m)[m */[?12l[?25h[?25li[46m)[m */[?12l[?25h[?25lin[46m)[m */[?12l[?25h[?25lnt[46m)[m */[?12l[?25h[?25ltå‹[46m)[m */[?12l[?25h[?25lã«[46m)[m */[?12l[?25h[?25lå¤‰æ›[46m)[m */[?12l[?25h[?25l[2;14H([24C)[4;38H[?12l[?25h[6;39H[8;39H[6;39H[4;38H[6;39H[8;39H[10;6H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[10;14H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ› */[?12l[?25h[11;87H[?25l [?12l[?25h[?25l /[12;5H[?12l[?25h[?25l[12;28r[12;1H[L[1;29r[12;1H[93m    [m*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[12;11H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ› */[?12l[?25h[13;83H[14;30H[13;83H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[14;5H[?12l[?25h[?25l[14;28r[14;1H[L[1;29r[14;1H[93m    [m/[?12l[?25h[13;88H[?25l a  [14;1H[93m    [m*/[13;88H[?12l[?25h[?25larr[14;1H[93m    [m */[?12l[?25h[?25l[93m [mt */[?12l[?25h[?25l[93m [m */[14;8H[K[14;5H[?12l[?25h[?25l[93m [mg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l+1 */[?12l[?25h[?25l+ */[14;14H[K[14;11H[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[14;7H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ› */[?12l[?25h[15;30H[29;1H[K[15;29H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hcbow[?25l[29;5H[K[29;5H[?12l[?25h[?25l[29;4H[K[29;4H[?12l[?25h[?25l[29;3H[K[29;3H[?12l[?25h[?25l[29;2H[K[29;2H[?12l[?25h [15;29H[16;28H [?25l[46m([mchar *[46m)[?12l[?25h[?25l[m[16;23H(char *)[?12l[?25h"-alpha", argc, arg[?25l[16;22H[46m([28C)[?12l[?25h[?25l[16;11H([m[10C([28C)[46m)[?12l[?25h[?25l[m[16;11H([40C)[?12l[?25h > [?25l[16;10H[46m([46C)[?12l[?25h[?25l[m[16;10H([46C)[?12l[?25h alpha =[18C[17;5H[16;5H[79C[?25l[29;1H[1m-- INSERT --[16;85H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l[17;5H[?12l[?25h[?25l[17;28r[17;1H[L[1;29r[17;1H[93m    [m[28;1H[94m@                                                                                       [17;6H[?12l[?25h[?25l[m *[?12l[?25h[?25l*/[?12l[?25h[16;88H[17;5H[?25l[93m [ma */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv@ */[?12l[?25h[?25l@i */[?12l[?25h[?25l@ */[17;13H[K[17;10H[?12l[?25h[?25lv */[17;12H[K[17;9H[?12l[?25h[?25lv@ */[?12l[?25h[?25lv */[17;12H[K[17;9H[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l1: */[?12l[?25h[?25l1 */[17;18H[K[17;15H[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[17;9H[i + 1]ã‚’ */[?12l[?25h[?25lo */[?12l[?25h[?25l */[17;21H[K[17;18H[?12l[?25h[?25ld */[?12l[?25h[?25ldo */[?12l[?25h[?25lou */[?12l[?25h[?25lub */[?12l[?25h[?25lbl */[?12l[?25h[?25lle */[?12l[?25h[?25leå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25la */[?12l[?25h[?25lal */[?12l[?25h[?25llp */[?12l[?25h[?25lph */[?12l[?25h[?25lha */[?12l[?25h[?25laã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[15;30H[14;30H[?25lã—ã¦ */[?12l[?25h[?25lc */[?12l[?25h[?25lcb */[?12l[?25h[?25lbo */[?12l[?25h[?25low */[?12l[?25h[?25lwã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[12;34H[10;37H[12;34H[?25lã—ã¦ */[?12l[?25h[?25lb */[?12l[?25h[?25lbi */[?12l[?25h[?25lin */[?12l[?25h[?25lna */[?12l[?25h[?25lar */[?12l[?25h[?25lry */[?12l[?25h[?25lyã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[10;37H[8;47H[10;37H[?25lã—ã¦ */[?12l[?25h[?25ld */[?12l[?25h[?25lde */[?12l[?25h[?25leb */[?12l[?25h[?25lbu */[?12l[?25h[?25lug */[?12l[?25h[?25lg_ */[?12l[?25h[?25l_m */[?12l[?25h[?25lmo */[?12l[?25h[?25lod */[?12l[?25h[?25lde */[?12l[?25h[?25leã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[8;53H[6;53H[4;45H[2;43H[?25l[2;14H[46m([24C)[?12l[?25h[?25l[?12l[?25h[?25l[mã—ã¦[46m)[m */[?12l[?25h[?25ll[46m)[m */[?12l[?25h[?25lla[46m)[m */[?12l[?25h[?25lay[46m)[m */[?12l[?25h[?25lye[46m)[m */[?12l[?25h[?25ler[46m)[m */[?12l[?25h[?25lr1[46m)[m */[?12l[?25h[?25l1_[46m)[m */[?12l[?25h[?25l_s[46m)[m */[?12l[?25h[?25lsi[46m)[m */[?12l[?25h[?25liz[46m)[m */[?12l[?25h[?25lze[46m)[m */[?12l[?25h[?25leã«[46m)[m */[?12l[?25h[?25lä»£å…¥[46m)[m */[?12l[?25h[?25l[2;14H([45C)[4;45H[?12l[?25h[6;60H[8;60H[10;57H[12;50H[14;44H[15;30H[17;50H[19;48H[20;87H[?25l [?12l[?25h[?25l /[21;5H[?12l[?25h[?25l[21;28r[21;1H[L[1;29r[21;1H[93m    [m*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l+1 */[?12l[?25h[?25l+ */[21;18H[K[21;15H[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[21;11H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25lw */[?12l[?25h[?25lwi */[?12l[?25h[?25lin */[?12l[?25h[?25lnd */[?12l[?25h[?25ldw */[?12l[?25h[?25ld */[21;42H[K[21;39H[?12l[?25h[?25ldw */[?12l[?25h[?25ld */[21;42H[K[21;39H[?12l[?25h[?25ldo */[?12l[?25h[?25low */[?12l[?25h[?25lwã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[22;87H[?25l [?12l[?25h[?25l /[23;5H[?12l[?25h[?25l[23;28r[23;1H[L[1;29r[23;1H[93m    [m*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l+1 */[?12l[?25h[?25l+ */[23;18H[K[23;15H[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[23;11H[i + 1]ã‚’ */[?12l[?25h[?25ld */[?12l[?25h[?25ldo */[?12l[?25h[?25lou */[?12l[?25h[?25lub */[?12l[?25h[?25lbl */[?12l[?25h[?25lle */[?12l[?25h[?25leå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25ls */[?12l[?25h[?25lsa */[?12l[?25h[?25lam */[?12l[?25h[?25lmp */[?12l[?25h[?25lpl */[?12l[?25h[?25lle */[?12l[?25h[?25leã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[21;50H[23;50H[24;79H[?25l;ã€€[?12l[?25h[?25l[24;79H[K[24;79H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[24;86H[?12l[?25h[?25l[25;28r[25;1H[L[1;29r[24;85Hgv **[25;1H[93m    [m/


[94m@                                                                                       [24;87H[?12l[?25h[?25l[mv[  [25;1H[93m    [m*/[24;88H[?12l[?25h[?25l[ii[25;1H[93m    [m */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[24;87H[46m[[mii[25;1H[93m [m[6C1[46m][m */[?12l[?25h[?25l[24;87H[ii[25;1H[93m [m[7C]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25lh */[?12l[?25h[?25lhe */[?12l[?25h[?25lh */[25;31H[K[25;28H[?12l[?25h[?25lhs */[?12l[?25h[?25lsã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[27;7H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;15H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ */[?12l[?25h[?25lã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25ln */[?12l[?25h[?25lne */[?12l[?25h[?25leg */[?12l[?25h[?25lga */[?12l[?25h[?25lat */[?12l[?25h[?25lti */[?12l[?25h[?25liv */[?12l[?25h[?25lve */[?12l[?25h[?25leã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[25;38H[27;53H[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [27;1H[93m    [m1]);
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]);[27;9H[?12l[?25h[28;83H[27;9H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv@ */[?12l[?25h[?25l@i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[27;23H[K[27;20H[?12l[?25h[?25l */[27;22H[K[27;19H[?12l[?25h[?25l@ */[27;21H[K[27;18H[?12l[?25h[?25lv */[27;20H[K[27;17H[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;17H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25ln */[?12l[?25h[?25lnu */[?12l[?25h[?25lum */[?12l[?25h[?25lm_ */[?12l[?25h[?25l_t */[?12l[?25h[?25lth */[?12l[?25h[?25lhr */[?12l[?25h[?25lre */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25lds */[?12l[?25h[?25lsã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[28;83H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [28;1H[93m    [m1]);[?12l[?25h[26;83H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[27;5H[?12l[?25h[?25l[93m    [m/[27;7H[K[28;1H[94m@                                                                                       [27;6H[?12l[?25h[26;88H[?25l[m a  [27;1H[93m    [m*/[26;88H[?12l[?25h[?25larr[27;1H[93m    [m */[?12l[?25h[?25l[93m [mg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l1: */[?12l[?25h[?25l1 */[27;16H[K[27;13H[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;7H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25li */[?12l[?25h[?25lit */[?12l[?25h[?25lte */[?12l[?25h[?25ler */[?12l[?25h[?25lrã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [27;1H[93m    [m1]);
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[27;9H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;17H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ã« */[?12l[?25h[?25lå¤‰æ›ã—ã¦ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25ln_ */[?12l[?25h[?25ln */[27;46H[K[27;43H[?12l[?25h[?25li */[27;45H[K[27;42H[?12l[?25h[?25l */[27;44H[K[27;41H[?12l[?25h[?25lm */[?12l[?25h[?25lmi */[?12l[?25h[?25lin */[?12l[?25h[?25ln_ */[?12l[?25h[?25l_c */[?12l[?25h[?25lco */[?12l[?25h[?25lou */[?12l[?25h[?25lun */[?12l[?25h[?25lnt */[?12l[?25h[?25ltã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[29;5H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[28;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */[?12l[?25h[27;5H[25;56H[27;5H[25;56H [29;1H[K[25;56H[?25l[?12l[?25h[26;88H[?25l


[1m-- INSERT --[27;5H[?12l[?25h[?25l[m[93m   [m[27;7H[K[28;1H[94m@                                                                                       [27;6H[?12l[?25h[?25l[m /[?12l[?25h[?25l [?12l[?25h[?25l[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[i */[?12l[?25h[?25l  */[?12l[?25h[?25l + */[?12l[?25h[?25l  */[?12l[?25h[?25l 1 */[?12l[?25h[?25l[46m[[mi + 1[46m][m */[?12l[?25h[?25l[27;13H[i + 1]ã‚’ */[?12l[?25h[?25li */[?12l[?25h[?25lin */[?12l[?25h[?25lnt */[?12l[?25h[?25ltå‹ã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[?25lã—ã¦ */[?12l[?25h[?25lc */[?12l[?25h[?25lcl */[?12l[?25h[?25lla */[?12l[?25h[?25las */[?12l[?25h[?25lss */[?12l[?25h[?25lse */[?12l[?25h[?25les */[?12l[?25h[?25lsã« */[?12l[?25h[?25lã—ã¦classesã« */[27;47H[K[27;31H[?12l[?25h[?25lã—ã¦classesã« */[27;45H[K[27;29H[?12l[?25h[?25lå¤‰æ›ã—ã¦classesã« */[27;33H[?12l[?25h[2C[2Cclasses[2C[?25lä»£å…¥ */[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[27;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>[28;1H@                                                                                       [27;32H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[27;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“[46m([mã©ã“ã§è§£æ”¾ï¼Ÿ[46m)[m */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>[28;1H@                                                                                       [27;50H[?12l[?25h[?25l[m[27;36H([12C)[25;32H[?12l[?25h[?25l[27;36H[46m([12C)[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[25;36H([12C)
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[27;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {[27;34H[?12l[?25h[?25l[28;45H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[27;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f[28;1H[94m@                                                                                       [27;19H[?12l[?25h[?25l[25;45H[?12l[?25h[24;34H[?25l[m[22;36H[46m([12C)[?12l[?25h[?25l[m[22;36H([12C)[20;32H[?12l[?25h[18;50H[20;32H[?25l[22;36H[46m([12C)[?12l[?25h[?25l[m[22;36H([12C)[20;32H[?12l[?25h[?25l( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l[?12l[?25h[?25l[46m([mã©ã“ã§[46m)[m */[?12l[?25h[?25lè§£æ”¾[46m)[m */[?12l[?25h[?25lï¼Ÿ[46m)[m */[?12l[?25h[?25l[20;29H([12C)[18;42H[?12l[?25h[16;42H[14;42H[12;42H[10;42H[8;38H[6;42H[4;41H[2;41H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [2;1H[93m    [margv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;41H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m683 [m  if (cbow) alpha = 0.05;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[2;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;42H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[2;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;41H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[2;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;42H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[46m[[mi + 1[46m][mã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [2;42H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[46m[[mi + 1[46m][mã‚’ã‚³ãƒ”ãƒ¼ */[4;42H[i + 1][28;1H[94m@                                                                                       [2;42H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][2;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[4;42H[i + 1][28;1H[94m@                                                                                       [2;42H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[2;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[28;1H[94m@                                                                                       [2;41H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m674 [m  save_vocab_file[0] = 0;[28;1H[94m@                                                                                       [1;30H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[2;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[2;42H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m669 [m    printf("\nExamples:\n");[28;1H[94m@                                                                                       [1;33H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[2;1H[93m    [mgram model)\n");[28;1H[94m@                                                                                       [2;21H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m667 [m    printf("\t-cbow <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[2;1H[93m    [maining data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;1H[94m@                                                                                       [1;64H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;1H[94m@                                                                                       [1;88H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;1H[94m@                                                                                       [1;86H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [2;22H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;75H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;15H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;46H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;70H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;41H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[28;1H[94m@                                                                                       [1;8H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m623 [m    return a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m621 [m      exit(1);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[4;9H}[m[28;1H[94m@                                                                                       [1;29H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) [46m{[m[2;28H{[5;9H}[7;7H[46m}[1;62H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m617 [m  int a;[2;61H{[8;7H}[28;1H[94m@                                                                                       [1;13H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) [46m{[11;5H}[1;51H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m615 [m[2;50H{[12;5H}[1;5H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[?12l[?25h[2;30H[3;50H[4;41H[5;5H[?25l[6;50H[46m{[16;5H}[6;51H[?12l[?25h[?25l[m{[16;5H}[7;13H[?12l[?25h[?25l[8;61H[46m{[14;7H}[8;62H[?12l[?25h[?25l[m{[9;28H[46m{[12;9H}[m[14;7H}[9;29H[?12l[?25h[?25l{[12;9H}[10;52H[?12l[?25h[11;19H[?25l[9;28H[46m{[12;9H}[?12l[?25h[?25l[m[9;28H{[12;9H}[13;18H[?12l[?25h[?25l[8;61H[46m{[14;7H}[?12l[?25h[?25l[m[8;61H{[14;7H}[15;17H[?12l[?25h[?25l[6;50H[46m{[16;5H}[?12l[?25h[?25l[m[6;50H{[16;5H}[17;5H[?12l[?25h[19;41H[20;13H[21;70H[22;61H[23;30H[24;46H[25;37H[26;70H[27;38H[28;87H[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [28;1H[93m    [m1e-5)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;66H[?12l[?25h[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;21H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[28;42H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[28;41H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[46m[[mi + 1[46m][mã‚’ã‚³ãƒ”ãƒ¼ */[28;42H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;42H[i + 1]
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[46m[[mi + 1[46m][mã‚’ã‚³ãƒ”ãƒ¼ */[28;42H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;42H[i + 1]
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;42H[?12l[?25h[?25l[26;42H[46m[[mi + 1[46m][26;42H[?12l[?25h[?25l[24;42H[[mi + 1[46m][m[26;42H[i + 1][24;42H[?12l[?25h[?25l[i + 1][22;42H[?12l[?25h[20;41H[18;30H[20;41H[18;30H[17;30H[16;26H[15;38H[14;18H[13;42H[11;33H[10;21H[8;35H[7;21H[5;42H[4;64H[3;42H[2;88H[1;37H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;1H[94m@                                                                                       [1;86H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [2;22H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;75H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;15H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;46H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;70H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;41H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m624 [m  }[28;1H[94m@                                                                                       [1;8H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m623 [m    return a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m621 [m      exit(1);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[4;9H}[m[28;1H[94m@                                                                                       [1;29H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) [46m{[m[2;28H{[5;9H}[7;7H[46m}[1;62H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m617 [m  int a;[2;61H{[8;7H}[28;1H[94m@                                                                                       [1;13H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) [46m{[11;5H}[1;51H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m615 [m[2;50H{[12;5H}[1;5H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[?12l[?25h[2;30H[3;50H[4;41H[5;5H[?25l[6;50H[46m{[16;5H}[6;51H[?12l[?25h[?25l[m{[16;5H}[6;52H[?12l[?25h[?25l[46m{[16;5H}[6;51H[?12l[?25h[?25l[m{[16;5H}[6;52H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 6 */[?12l[?25h[?25l67 */[?12l[?25h[?25l75 */[?12l[?25h[?25l7 */[6;60H[K[6;57H[?12l[?25h[?25l76 */[?12l[?25h[?25l6è¡Œç›® */[?12l[?25h[?25lä»¥ä¸‹ã« */[?12l[?25h[?25lé »å‡º */[?12l[?25h[7;13H;[8;13H = 1; a < argc; a+[?25l[8;11H[46m([20C)[?12l[?25h[?25l)[?12l[?25h[?25l[m[8;11H([20C) [?12l[?25hif[?25l [46m([21C)[8;37H[?12l[?25h[?25l([?12l[?25h[?25l[m([21C)[8;39H[?12l[?25hstrcm[?25lp[46m([12C)[8;45H[?12l[?25h[?25l([?12l[?25h[?25l[m([12C)[8;47H[?12l[?25htr, arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[[?12l[?25h[?25l[ma[?12l[?25h[?25l[8;45H[46m([m[9C[a][46m)[?12l[?25h[?25l[8;37H([m[7C([12C)[46m)[?12l[?25h[?25l)[?12l[?25h[?25l[m[8;37H([21C) [46m{[14;7H}[8;61H[?12l[?25h[?25l[m{[9;28H[46m{[12;9H}[m[14;7H}[9;29H[?12l[?25h[?25l{[12;9H}[9;30H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25l  */[?12l[?25h */[?25l[9;37H[K[9;37H[?12l[?25h[?25l[9;36H[K[9;36H[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l [?12l[?25h[?25l =[?12l[?25h[?25l==[?12l[?25h[?25l [?12l[?25h[?25l a[?12l[?25h[?25lar[?12l[?25h[?25lrg[?12l[?25h[10;41H[11;19H[10;41H[9;41H[?25l[9;40H[K[9;40H[?12l[?25h[?25l[9;39H[K[9;39H[?12l[?25h[?25l[9;38H[K[9;38H[?12l[?25h[?25l[?12l[?25h[?25l[9;36H[K[9;36H[?12l[?25h[?25l[9;35H[K[9;35H[?12l[?25h[?25l[?12l[?25h[?25l[9;33H[K[9;33H[?12l[?25h[?25l[?12l[?25h[?25l[9;31H[K[9;31H[?12l[?25h[?25l[9;30H[K[9;30H[?12l[?25h[?25l[46m{[12;9H}[9;29H[?12l[?25h[?25l[m{[12;9H}[10;29H[?12l[?25h[11;19H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*?[?12l[?25h*?[?25l[11;25H[K[11;25H[?12l[?25h [?25l a *[?12l[?25h[?25l  *[?12l[?25h[?25l = *[?12l[?25h[?25l== *[?12l[?25h[?25l  *[?12l[?25h[?25l a *[?12l[?25h[?25lar *[?12l[?25h[?25lrg *[?12l[?25h[?25lgc *[?12l[?25h[?25l  *[?12l[?25h[?25l - *[?12l[?25h[?25l-1 *[?12l[?25h[?25l- 1 *[?12l[?25h1[?25l1ã® *[?12l[?25h[?25læ™‚ã« *[?12l[?25h[?25lç•°å¸¸çµ‚äº† *[?12l[?25h[?25lçµ‚äº† *[11;51H[K[11;44H[?12l[?25h[?25lçµ‚äº† *[11;49H[K[11;42H[?12l[?25h[?25lå‡¦ç†çµ‚äº† *[?12l[?25h[?25lå¤±æ•—ã§çµ‚äº† *[?12l[?25h[10;52H[11;52H[?25lå®Ÿå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;44H[?12l[?25h[?25lå¼•æ•°å‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;48H[?12l[?25h[?25laå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;49H[?12l[?25h[?25larå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;50H[?12l[?25h[?25lrgå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;51H[?12l[?25h[?25lgãŒå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;53H[?12l[?25h[?25lç„¡ã„å‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;57H[?12l[?25h[?25lã¨å‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;59H[?12l[?25h[?25lã—ã¦å‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;63H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;78H[K[11;61H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;76H[K[11;59H[?12l[?25h[?25låˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;65H[?12l[?25h[?25lhå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;66H[?12l[?25h[?25lhhå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;67H[?12l[?25h[?25lhå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;82H[K[11;66H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº† *[11;81H[K[11;65H[?12l[?25h[10;48H[?25l[9;28H[46m{[12;9H}[9;29H[?12l[?25h[?25l[m{[12;9H}[8;48H[?12l[?25h[7;13H[8;48Hr, arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[[?12l[?25h[?25l[ma[?12l[?25h[?25l[8;45H[46m([m[9C[a][46m)[?12l[?25h[?25l[8;37H([m[7C([12C)[46m)[?12l[?25h[?25l)[?12l[?25h[?25l[m[8;37H([21C) [46m{[14;7H}[8;61H[?12l[?25h[?25l{[?12l[?25h[?25l[m{a[14;7H}[8;63H[?12l[?25h[?25l[46m{[m[8;62H[K[14;7H[46m}[8;62H[?12l[?25h[?25l[m{[14;7H}[8;63H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l æ–‡å­—åˆ— */[?12l[?25h[?25ls */[?12l[?25h[?25lst */[?12l[?25h[?25ltr */[?12l[?25h[?25lrã¨ */[?12l[?25h[?25ls */[?12l[?25h[?25l */[8;80H[K[8;77H[?12l[?25h[?25la */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgv */[?12l[?25h[?25lv[ */[?12l[?25h[?25l[a */[?12l[?25h[?25l[46m[[ma[46m][m */[?12l[?25h[?25l[a]ãŒ */[8;86H[?12l[?25h[?25l[9;28r[9;1H[L[1;29r[8;86Hç­‰[94m>>[m[9;1H[93m    [mã—ã„ */[?12l[?25h[?25læ™‚ */[?12l[?25h[8;86H[?25l[46m[[ma[46m][m[4C[94m>>[m[9;1H[93m [8;84H[?12l[?25h[?25l[m[4C[94m>>[m[9;1H[93m [8;83H[?12l[?25h[?25l[m[5C[94m>>[m[9;1H[93m [8;82H[?12l[?25h[?25l[m[6C[94m>>[m[9;1H[93m [8;81H[?12l[?25h[?25l[m[a][4C[94m>>[m[9;1H[93m [8;80H[?12l[?25h[?25l[m[46m{[m[26C[94m>>[m[9;1H[93m [m[15;7H[46m}[8;62H[?12l[?25h[?25l[m[26C[94m>>[m[9;1H[93m [8;61H[?12l[?25h[?25l[m[8;37H[46m([21C)[m {[26C[94m>>[m[9;1H[93m [m[15;7H}[8;60H[?12l[?25h[?25l[28C[94m>>[m[9;1H[93m [8;59H[?12l[?25h[?25l[m[8;37H([7C[46m([12C)[m)[28C[94m>>[m[9;1H[93m [8;58H[?12l[?25h[?25l[m[8;45H([9C[46m[[ma[46m][m)[29C[94m>>[m[9;1H[93m [8;57H[?12l[?25h[?25l[m[31C[94m>>[m[9;1H[93m [8;56H[?12l[?25h[?25l[m[32C[94m>>[m[9;1H[93m [8;57H[?12l[?25h[?25l[m[8;45H[46m([m[9C[a][46m)[m[29C[94m>>[m[9;1H[93m [8;58H[?12l[?25h[?25l[m[8;37H[46m([m[7C([12C)[46m)[m[28C[94m>>[m[9;1H[93m [8;59H[?12l[?25h[?25l[m[29C[94m>>[m[9;1H[93m [8;60H[?12l[?25h[?25l[m[8;37H([21C)[28C[94m>>[m[9;1H[93m [m[10;28H[46m{[13;9H}[10;29H[?12l[?25h[?25l[m{[13;9H}[11;52H[?12l[?25h[12;59H[11;52H[?25l[10;28H[46m{[13;9H}[10;29H[?12l[?25h[?25l[m{[13;9H}[11;52H[?12l[?25h[12;59H[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l( *[?12l[?25h[?25l[46m()[m *[?12l[?25h[?25l[?12l[?25h[?25l[46m([mã“ã‚Œ[46m)[m *[?12l[?25h[?25lãŒ[46m)[m *[12;86H[?12l[?25h[?25l[13;28r[13;1H[L[1;29r[12;86Hæˆ[94m>>[m[13;1H[93m    [mç«‹[46m)[m *[?12l[?25h[?25lã™ã‚‹ã®ã¯[46m)[m *[?12l[?25h[?25la[46m)[m *[?12l[?25h[?25lar[46m)[m *[?12l[?25h[?25lrg[46m)[m *[?12l[?25h[?25lgc[46m)[m *[?12l[?25h[?25lc>[46m)[m *[?12l[?25h[?25l>=[46m)[m *[?12l[?25h[?25l=2[46m)[m *[?12l[?25h[?25l2ã®[46m)[m *[?12l[?25h[?25læ™‚[46m)[m *[?12l[?25h[?25lã ã‹ã‚‰[46m)[m *[?12l[?25h[?25la[46m)[m *[?12l[?25h[?25lar[46m)[m *[?12l[?25h[?25lrg[46m)[m *[?12l[?25h[?25lgc[46m)[m *[?12l[?25h[?25lc=[46m)[m *[?12l[?25h[?25l==[46m)[m *[?12l[?25h[?25l=1[46m)[m *[?12l[?25h[?25l1ã¨[46m)[m *[?12l[?25h[?25lãªã‚‹ã“ã¨ã®[46m)[m *[?12l[?25h[?25lãƒã‚§ãƒƒã‚¯ã‹[46m)[m *[?12l[?25h[?25l[10;28H[46m{[m[12;79H([8C[94m>>[m[13;1H[93m [m[59C)[14;9H[46m}[?12l[?25h[?25l[m[10;28H{[14;9H}[15;18H[?12l[?25h[?25l[8;61H[46m{[m[26C[94m>>[m[9;1H[93m [m[16;7H[46m}[?12l[?25h[?25l[m[8;61H{[26C[94m>>[m[9;1H[93m [m[16;7H}[17;17H[?12l[?25h[?25l[6;50H[46m{[18;5H}[?12l[?25h[?25l[m[6;50H{[18;5H}[19;5H[?12l[?25h[21;61H[22;13H[23;70H[24;61H[25;30H[26;46H[27;37H[28;70H[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [28;1H[93m    [m1e-5)\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m645 [m    printf("\t-hs <int>\n");
[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[27;33H[?12l[?25h[28;75H[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[27;66H[?12l[?25h[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;21H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi[46m([margv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥[46m)[m */[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[25;14H([45C)
[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [27;45H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[28;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[?12l[?25h[26;57H[24;60H[22;60H[20;45H[?25l[18;14H[46m([45C)[?12l[?25h[?25l[m[18;14H([45C)[16;30H[?12l[?25h[15;30H[16;30H[?25l[18;14H[46m([45C)[?12l[?25h[?25l[?12l[?25h[?25l[m[18;14H([45C)[?12l[?25h[?25l[18;19H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[16;30H[17;28H[?25l[46m([mchar *[46m)[m[57C))[18;1H[93m [17;24H[?12l[?25h[?25l[m[64C))[18;1H[93m [17;23H[?12l[?25h[?25l[m[46m([m(char *)[19C[46m)[m[37C))[18;1H[93m [17;22H[?12l[?25h[?25l[m([27C)[37C))[18;1H[93m [17;21H[?12l[?25h[?25l[m[46m([39C)[m[36C))[18;1H[93m [17;12H[?12l[?25h[?25l[m[76C))[18;1H[93m [17;11H[?12l[?25h[?25l[m[77C))[18;1H[93m [17;12H[?12l[?25h[?25l[m([39C)[36C))[18;1H[93m [17;13H[?12l[?25h[m = ArgPo[?25ls[46m([27C)[m[37C))[18;1H[93m [17;22H[?12l[?25h[?25l[m([46m([mchar *[46m)[m[19C)[37C))[18;1H[93m [17;23H[?12l[?25h[?25l[m[65C))[18;1H[93m [17;24H[?12l[?25h[?25l[m(char *)[57C))[18;1H[93m [17;25H[?12l[?25h[mhar [?25l[46m([mchar *[46m)[m[57C))[18;1H[93m [17;30H[?12l[?25h[?25l[m[58C))[18;1H[93m [17;31H[?12l[?25h[?25l[m[17;23H(char *)[57C))[18;1H[93m [17;32H[?12l[?25h[m-size"[29;1H[K[17;37H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h616[?25l[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[17;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆ[94m>>[m[21;1H[93m    [mç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *
[93m622 [m    }
[93m623 [m    return a;
[93m624 [m  }
[93m625 [m  return -1;
[93m626 [m}
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[28;1H[94m@                                                                                       [14;5H[?12l[?25h[15;5H[16;5H[15;5H[14;5H[15;5H[16;5H[18;5H[m    if[?25l [46m([13C)[18;12H[?12l[?25h[?25l[m([13C)[18;13H[?12l[?25ha == argc - [?25l[18;12H[46m([13C)[?12l[?25h[?25l[m[18;12H([13C)[?12l[?25h[?25l [46m{[22;9H}[18;28H[?12l[?25h[?25l[m{[22;9H}[19;28H[?12l[?25h[20;28H[?25l[18;28H[46m{[22;9H}[?12l[?25h[?25l[m[18;28H{[22;9H}[23;17H[?12l[?25h[?25l[16;61H[46m{[m[26C[94m>>[m[17;1H[93m [m[24;7H[46m}[?12l[?25h[?25l[m[16;61H{[26C[94m>>[m[17;1H[93m [m[24;7H}[25;16H[?12l[?25h[?25l[16;61H[46m{[m[26C[94m>>[m[17;1H[93m [m[24;7H[46m}[?12l[?25h[?25l[m[16;61H{[26C[94m>>[m[17;1H[93m [m[24;7H}[23;7H[?12l[?25h[?25l[16;61H[46m{[m[26C[94m>>[m[17;1H[93m [m[24;7H[46m}[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[24;8H[?12l[?25h[?25l[m[16;61H{[26C[94m>>[m[17;1H[93m [m[24;7H}a[?12l[?25h[?25l[16;61H[46m{[m[26C[94m>>[m[17;1H[93m [m[24;7H[46m}[m[24;8H[K[24;8H[?12l[?25h[?25l[16;61H{[26C[94m>>[m[17;1H[93m [m[24;7H} [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 6 */[?12l[?25h[?25l61 */[?12l[?25h[?25l18 */[?12l[?25h[?25l8è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ */[?12l[?25h[25;17H[?25l[14;50H[46m{[26;5H}[?12l[?25h[?25l[m[14;50H{[26;5H} [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 6 */[?12l[?25h[?25l61 */[?12l[?25h[?25l16 */[?12l[?25h[?25l6è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ */[?12l[?25h[27;5H[?25l[1;28r[28;1H
[1;29r[27;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã® [28;1H[93m    [mç·å€‹æ•°ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[27;21H[?12l[?25h[26;5H[25;21H[24;17H[23;21H[22;18H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l== */[?12l[?25h[?25l  */[?12l[?25h[?25l a */[?12l[?25h[?25lar */[?12l[?25h[?25lrg */[?12l[?25h[?25lgc */[?12l[?25h[?25l  */[?12l[?25h[?25l - */[?12l[?25h[?25l-1 */[?12l[?25h[?25l1ã® */[?12l[?25h[?25læ™‚ã ã‘ */[?12l[?25h[?25lã“ã“ã« */[?12l[?25h[?25læ¥ã‚‹ */[?12l[?25h[23;26H[24;17H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l ?[?12l[?25h[?25l?:[?12l[?25h?[?25l :[24;23H[K[24;22H[?12l[?25h:[?25l[24;22H[K[24;22H[?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l a */[?12l[?25h[?25l  */[?12l[?25h[23;23H[22;23H[?25l[17;28H[46m{[21;9H}[?12l[?25h[?25l[m[17;28H{[21;9H}[19;23H[?12l[?25h[18;23H[17;23H[15;23H[14;13H[13;23H[12;5H[11;23H[12;5H[13;23H[14;13H[15;23H[17;23H[18;23H[17;23H[15;23H[14;13H[15;23H[17;23H[18;23H[19;23H[?25l[17;28H[46m{[21;9H}[?12l[?25h[?25l[m[17;28H{[21;9H}[22;23H[?12l[?25h[23;23H[24;23H[25;23H[26;5H[27;23H[?25l[1;28r[28;1H
[1;29r[28;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m632 [m    printf("Options:\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m633 [m    printf("Parameters for training:\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m634 [m    printf("\t-train <file>\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;23H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;23H[?12l[?25h[27;23H[26;23H[25;23H[24;23H[23;23H[22;23H[21;23H[20;23H[19;23H[18;23H[17;23H[?25l[16;23H[?12l[?25h[15;13H[13;23H[15;13H[13;23H[15;13H[13;12H[?25ln[46m([21C)[m[52C  [14;1H[93m [13;13H[?12l[?25h[?25l[m[75C  [14;1H[93m [13;14H[?12l[?25h[?25l[m([21C)[52C  [14;1H[93m [13;15H[?12l[?25h[mnt argc, char **arg[?25l[13;13H[46m([21C)[m[52C  [14;1H[93m [13;35H[?12l[?25h[?25l[m[53C  [14;1H[93m [13;36H[?12l[?25h[?25l[m[13;13H([21C)[52C  [14;1H[93m [13;37H[?12l[?25h[?25l[m{[?12l[?25h /* main[2C[2C[2C703[2C[2C[2C[2C[?25l([?12l[?25hargc:[2C[2C[2C[2C[2C[2C[2C[2C[2C[14;5H[2C[2C[2C[?25laï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;12H[?12l[?25ha[?25lï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;70H[K[14;11H[?12l[?25h[?25l(ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;12H[?12l[?25h[?25l[46m()[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;13H[?12l[?25h[?25l[?12l[?25h[?25l[46m([mä½•ã‚‚[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;16H[?12l[?25h[?25lå¼•æ•°ã‚’[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;22H[?12l[?25h[?25l[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;80H[K[14;20H[?12l[?25h[?25l[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;78H[K[14;18H[?12l[?25h[?25l[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;76H[K[14;16H[?12l[?25h[?25l[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;74H[K[14;14H[?12l[?25h[?25l[46m()[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;72H[K[14;12H[?12l[?25h[?25l[?12l[?25h[?25l-[46m()[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;12H[?12l[?25h[?25l-1[46m()[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;13H[?12l[?25h[?25l[1C[?12l[?25h[?25l[46m([mä½•ã‚‚[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;18H[?12l[?25h[?25lå¼•æ•°ã‚’[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;24H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;24Hã¤ã‘ãªã„æ™‚ã¯[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿ã®[15;1H[93m    [mé…åˆ— */[14;36H[?12l[?25h[?25la[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿[94m>>[m[15;1H[93m    [mã®é…åˆ— */[14;37H[?12l[?25h[?25lar[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³ã‚¿[14;38H[?12l[?25h[?25lrg[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³[94m>>[m[15;1H[93m [m[3Cã‚¿ã®é…åˆ— */[14;39H[?12l[?25h[?25lgc[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤ãƒ³[14;40H[?12l[?25h[?25lc=[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[15;1H[93m [m[3Cãƒ³ã‚¿ã®é…åˆ— */[14;41H[?12l[?25h[?25l==[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[14;42H[?12l[?25h[?25l=1[46m)[mï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[15;1H[93m [m[3Cã‚¤ãƒ³ã‚¿ã®é…åˆ— */[14;43H[?12l[?25h[29;1H[K[14;42H[?25l[14;13H([29C)[44C[94m>>[m[15;1H[93m [14;42H[?12l[?25h[?25l[29;1H[m:[?12l[?25hw[?25l"word2vec.c" 703L, 42864C written[14;42H[?12l[?25h[16;12H[17;69H[16;12H[14;42H[?25l[14;13H[46m([29C)[m[44C[94m>>[m[15;1H[93m [14;43H[?12l[?25h[?25l[m[14;13H([29C)[44C[94m>>[m[15;1H[93m [14;44H[?12l[?25h[2C[m**a[?25l[14;13H[46m([29C)[m[44C[94m>>[m[15;1H[93m [14;43H[?12l[?25h[?25l[m[14;13H([29C)[44C[94m>>[m[15;1H[93m [14;42H[?12l[?25h[12;5H[11;23H[10;25H[9;25H[8;54H[?25l[m[3;28H[46m{[7;9H}[?12l[?25h[?25l[m[3;28H{[7;9H}[6;16H[?12l[?25h[4;51H[?25l[3;28H[46m{[7;9H}[3;28H[?12l[?25h[?25l[m{[7;9H}[4;51H[?12l[?25h[?25l[3;28H[46m{[7;9H}[3;28H[?12l[?25h[?25l[m{[7;9H}[2;13H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[29;1H[K[1;12H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[2;5H[3;74H[4;12H[3;74H[4;12H[6;13H[?25l[7;28H[46m{[11;9H}[7;28H[?12l[?25h[?25l[m{[11;9H}[8;51H[?12l[?25h[10;16H[?25l[7;28H[46m{[11;9H}[?12l[?25h[?25l[m[7;28H{[11;9H}[12;54H[?12l[?25h[13;25H[14;25H[15;23H[16;5H[18;16H[20;12H[21;69H[22;60H[23;29H[24;45H[25;36H[26;69H[27;37H[28;86H[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher[28;1H[94m@                                                                                       [27;38H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[28;16H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[27;14H[?12l[?25h[28;32H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[28;16H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;34H[?12l[?25h[27;65H[28;39H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[28;16H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;41H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;16H[?12l[?25h[28;34H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[28;16H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[28;16H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [27;16H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;16H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;16H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;16H[?12l[?25h[26;16H[24;16H[22;16H[20;16H[18;29H[17;29H[16;25H[17;29H[18;29H[20;16H[22;16H[24;16H[26;16H[28;16H + [?25l[46m[[mi + 1[46m][?12l[?25h[?25l[m[i + 1][?12l[?25h[2Cint[2C[26;28H[24;28H[22;28H[20;28H[18;29H[20;28Hin[18;29H[17;29H[16;25H[15;37H[14;17H[13;30H[11;32H[10;20H[8;34H[7;20H[5;41H[4;63H[3;41H[2;87H[1;36H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;1H[94m@                                                                                       [1;85H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [2;21H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;74H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;14H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;45H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;69H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã® [2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* a  */[28;1H[94m@                                                                                       [1;25H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* a == argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[2;54H[3;25H[4;25H[5;23H[6;5H[8;30H[10;12H[11;69H[12;60H[13;29H[14;45H[15;36H[16;69H[17;37H[18;86H[19;34H[20;65H[21;36H[22;72H[23;38H[25;30H[27;14H[28;32H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;34H[?12l[?25h[27;65H[28;39H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[28;30H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;41H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;20H[?12l[?25h[28;34H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[28;30H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[28;30H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [27;30H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;30H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;30H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;30H[?12l[?25h[26;30H[24;30H[22;30H[20;30H[18;29H[17;29H[16;25H[15;37H[14;17H[13;30H[11;32H[10;20H[8;34H[7;20H[5;41H[4;63H[3;41H[2;87H[1;36H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;1H[94m@                                                                                       [1;85H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [2;21H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;74H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;14H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;45H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ãŒ1å€‹ã®æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;69H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã® [2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* a  */[28;1H[94m@                                                                                       [1;25H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* a == argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m621 [m      exit(1); /* a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆ[94m>>[m[2;1H[93m    [mç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[28;1H[94m@                                                                                       [2;30H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[5;9H}[m[28;1H[94m@                                                                                       [1;28H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[3;28H{[7;9H}[2;13H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[2;40H[3;5H[2;40H[1;49H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[?12l[?25h[2;49H[3;40H[4;5H[5;74H[6;12H[5;74H[?25l[46m{[17;5H}[5;50H[?12l[?25h[?25l[m{[17;5H}[5;49H[?12l[?25h[?25l[5;15H[46m([32C)[?12l[?25h[?25l[m[5;15H([32C)[?12l[?25h[6;12H[?25l[7;45H[46m([12C)[m[29C[94m>>[m[8;1H[93m [7;45H[?12l[?25h[?25l[m([12C)[29C[94m>>[m[8;1H[93m [m[9;28H[46m{[13;9H}[9;28H[?12l[?25h[?25l[m{[13;9H}[10;45H[?12l[?25h[11;44H[10;45H[?25l[9;28H[46m{[13;9H}[9;28H[?12l[?25h[?25l[m{[13;9H}[9;27H[?12l[?25h[?25l[9;12H[46m([13C)[?12l[?25h[?25l[m[9;12H([13C)[?12l[?25h[10;18H[11;18H[?25l[9;28H[46m{[13;9H}[?12l[?25h[?25l[m[9;28H{[13;9H}[14;18H[?12l[?25h[15;17H[16;18H[17;17H[18;5H[19;18H[22;12H[23;18H[24;18H[25;18H[26;18H[27;18H[28;18H[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[28;18H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[28;18H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher[28;1H[94m@                                                                                       [27;18H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[27;18H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[26;18H[?12l[?25h[24;18H[23;18H[22;18H[21;18H[20;18H[19;18H[18;18H[17;18H[16;18H[15;18H[14;18H[13;18H[12;18H[11;18H[10;12H[7;18H[6;5H[5;17H[4;18H[3;17H[2;18H[1;9H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m621 [m      exit(1); /* a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆ[94m>>[m[2;1H[93m    [mç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[28;1H[94m@                                                                                       [1;18H[?12l[?25h[3;9H[4;18H[5;17H[6;18H[7;17H[8;5H[9;18H[12;12H[13;18H[m [?25l[13;10H[46m([9C)[?12l[?25h[?25l[m[13;10H([9C)[?12l[?25h { /* [2C[2C[2C[2C[2C[2C[2C[2C[2C[2C1[?25l[29;1H[1m-- INSERT --[13;50H[?12l[?25h[2C[?25l[mæ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;68H[K[13;50H[?12l[?25h[?25l1æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;66H[K[13;48H[?12l[?25h[?25læ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;65H[K[13;47H[?12l[?25h[?25læ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;63H[K[13;45H[?12l[?25h[?25lã«æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;47H[?12l[?25h[?25lä½•ã‚‚æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;51H[?12l[?25h[?25lä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[13;59H[?12l[?25h[?25l[14;15H[46m([43C)[?12l[?25h[?25l[m[14;15H([43C)[15;30H[?12l[?25h[16;46H[17;37H[18;59H[19;38H[20;59H[21;35H[22;59H[23;37H[24;59H[25;39H[26;59H[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[26;59H[?12l[?25h[28;33H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;35H[?12l[?25h[27;59H[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;59H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;59H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[27;59H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [26;59H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;59H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;59H[?12l[?25h[25;59H[23;59H[21;59H[20;30H[21;59H[23;59H[25;59H[27;59H[25;59H[23;59H[21;59H[20;30H[19;30H[18;26H[17;38H[16;18H[14;59H[13;33H[11;59H[10;35H[8;59H[7;42H[6;59H[5;42H[4;59H[3;37H[2;59H[1;36H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [1;59H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;59H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [1;59H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;46H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf[46m([m"WORD VECTOR estimation toolkit v 0.1c\n\n"[46m)[m;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[2;15H([43C)[28;1H[94m@                                                                                       [1;59H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã® [2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* a  */[28;1H[94m@                                                                                       [1;26H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* a == argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m621 [m      exit(1); /* a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆ[94m>>[m[2;1H[93m    [mç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[28;1H[94m@                                                                                       [1;59H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[5;9H}[m[28;1H[94m@                                                                                       [1;29H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if [46m([m!strcmp(str, argv[a])[46m)[m { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[3;28H{[7;9H}[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[2;37H([21C)[28C[94m>>[m[3;1H[93m [1;13H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);[1;59H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m607 [m    // Save the K-means classes[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m606 [m    }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m605 [m      }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m604 [m[7C cl[c] = closeid;[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;29H[?12l[?25h[?25l[2;12H[?12l[?25h[?25l[3;10H[?12l[?25h[4;36H[5;59H[6;59H[m[29;1H[K[6;57H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25h676[?25l[27m[m[H[2J[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[2;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[5;1H[93m    [mgram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[8;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[15;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */
[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][17;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[19;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[21;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[23;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */
[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[25;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[27;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */
[93m683 [m  if (cbow) alpha = 0.05;[14;7H[?12l[?25h[13;7H[12;7H[11;7H[10;7H[9;7H[7;7H[6;7H[4;7H[3;7H[1;7H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* a  */[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* a == argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m621 [m      exit(1); /* a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆ[94m>>[m[2;1H[93m    [mç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) {[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[1;7H[?12l[?25h[2;7H[3;7H[5;7H[6;7H[7;7H[9;7H[10;7H[9;5H[7;5H[9;5H   [?25l[5;28H[46m{[9;9H}[?12l[?25h[?25l[m[5;28H{[9;9H}[7;9H[?12l[?25h[?25l[5;28H[46m{[9;9H}[?12l[?25h[?25l[m[5;28H{[9;9H}[7;9H[?12l[?25h  exi[?25lt[46m([m1[46m)[m[70C[94m>>[m[8;1H[93m [7;15H[?12l[?25h[?25l[m(1)[70C[94m>>[m[8;1H[93m [7;16H[?12l[?25h[?25l[m[46m([m1[46m)[m[70C[94m>>[m[8;1H[93m [7;17H[?12l[?25h[?25l[m(1)[70C[94m>>[m[8;1H[93m [7;18H[?12l[?25h[m; /* [?25l[29;1H[1m-- INSERT --[7;24H[?12l[?25h[?25l[m æ–‡å­—åˆ—a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“[94m>>[m[8;1H[93m    [mã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;29H[?12l[?25h[?25lsa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ [8;1H[93m [7;30H[?12l[?25h[?25l[msta == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†([94m>>[m[8;1H[93m [m[3Cã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;31H[?12l[?25h[?25ltra == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(([8;1H[93m [7;32H[?12l[?25h[?25l[mr=a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº† [8;1H[93m    [m(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;33H[?12l[?25h[?25l==a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚[94m>>[m[8;1H[93m    [mäº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;34H[?12l[?25h[?25laa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚ [8;1H[93m [7;35H[?12l[?25h[?25l[mara == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§[94m>>[m[8;1H[93m    [mçµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;36H[?12l[?25h[?25lrga == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§ [8;1H[93m [7;37H[?12l[?25h[?25l[mgva == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—[94m>>[m[8;1H[93m    [mã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;38H[?12l[?25h[?25lv[a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•— [8;1H[93m [7;39H[?12l[?25h[?25l[maa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±[94m>>[m[8;1H[93m    [mæ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;40H[?12l[?25h[?25l[46m[[ma[46m][ma == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤± [8;1H[93m [7;41H[?12l[?25h[?25l[m[a]ã®a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç† [8;1H[93m    [må¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;43H[?12l[?25h[?25læ™‚ã«a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ã— [8;1H[93m [m[3Cå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;47H[?12l[?25h[?25lfa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­[94m>>[m[8;1H[93m    [mã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;48H[?12l[?25h[?25lfoa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤æ–­ [8;1H[93m [7;49H[?12l[?25h[?25l[9;28r[m[9;1H[L[1;29r[7;48Hora == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤[94m>>[m[8;1H[93m    [mæ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹))[9;1H[93m    [m *[7;50H[?12l[?25h[?25lråˆ†a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨[94m>>[m[8;1H[93m    [måˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯[94m>>[m[9;1H[93m    [mã‹) *[7;52H[?12l[?25h[?25lra == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨åˆ¤[94m>>[m[8;1H[93m    [mæ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯ã‹))[9;1H[93m    [m *[9;7H[K[7;50H[?12l[?25h[?25lræ–‡a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„ã¨[94m>>[m[8;1H[93m    [måˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒã‚¯[94m>>[m[9;1H[93m    [mã‹) *[7;52H[?12l[?25h[?25lãŒa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒç„¡ã„[94m>>[m[8;1H[93m    [mã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒã‚§ãƒƒ[94m>>[m[9;1H[93m [m[3Cã‚¯ã‹) *[7;54H[?12l[?25h[?25lå‹•ãa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°argãŒ[94m>>[m[8;1H[93m    [mç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[94m>>[m[9;1H[93m [m[3Cã‚§ãƒƒã‚¯ã‹) *[7;58H[?12l[?25h[?25lï¼Œa == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°arg[94m>>[m[8;1H[93m    [mãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®[94m>>[m[9;1H[93m [m[3Cãƒã‚§ãƒƒã‚¯ã‹) *[7;60H[?12l[?25h[?25lã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•° [8;1H[93m    [margãŒç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨[9;5Hã®ãƒã‚§ãƒƒã‚¯ã‹) *[7;64H[?12l[?25ha == argc - 1[2C[2C[2C[2C[2C[8;5Harg[2C[?25lgç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®[9;5Hãƒã‚§ãƒƒã‚¯ã‹) *[9;19H[K[8;8H[?12l[?25h[?25lrç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®[94m>>[m[9;1H[93m [8;7H[?12l[?25h[?25l[maç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[9;5Hã‚§ãƒƒã‚¯ã‹) *[9;17H[K[8;6H[?12l[?25h[?25l[93m [mç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[94m>>[m[9;1H[93m [8;5H[?12l[?25h[?25l [m-ç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[8;6H[?12l[?25h[?25l[93m [mç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[94m>>[m[9;1H[93m [8;5H[?12l[?25h[?25l [msç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®ãƒ[8;6H[?12l[?25h[?25lstç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®[94m>>[m[9;1H[93m [m[3Cãƒã‚§ãƒƒã‚¯ã‹) *[8;7H[?12l[?25h[?25ltrç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“ã¨ã®[8;8H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l[2C[46m([9;15H)[8;34H[?12l[?25h[?25l([?12l[?25h[?25l[m([9;15H)[8;37H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2Cargc>=2[2C[2C[2C[2C[2Cargc==1[2C[2C[2C[2C[2C[9;5H[2C[2C[2C[2C[?25l[8;34H[46m([9;15H)[?12l[?25h[?25l)[m *[9;17H[K[9;13H[?12l[?25h[?25l[46m)[m *[9;15H[K[9;11H[?12l[?25h[?25l[46m)[m *[9;13H[K[9;9H[?12l[?25h[?25l[46m)[m *[9;11H[K[9;7H[?12l[?25h[?25l[93m [m[46m)[m *[9;9H[K[9;5H[?12l[?25h[?25l[8;87H[46m)[m  [9;1H[93m    [m*[9;7H[K[8;87H[?12l[?25h[?25l[7;28r[28;1H
[1;29r[7;1H[93m621 [m      exit(1); /* æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿå¼•æ•°[8;4H[93m [mstrç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†[46m([mã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯argc>=2ã®æ™‚ã ã‹ã‚‰argc==1ã¨ãªã‚‹ã“[46m)[m *[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[8;85H[?12l[?25h[?25l[46m)[m *[8;87H[K[8;83H[?12l[?25h[?25l[46m)[m *[8;85H[K[8;81H[?12l[?25h[?25l[46m)[m *[8;83H[K[8;79H[?12l[?25h[?25l1[46m)[m *[8;81H[K[8;77H[?12l[?25h[?25l=[46m)[m *[8;79H[K[8;76H[?12l[?25h[?25l=[46m)[m *[8;78H[K[8;75H[?12l[?25h[?25lc[46m)[m *[8;77H[K[8;74H[?12l[?25h[?25lg[46m)[m *[8;76H[K[8;73H[?12l[?25h[?25lr[46m)[m *[8;75H[K[8;72H[?12l[?25h[?25la[46m)[m *[8;74H[K[8;71H[?12l[?25h[?25l[46m)[m *[8;73H[K[8;70H[?12l[?25h[?25l[46m)[m *[8;72H[K[8;68H[?12l[?25h[?25l[46m)[m *[8;70H[K[8;66H[?12l[?25h[?25l[46m)[m *[8;68H[K[8;64H[?12l[?25h[?25l[46m)[m *[8;66H[K[8;62H[?12l[?25h[?25l2[46m)[m *[8;64H[K[8;60H[?12l[?25h[?25l=[46m)[m *[8;62H[K[8;59H[?12l[?25h[?25l>[46m)[m *[8;61H[K[8;58H[?12l[?25h[?25lc[46m)[m *[8;60H[K[8;57H[?12l[?25h[?25lg[46m)[m *[8;59H[K[8;56H[?12l[?25h[?25lr[46m)[m *[8;58H[K[8;55H[?12l[?25h[?25la[46m)[m *[8;57H[K[8;54H[?12l[?25h[?25l[46m)[m *[8;56H[K[8;53H[?12l[?25h[?25l[46m)[m *[8;55H[K[8;51H[?12l[?25h[?25l[46m)[m *[8;53H[K[8;49H[?12l[?25h[?25l[46m)[m *[8;51H[K[8;47H[?12l[?25h[?25l[46m)[m *[8;49H[K[8;45H[?12l[?25h[?25l[46m)[m *[8;47H[K[8;43H[?12l[?25h[?25l[46m)[m *[8;45H[K[8;41H[?12l[?25h[?25l[46m)[m *[8;43H[K[8;39H[?12l[?25h[?25l[46m)[m *[8;41H[K[8;37H[?12l[?25h[?25l[46m()[m *[8;39H[K[8;35H[?12l[?25h[?25l[46m([mã“ã‚ŒãŒ[46m)[m *[?12l[?25h[?25læˆç«‹[46m)[m *[?12l[?25h[?25lã™ã‚‹ã®ã¯[46m)[m *[?12l[?25h[?25lå®Ÿå¼•æ•°ãŒ[46m)[m *[?12l[?25h[?25ls[46m)[m *[?12l[?25h[?25lst[46m)[m *[?12l[?25h[?25ltr[46m)[m *[?12l[?25h[?25lrã ã‘ã®[46m)[m *[?12l[?25h[?25lå ´åˆã¨[46m)[m *[?12l[?25h[?25lï¼Œ[46m)[m *[?12l[?25h[?25lå®Ÿå¼•æ•°[46m)[m *[?12l[?25h[?25lã®[46m)[m *[8;86H[?12l[?25h[?25l[9;28r[9;1H[L[1;29r[8;86Hæœ€[94m>>[m[9;1H[93m    [må¾ŒãŒ[46m)[m *[?12l[?25h[?25ls[46m)[m *[?12l[?25h[?25lst[46m)[m *[?12l[?25h[?25ltr[46m)[m *[?12l[?25h[?25lrã®[46m)[m *[?12l[?25h[?25læ™‚[46m)[m *[?12l[?25h[?25l[5;28H[46m{[m[8;34H([53C[94m>>[m[9;1H[93m [m[14C)[10;9H[46m}[?12l[?25h[?25l[m[5;28H{[10;9H}[11;55H[?12l[?25h[12;26H[13;26H[14;24H[15;5H[18;15H[19;13H[20;77H[21;61H[22;30H[?25l;a[?12l[?25h[?25l[22;30H[K[22;30H[?12l[?25h[21;30H[20;29H[19;13H[16;30H[15;5H[14;24H[13;26H[12;26H[11;30H[?25l[5;28H[46m{[10;9H}[?12l[?25h[?25l[m[5;28H{[10;9H}[7;30H[?12l[?25h[6;30H[7;30H [?25l 1æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿå¼•[94m>>[m[8;1H[93m    [mæ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®[94m>>[m[9;1H[93m    [mæœ€å¾ŒãŒstrã®æ™‚) *[7;24H[?12l[?25h[?25l1 æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿå¼•[7;25H[?12l[?25h[?25l <æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿ[94m>>[m[8;1H[93m    [må¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°[94m>>[m[9;1H[93m    [mã®æœ€å¾ŒãŒstrã®æ™‚) *[7;26H[?12l[?25h[?25l<=æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«å®Ÿ[7;27H[?12l[?25h[?25l= æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«[94m>>[m[8;1H[93m [m[3Cå®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•[94m>>[m[9;1H[93m    [mæ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;28H[?12l[?25h[?25l aæ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚ã«[7;29H[?12l[?25h[?25la æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚[94m>>[m[8;1H[93m    [mã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿ[94m>>[m[9;1H[93m    [må¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;30H[?12l[?25h[?25l Mæ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚[7;31H[?12l[?25h[?25l æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚[94m>>[m[8;1H[93m [m[86C[94m>>[m[9;1H[93m [7;30H[?12l[?25h[?25l[m <æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®æ™‚[7;31H[?12l[?25h[?25l< æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®[94m>>[m[8;1H[93m    [mæ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[9;1H[93m [m[3Cå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;32H[?12l[?25h[?25l aæ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1ã®[7;33H[?12l[?25h[?25laræ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 1[94m>>[m[8;1H[93m    [mã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨[94m>>[m[9;1H[93m    [mï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;34H[?12l[?25h[?25lrgæ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc - 11[8;1H[93m [m[86C[94m>>[m[9;1H[93m [7;35H[?12l[?25h[?25l[mgcæ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argc -  [8;1H[93m    [m1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨[7;36H[?12l[?25h[?25lcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œã‹ã¤a == argg[8;1H[93m    [mc - 1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´[9;4H[93m [måˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;40H[?12l[?25h[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][m[30Cgg[8;1H[93m [7;55H[?12l[?25h[?25l[m[33Cgg[8;1H[93m [7;56H[?12l[?25h[?25l[m[32Cgg[8;1H[93m [7;57H[?12l[?25h[?25l[m[31Cgg[8;1H[93m [7;58H[?12l[?25h[?25l[m[a][30Cgg[8;1H[93m [7;60H[?12l[?25h[2C[2C[mfor[2C[2C[2C[2C[2C[2C[2C[?25la == argc  [8;1H[93m    [m- 1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆ[9;4H[93m [mã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[9;34H[K[7;79H[?12l[?25h[?25la == argc -  [8;1H[93m    [m1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨[9;4H[93m [mï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[9;32H[K[7;77H[?12l[?25h[?25l[5;28H[46m{[10;9H}[?12l[?25h[?25l[m[5;28H{[10;9H}[11;55H[?12l[?25h[12;26H[11;55H[?25l= argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;54H[K[11;25H[?12l[?25h[?25l  argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;53H[K[11;24H[?12l[?25h[?25l argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;52H[K[11;23H[?12l[?25h[?25l 1a argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;23H[?12l[?25h[?25l1 a argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;24H[?12l[?25h[?25l <a argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;25H[?12l[?25h[?25l<=a argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;26H[?12l[?25h[?25l= a argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;27H[?12l[?25ha [?25l <argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;30H[?12l[?25h[?25l< argc -1ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;31H[?12l[?25hargc -1[2C[2C[2C[2C[2C[2C[2C[2C[2Cgc -1[?25lã‹ã¤ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;42H[?12l[?25h[?25læ–‡å­—åˆ—ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;48H[?12l[?25h[?25lsã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;49H[?12l[?25h[?25lstã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;50H[?12l[?25h[?25ltrã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;51H[?12l[?25h[?25lr=ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;52H[?12l[?25h[?25l==ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;53H[?12l[?25h[?25l=aã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;54H[?12l[?25h[?25larã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;55H[?12l[?25h[?25lrgã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;56H[?12l[?25h[?25lgvã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;57H[?12l[?25h[?25lv[ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;58H[?12l[?25h[?25l[aã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;59H[?12l[?25h[?25lagã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;60H[?12l[?25h[?25laã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;80H[K[11;59H[?12l[?25h[?25l[46m[[ma[46m][mã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[11;60H[?12l[?25h[?25l[a][12;26H[?12l[?25h[13;26H[?25l   */[13;25H[K[13;21H[?12l[?25h[?25l å®Ÿå¼•æ•°  */[?12l[?25h[?25lãŒ  */[?12l[?25h[?25lç„¡ã„  */[?12l[?25h[?25læ™‚ã‚„  */[?12l[?25h[?25læ–‡å­—åˆ—  */[?12l[?25h[?25ls  */[?12l[?25h[?25lst  */[?12l[?25h[?25ltr  */[?12l[?25h[?25lrã«  */[?12l[?25h[?25lä¸€è‡´ã™ã‚‹  */[?12l[?25h[?25la  */[?12l[?25h[?25lar  */[?12l[?25h[?25lrg  */[?12l[?25h[?25lgv  */[?12l[?25h[?25lv[  */[?12l[?25h[?25l[a  */[?12l[?25h[?25l[46m[[ma[46m][m  */[?12l[?25h[?25l[a]ãŒ  */[?12l[?25h[?25lç„¡ã„æ™‚  */[?12l[?25h[?25lã«  */[?12l[?25h[?25lã“ã“ã«æ¥ã‚‹  */[?12l[?25h[14;24H[15;5H[16;83H[19;13H[20;77H[21;61H[22;30H[23;46H[24;37H[25;70H[26;38H[27;83H[28;35H[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");[27;73H[?12l[?25h[28;39H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[27;83H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[26;83H[?12l[?25h[28;33H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;35H[?12l[?25h[27;66H[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 [46m([moff[46m)[m\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[27;78H(off)
[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;83H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[28;1H[93m    [m; /* atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[27;83H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[46m[[mi + 1[46m]][m[27;1H[93m    [m); /* train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, a[28;1H[94m@                                                                                       [26;83H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[25;82H[i + 1]][26;1H[93m 
678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;83H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[28;1H[93m    [mrgv[i + 1]); /* read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;83H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[27;83H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[28;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;83H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[28;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;83H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m683 [m  if (cbow) alpha = 0.05;[?12l[?25h[26;83H[24;83H[22;83H[20;83H[18;83H[?25l[16;82H[46m[[mi + 1[46m]][m[17;1H[93m [16;83H[?12l[?25h[?25l[m[i + 1]][17;1H[93m [14;83H[?12l[?25h[13;30H[14;83H[m + [?25l[46m[[mi + 1[46m][m))[15;1H[93m [14;87H[?12l[?25h[?25l[m[14;76H[46m([margv[i + 1][46m))[m[15;1H[93m [14;88H[?12l[?25h[?25l[m[46m))[m[15;1H[93m    [?12l[?25h[?25l[m[14;76H([11C))[15;1H[93m    [m;[?12l[?25h /* [?25l å®Ÿatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;12H[?12l[?25h[?25lå¼•æ•°atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;16H[?12l[?25h[?25l"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;17H[?12l[?25h[?25l""atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;18H[?12l[?25h[?25l"-"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;18H[?12l[?25h[?25l-s"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;19H[?12l[?25h[?25lsi"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;20H[?12l[?25h[?25liz"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;21H[?12l[?25h[?25lze"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;22H[?12l[?25h"[?25l"gatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;24H[?12l[?25h[?25laatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;25H[?12l[?25h[?25latoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;78H[K[15;24H[?12l[?25h[?25l"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;77H[K[15;23H[?12l[?25h[?25l"ãŒatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;25H[?12l[?25h[?25l"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;77H[K[15;23H[?12l[?25h[?25lãŒ"-size"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;18H[?12l[?25h[?25lè¤‡æ•°"-size"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;22H[?12l[?25h[?25lã‚ã‚Š"-size"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;26H[?12l[?25h[?25lï¼Œ"-size"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;28H[?12l[?25h[?25l[16;28r[16;1H[L[1;29r[15;28Hã‹ã¤"-size"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥ [16;1H[93m    [m) */[15;32H[?12l[?25h"-size"[?25l"ãŒatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£ [16;1H[93m    [må…¥) */[15;41H[?12l[?25h[?25læœ€å¾Œã®atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sii[16;1H[93m    [mzeã«ä»£å…¥) */[15;47H[?12l[?25h[?25lå®Ÿå¼•æ•°atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layy[16;1H[93m    [mer1_sizeã«ä»£å…¥) */[15;53H[?12l[?25h[?25lã§ãªã„atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[16;1H[93m    [mã—ã¦layer1_sizeã«ä»£å…¥) */[15;59H[?12l[?25h[?25læ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«[94m>>[m[16;1H[93m    [må¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[15;63H[?12l[?25h[18;45H[?25l[18;27H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][18;26H[?12l[?25h [?25l å®Ÿå¼•æ•°ãŒtrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;19H[?12l[?25h[?25lè¤‡æ•°ãŒtrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;25H[?12l[?25h[15;24H[13;30H[15;24H[2C[2C[?25lã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰[94m>>[m[16;1H[93m    [mæ›ã—ã¦layer1_sizeã«ä»£å…¥) */[16;32H[K[15;26H[?12l[?25h[13;30H[15;26H[18;26H[?25lè¤‡æ•°train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;29H[?12l[?25h[15;28H[13;30H[15;28H[2C[?25lã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[16;1H[93m    [mã—ã¦layer1_sizeã«ä»£å…¥) */[16;30H[K[15;24H[?12l[?25h[?25lã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[16;1H[93m [m[3Cã¦layer1_sizeã«ä»£å…¥) */[16;28H[K[15;22H[?12l[?25h[18;21H[20;22H[18;21H[2C[2C[2C[2C[?25lã‹ã¤train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;33H[?12l[?25h[?25l"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;34H[?12l[?25h[?25l""train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;35H[?12l[?25h[?25l"-"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;35H[?12l[?25h[?25l-t"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;36H[?12l[?25h[?25ltr"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;37H[?12l[?25h[?25lra"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;38H[?12l[?25h[?25lai"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;39H[?12l[?25h[?25lin"train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;40H[?12l[?25h"[?25l"ãŒtrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;43H[?12l[?25h[?25læœ€å¾Œã®train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;49H[?12l[?25h[?25lå®Ÿå¼•æ•°train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;55H[?12l[?25h[?25l[19;28r[19;1H[L[1;29r[18;55Hã§ãªã„æ™‚ã«train_fileã«argv[i + 1][94m>>[m[19;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [18;65H[?12l[?25h[21;60H[18;65H[21;60H[?25l[m[21;42H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][21;41H[?12l[?25h[?25l å®Ÿå¼•æ•°ãŒsave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;29H[?12l[?25h[?25lè¤‡æ•°save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;33H[?12l[?25h[?25lã‹ã¤save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;37H[?12l[?25h[?25l"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;38H[?12l[?25h"[?25l""save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;39H[?12l[?25h[?25l"^"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;39H[?12l[?25h[?25l^s"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;40H[?12l[?25h[?25l^"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;79H[K[21;39H[?12l[?25h[?25l""save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;78H[K[21;38H[?12l[?25h[?25l"-"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;39H[?12l[?25h[?25l-s"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;40H[?12l[?25h[?25lsa"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;41H[?12l[?25h[?25lav"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;42H[?12l[?25h[?25lve"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;43H[?12l[?25h[?25le-"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;44H[?12l[?25h[?25l-v"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;45H[?12l[?25h[?25lvo"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;46H[?12l[?25h[?25loc"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;47H[?12l[?25h[?25lca"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;48H[?12l[?25h[?25lab"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;49H[?12l[?25h"[?25l[22;28r[22;1H[L[1;29r[21;49H"gsave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ **[22;1H[93m    [m/[21;51H[?12l[?25h[?25l[20;28r[28;1H
[1;29r[20;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[21;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [21;50H[?12l[?25h[?25l[22;28r[m[22;1H[L[1;29r[21;49H"ãŒsave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [22;1H[93m    [m*/[21;52H[?12l[?25h[?25læœ€å¾Œã®save_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[22;1H[93m    [mã‚³ãƒ”ãƒ¼ */[21;58H[?12l[?25h[?25lå®Ÿå¼•æ•°save_vocab_fileã«argv[i ++[22;1H[93m    [m 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;64H[?12l[?25h[?25lã§ãªã„æ™‚ã«save_vocab_filee[22;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;74H[?12l[?25h[24;60H[?25l[24;42H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][24;41H[?12l[?25h[21;29H[18;29H[2C[?25lè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’[94m>>[m[19;1H[93m [m[3Cã‚³ãƒ”ãƒ¼ */[19;14H[K[18;23H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³[94m>>[m[19;1H[93m [m[3Cãƒ”ãƒ¼ */[19;12H[K[18;21H[?12l[?25h[?25læ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[19;1H[93m [m[3Cãƒ¼ */[19;10H[K[18;19H[?12l[?25h[21;19H[24;19H[21;19H* [24;21H[?25l å®Ÿå¼•æ•°ãŒread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;29H[?12l[?25h[?25lè¤‡æ•°read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;33H[?12l[?25h[?25lã‹ã¤read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;37H[?12l[?25h[?25l"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;38H[?12l[?25h[?25l""read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;39H[?12l[?25h[?25l"-"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;39H[?12l[?25h[?25l-v"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;40H[?12l[?25h[?25lve"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;41H[?12l[?25h[?25lv"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;80H[K[24;40H[?12l[?25h[?25l-"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;79H[K[24;39H[?12l[?25h[?25l-r"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;40H[?12l[?25h[?25lre"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;41H[?12l[?25h[?25lea"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;42H[?12l[?25h[?25lac"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;43H[?12l[?25h[?25la"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;82H[K[24;42H[?12l[?25h[?25lad"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;43H[?12l[?25h[?25ld-"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;44H[?12l[?25h[?25l-v"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;45H[?12l[?25h[?25lvo"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;46H[?12l[?25h[?25loc"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;47H[?12l[?25h[?25lca"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;48H[?12l[?25h[?25lab"read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;49H[?12l[?25h"[?25l[25;28r[25;1H[L[1;29r[24;49H"ãŒread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [25;1H[93m    [m*/


[94m@                                                                                       [24;52H[?12l[?25h[?25l[mæœ€å¾Œã®read_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[25;1H[93m    [mã‚³ãƒ”ãƒ¼ */[24;58H[?12l[?25h[29;1H[K[24;56H[?25l[?12l[?25h[21;56H[18;55H[15;55H[13;29H[12;29H[11;25H[10;37H[9;17H[8;56H[6;32H[5;20H[3;34H[2;20H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;1H[94m@                                                                                       [1;63H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;87H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;35H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;74H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;14H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;45H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;76H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;56H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */[28;1H[94m@                                                                                       [1;86H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [2;1H[93m    [m1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨[3;1H[93m    [mï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[2;56H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[28;1H[94m@                                                                                       [1;51H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[6;9H}[1;28H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[3;28H{[8;9H}[2;13H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[2;40H[3;5H[4;74H[5;12H[7;13H[?25l[8;28H[46m{[13;9H}[8;28H[?12l[?25h[?25l[m{[13;9H}[9;51H[?12l[?25h[11;56H[?25l[8;28H[46m{[13;9H}[?12l[?25h[?25l[m[8;28H{[13;9H}[14;80H[?12l[?25h[15;25H[16;86H[17;23H[18;5H[20;56H[22;12H[23;76H[24;60H[25;29H[26;45H[27;36H[28;69H[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");[27;72H[?12l[?25h[28;38H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[27;14H[?12l[?25h[28;32H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;34H[?12l[?25h[27;65H[28;39H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;41H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;20H[?12l[?25h[28;34H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m    [mã¦layer1_sizeã«ä»£å…¥) */[27;55H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[28;1H[93m    [mãƒ¼ */[27;55H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«save_vocab_filee[28;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;56H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®read_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[28;1H[93m    [mã‚³ãƒ”ãƒ¼ */[27;56H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[27;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* ar[28;1H[94m@                                                                                       [27;49H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[28;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[?12l[?25h[26;49H[24;56H[26;49H[28;43H[26;49H[28;43H[26;49H[24;56H[26;49H[?25l[26;11H[46m[[mi + 1[46m][?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][26;11H[?12l[?25h[?25l[m[i + 1][26;10H[?12l[?25h[25;88H[?25l[25;73H[46m([11C)[m; //[26;1H[93m [25;85H[?12l[?25h[?25l[m[25;73H(argv[46m[[mi + 1[46m][m); //[26;1H[93m [25;84H[?12l[?25h[?25l[m[i + 1]); //[26;1H[93m [25;83H[?12l[?25h[?25l[m[46m[[mi + 1[46m][m); //[26;1H[93m [25;78H[?12l[?25h[?25l[m[i + 1]); //[26;1H[93m [25;77H[?12l[?25h[?25l[m[46m([11C)[m; //[26;1H[93m [25;73H[?12l[?25h[?25l[m([11C); //[26;1H[93m [25;72H[?12l[?25h[?25l[m[25;10H[46m([47C)[m[29C//[26;1H[93m [25;58H[?12l[?25h[?25l[m[25;10H([47C)[29C//[26;1H[93m [25;57H[?12l[?25h[?25l[m[25;10H[46m([47C)[m[29C//[26;1H[93m [25;58H[?12l[?25h[?25l[m[25;10H([47C)[29C//[26;1H[93m [23;58H[?12l[?25h[20;58H[17;58H[14;58H[11;58H[10;29H[9;29H[8;25H[7;37H[6;17H[4;58H[3;32H[1;58H[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m667 [m    printf("\t-cbow <int>\n");[28;1H[94m@                                                                                       [1;34H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[2;1H[93m    [maining data\n");[28;1H[94m@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;1H[94m@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;35H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;45H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;57H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[1;57H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */[28;1H[94m@                                                                                       [1;58H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[2;58H[3;25H[4;58H[5;23H[6;5H[7;57H[10;12H[7;57H[6;5H[5;23H[4;58H[3;25H[2;58H[1;9H[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [2;1H[93m    [m1ã®æ™‚ã«å®Ÿå¼•æ•°strç„¡ã„ã¨åˆ¤æ–­ã—å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ [3;1H[93m    [mï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[1;58H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[28;1H[94m@                                                                                       [1;51H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[6;9H}[1;28H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp[46m([mstr, argv[a][46m)[m) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[3;28H{[8;9H}[1;58H[?12l[?25h[?25l[1;45H([12C)[29C[94m>>[m[2;1H[93m [m[3;28H[46m{[8;9H}[3;28H[?12l[?25h[?25l[m{[8;9H}[4;51H[?12l[?25h[5;58H[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[9;58H[?12l[?25h[10;25H[11;58H[10;25H[9;58H[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[5;58H[?12l[?25h[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[9;58H[?12l[?25h[10;25H[11;58H[10;25H[9;58H[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[9;58H[?12l[?25h[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[5;58H[?12l[?25h[2C[2C[2Cfor[2C[2C[2C[2C[2Ca == argc -[6;5H1[2C[2C[2C[2C[2C[2Cstr[2C[2C[2C[2C[2C[2C[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[5;9H[?12l[?25h[?25l[29;1H[1m-- INSERT --[5;10H[?12l[?25h[m exi[?25lt[46m([m1[46m)[m[70C  [6;1H[93m [m[86C  [7;1H[93m [5;15H[?12l[?25h[?25l[m[73C  [6;1H[93m [m[86C  [7;1H[93m [5;16H[?12l[?25h[?25l[m[72C  [6;1H[93m [m[86C  [7;1H[93m [5;17H[?12l[?25h[?25l[m[71C  [6;1H[93m [m[86C  [7;1H[93m [5;18H[?12l[?25h[?25l[m(1)[70C  [6;1H[93m [m[86C  [7;1H[93m [5;19H[?12l[?25h[m /* 1 <= a < argc[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][m[30C  [6;1H[93m [m[86C  [7;1H[93m [5;55H[?12l[?25h[?25l[m[33C  [6;1H[93m [m[86C  [7;1H[93m [5;56H[?12l[?25h[?25l[m[32C  [6;1H[93m [m[86C  [7;1H[93m [5;57H[?12l[?25h[?25l[m[31C  [6;1H[93m [m[86C  [7;1H[93m [5;58H[?12l[?25h[?25l[m[a][30C  [6;1H[93m [m[86C  [7;1H[93m [5;60H[?12l[?25h[2C[2C[mfor[2C[2C[2C[2C[2Ca == argc -[6;5H1[2C[2C[2C[2C[2C[2Cstr[2C[2C[2C[2C[2C[2C[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ [7;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;30H[K[6;31H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿ [7;1H[93m [m[3Cå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;28H[K[6;29H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼• [7;1H[93m    [mæ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[7;26H[K[6;27H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•° [7;1H[93m    [mã®æœ€å¾ŒãŒstrã®æ™‚) *[7;24H[K[6;25H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã® [7;1H[93m    [mæœ€å¾ŒãŒstrã®æ™‚) *[7;22H[K[6;23H[?12l[?25h[?25lrå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€ [7;1H[93m    [må¾ŒãŒstrã®æ™‚) *[7;20H[K[6;21H[?12l[?25h[?25ltå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€[94m>>[m[7;1H[93m [6;20H[?12l[?25h[?25l[mså‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾Œ [7;1H[93m    [mãŒstrã®æ™‚) *[7;18H[K[6;19H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾Œ[94m>>[m[7;1H[93m [6;18H[?12l[?25h[?25l[må‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒss[7;1H[93m    [mtrã®æ™‚) *[7;14H[K[6;16H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrr[7;1H[93m    [mã®æ™‚) *[7;13H[K[6;14H[?12l[?25h[?25lå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã® [7;1H[93m    [mæ™‚) *[7;11H[K[6;12H[?12l[?25h[?25lãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°ã®[94m>>[m[7;1H[93m [m[3Cæœ€å¾ŒãŒstrã®æ™‚) *[6;22H[?12l[?25h[?25lã‚’å‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿå¼•æ•°[94m>>[m[7;1H[93m    [mã®æœ€å¾ŒãŒstrã®æ™‚) *[6;24H[?12l[?25h[?25lè¡¨ç¤ºå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œå®Ÿ[94m>>[m[7;1H[93m    [må¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[6;28H[?12l[?25h[?25lï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[7;1H[93m [m[3Cå®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[6;30H[?12l[?25h[?25l[3;28H[46m{[8;9H}[?12l[?25h[?25l[m[3;28H{[8;9H}[9;81H[?12l[?25h[10;26H[11;87H[12;24H[13;5H[15;30H[17;13H[18;77H[19;61H[20;30H[21;46H[22;37H[23;70H[24;38H[25;87H[26;35H[27;66H[28;37H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");[27;73H[?12l[?25h[28;39H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[28;1H[93m    [m frequency in the training data\n");[28;30H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[27;15H[?12l[?25h[28;33H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;35H[?12l[?25h[27;66H[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[27;13H[25;40H[24;66H[23;35H[22;56H[21;38H[20;24H[18;39H[17;75H[16;33H[15;15H[13;30H[11;39H[10;73H[9;37H[8;66H[7;35H[6;87H[5;38H[4;70H[3;37H[2;46H[1;30H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;77H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;30H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[3;30H[5;13H[6;77H[7;61H[8;30H[9;46H[10;37H[11;70H[12;38H[13;87H[14;35H[15;66H[16;37H[17;73H[18;39H[20;30H[22;15H[23;33H[24;75H[25;39H[27;24H[28;38H[?25l[1;28r[m[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;35H[?12l[?25h[27;66H[28;40H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[28;30H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;42H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[27;21H[?12l[?25h[28;35H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[28;30H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m    [mã¦layer1_sizeã«ä»£å…¥) */[27;30H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[28;1H[93m    [mãƒ¼ */[27;30H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«save_vocab_filee[28;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;29H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®read_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[28;1H[93m    [mã‚³ãƒ”ãƒ¼ */[27;29H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[28;1H[93m    [m; /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;30H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[27;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */
[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* ar[28;1H[94m@                                                                                       [27;29H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[28;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[28;29H[?12l[?25h[26;29H[24;30H[21;29H[18;29H[15;30H[12;30H[10;30H[12;30Hze"[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[15;51H[18;50H[15;51H[2C[2C[2C[?25lã‹ã¤ã«train_fileã«argv[i + 1]ã‚’[94m>>[m[16;1H[93m [m[3Cã‚³ãƒ”ãƒ¼ */[15;61H[?12l[?25h[?25lå‰ã®ã«train_fileã«argv[i + 11[16;1H[93m    [m]ã‚’ã‚³ãƒ”ãƒ¼ */[15;65H[?12l[?25h[?25léƒ¨åˆ†ã§ã«train_fileã«argvv[16;1H[93m    [m[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;71H[?12l[?25h[?25lã€€ã«train_fileã«arr[16;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;73H[?12l[?25h[?25lã«train_fileã«argvv[16;1H[93m    [m[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;23H[K[15;71H[?12l[?25h[?25leã«train_fileã«argg[16;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;72H[?12l[?25h[?25lexã«train_fileã«arr[16;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;73H[?12l[?25h[?25lxiã«train_fileã«aa[16;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;74H[?12l[?25h[?25litã«train_fileã« [16;1H[93m    [margv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;75H[?12l[?25h[?25lt(ã«train_file[94m>>[m[16;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;76H[?12l[?25h[?25l(1ã«train_filee[16;1H[93m [15;77H[?12l[?25h[?25l[m[46m([m1[46m)[mã«train_fill[16;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;78H[?12l[?25h[?25l(1)ã—ãªã„ã«traa[16;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;84H[?12l[?25h[?25læ™‚ã«tt[16;1H[93m    [mrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;86H[?12l[?25h[18;86H[?25lilee[19;1H[93m [m[21;79H[46m[[mi + 1[46m][m[2C[94m>>[m[22;1H[93m [21;86H[?12l[?25h[?25l[m[21;79H[i + 1][2C[94m>>[m[22;1H[93m [18;86H[?12l[?25h[?25l[mã‹ã¤ã«save_vocab__[19;1H[93m    [mfileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;76H[?12l[?25h[?25lå‰ã®ã«save_voo[19;1H[93m    [mcab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;80H[?12l[?25h[15;80H[?25l[46m([m1[46m)[m[10Ctt[16;1H[93m [15;78H[?12l[?25h[?25l[m[10Ctt[16;1H[93m [15;77H[?12l[?25h[?25l[m[11Ctt[16;1H[93m [15;76H[?12l[?25h[?25l[m[12Ctt[16;1H[93m [15;75H[?12l[?25h[?25l[m(1)[10Ctt[16;1H[93m [15;74H[?12l[?25h[?25l[mã§exit(1)ã—ãªã„æ™‚ã«traa[16;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;36H[K[15;67H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«trainn[16;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;34H[K[15;65H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[16;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;67H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«trainn[16;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;34H[K[15;61H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«tt[16;1H[93m    [mrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;65H[?12l[?25h[18;64H[21;65H[18;64H[2C[2C[2C[2C[2C[2C[?25lä»¥å‰å‰ã®ã«savv[19;1H[93m    [me_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;80H[?12l[?25h[?25lã®ã«save__[19;1H[93m    [mvocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;39H[K[18;78H[?12l[?25h[2C[2C[?25lè¡Œã§ã«ss[19;1H[93m    [mave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;86H[?12l[?25h[?25leã«[19;4H[93m [msave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[18;87H[?12l[?25h[?25lei[94m>>[m[19;1H[93m    [mã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;5H[?12l[?25h[?25l[18;86Heã«[19;4H[93m [msave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;44H[K[18;87H[?12l[?25h[?25lex[94m>>[m[19;1H[93m    [mã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;5H[?12l[?25h[?25l[18;87Hxii[19;1H[93m    [?12l[?25h[?25l [mtã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;6H[?12l[?25h[?25lt(ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;7H[?12l[?25h[?25l(1ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;8H[?12l[?25h[?25l[46m([m1[46m)[mã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;9H[?12l[?25h[?25l(1)ã—ãªã„ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;15H[?12l[?25h[?25læ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[19;17H[?12l[?25h[22;14H[19;17H[22;14H[19;17H[22;14H[?25l[21;79H[46m[[mi + 1[46m][m[2C[94m>>[m[22;1H[93m [21;86H[?12l[?25h[?25l[m[2C[94m>>[m[22;1H[93m [21;85H[?12l[?25h[?25l[m[i + 1][2C[94m>>[m[22;1H[93m [21;84H[?12l[?25h[?25l[m[46m[[mi + 1[46m][m[2C[94m>>[m[22;1H[93m [21;80H[?12l[?25h[?25l[m[8C[94m>>[m[22;1H[93m [21;79H[?12l[?25h[?25l[m[i + 1][2C[94m>>[m[22;1H[93m [21;78H[?12l[?25h[?25l[må®Ÿå¼•æ•°read_vocab_fileã«argv[i ++[22;1H[93m    [m 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;64H[?12l[?25h[?25lã§read_vocab_fileã«argv[ii[22;1H[93m [m[3C + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;66H[?12l[?25h[?25lãªã„æ™‚read_vocab_fileã«[22;4H[93m [margv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;72H[?12l[?25h[?25lã‹ã¤read_vocab_fii[22;1H[93m    [mleã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;76H[?12l[?25h[?25lä»¥å‰ã®read_voo[22;1H[93m    [mcab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;82H[?12l[?25h[?25lè¡Œã§reaa[22;1H[93m    [md_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;86H[?12l[?25h[?25leree[22;1H[93m    [mad_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;87H[?12l[?25h[?25lexrr[22;1H[93m    [mead_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[21;88H[?12l[?25h[?25lxii[22;1H[93m    [mread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;5H[?12l[?25h[?25l[93m [mtread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;6H[?12l[?25h[?25lt(read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;7H[?12l[?25h[?25l(1read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;8H[?12l[?25h[?25l[46m([m1[46m)[mread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;9H[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[22;19H[?12l[?25h[24;57H[?25l[24;14H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][24;13H[?12l[?25h[?25l å®Ÿå°æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;16H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;61H[K[24;14H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;59H[K[24;12H[?12l[?25h[?25l argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;57H[K[24;10H[?12l[?25h[?25l å®Ÿå¼•æ•°ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;18H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;26H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;27H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;28H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;28H[?12l[?25h[?25l-d"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;29H[?12l[?25h[?25lde"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;30H[?12l[?25h[?25leu"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;31H[?12l[?25h[?25le"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;78H[K[24;30H[?12l[?25h[?25leb"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;31H[?12l[?25h[?25lbu"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;32H[?12l[?25h[?25lug"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;33H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;36H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;42H[?12l[?25h[?25l[25;28r[25;1H[L[1;29r[24;42Hå®Ÿå¼•æ•°ã§ãªã„æ™‚argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debugg[25;1H[93m    [m_modeã«ä»£å…¥ */


[94m@                                                                                       [24;56H[?12l[?25h[?25l[mã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦dd[25;1H[93m    [mebug_modeã«ä»£å…¥ */[24;60H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’intå‹[94m>>[m[25;1H[93m    [mã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;70H[?12l[?25h[?25leargv[i + 1]ã‚’intå‹[24;71H[?12l[?25h[?25lexargv[i + 1]ã‚’int[94m>>[m[25;1H[93m    [må‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;72H[?12l[?25h[?25lxiargv[i + 1]ã‚’intt[25;1H[93m [24;73H[?12l[?25h[?25l[mitargv[i + 1]ã‚’inn[25;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;74H[?12l[?25h[?25lt(argv[i + 1]ã‚’ii[25;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;75H[?12l[?25h[?25l(1argv[i + 1]ã‚’[25;4H[93m [mintå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;76H[?12l[?25h[?25l[46m([m1[46m)[margv[i + 1][94m>>[m[25;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;77H[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«arr[25;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[24;87H[?12l[?25h[27;50H[?25l[27;11H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;10H[?12l[?25h* [?25l å®Ÿå¼•æ•°ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;15H[?12l[?25h[?25lè¤‡æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;19H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;23H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;24H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;25H[?12l[?25h[?25l"^"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;25H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;68H[K[27;24H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;25H[?12l[?25h[?25l-b"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;26H[?12l[?25h[?25lbi"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;27H[?12l[?25h[?25lin"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;28H[?12l[?25h[?25lna"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;29H[?12l[?25h[?25lar"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;30H[?12l[?25h[?25lry"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;31H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;34H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;40H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„æ™‚argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binary[94m>>[m[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;54H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binn[28;1H[93m    [maryã«ä»£å…¥ */[27;58H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’intå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;68H[?12l[?25h[?25leargv[i + 1]ã‚’intå‹ã« [28;1H[93m [27;69H[?12l[?25h[?25l[mexargv[i + 1]ã‚’intå‹[94m>>[m[28;1H[93m    [mã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;70H[?12l[?25h[?25lxiargv[i + 1]ã‚’intå‹ [28;1H[93m [27;71H[?12l[?25h[?25l[mitargv[i + 1]ã‚’int[94m>>[m[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;72H[?12l[?25h[?25lt(argv[i + 1]ã‚’intt[28;1H[93m [27;73H[?12l[?25h[?25l[m(1argv[i + 1]ã‚’inn[28;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;74H[?12l[?25h[?25l[46m([m1[46m)[margv[i + 1]ã‚’ii[28;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;75H[?12l[?25h[?25l(1)ã—ãªã„argv[i ++[28;1H[93m    [m 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;81H[?12l[?25h[?25læ™‚ã«argvv[28;1H[93m    [m[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[27;85H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* arr[28;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m683 [m  if (cbow) alpha = 0.05;[?12l[?25h[27;44H[?25l[27;7H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;6H[?12l[?25h[26;88H [?25l å®Ÿ[27;4H[93m [må¼•æ•°ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;11H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;19H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;20H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;21H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;21H[?12l[?25h[?25l-c"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;22H[?12l[?25h[?25lcb"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;23H[?12l[?25h[?25lbo"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;24H[?12l[?25h[?25low"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;25H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;28H[?12l[?25h[?25læœ€å¾Œã®å¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;38H[?12l[?25h[?25lã§ãªã„æ™‚argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;46H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥  [28;1H[93m    [m*/[28;7H[K[27;50H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cc[28;1H[93m    [mbowã«ä»£å…¥ */[27;60H[?12l[?25h[?25leargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦[28;4H[93m [mcbowã«ä»£å…¥ */[27;61H[?12l[?25h[?25lexargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m    [mã¦cbowã«ä»£å…¥ */[27;62H[?12l[?25h[?25lxiargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[27;63H[?12l[?25h[?25litargv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[28;1H[93m [m[3Cã—ã¦cbowã«ä»£å…¥ */[27;64H[?12l[?25h[?25lt(argv[i + 1]ã‚’intå‹ã«å¤‰æ›[27;65H[?12l[?25h[?25l(1argv[i + 1]ã‚’intå‹ã«å¤‰[94m>>[m[28;1H[93m    [mæ›ã—ã¦cbowã«ä»£å…¥ */[27;66H[?12l[?25h[?25l19argv[i + 1]ã‚’intå‹ã«å¤‰[27;67H[?12l[?25h[?25l1argv[i + 1]ã‚’intå‹ã«å¤‰[94m>>[m[28;1H[93m [27;66H[?12l[?25h[?25l[m[46m([m1[46m)[margv[i + 1]ã‚’intå‹ã«å¤‰[27;67H[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«argv[i + 1][94m>>[m[28;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[27;77H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m683 [m  if (cbow) alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*[94m@                                                                                       [27;30H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [28;1H[93m    [margv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[?12l[?25h[26;30H[28;50H[?25l[28;9H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][28;8H[?12l[?25h[?25l[93m [må®Ÿå¼•æ•°ãŒargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;13H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;21H[?12l[?25h[?25l"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;22H[?12l[?25h[?25l""argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;23H[?12l[?25h[?25l"-"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;23H[?12l[?25h[?25l-a"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;24H[?12l[?25h[?25lal"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;25H[?12l[?25h[?25llp"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;26H[?12l[?25h[?25lph"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;27H[?12l[?25h[?25lha"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;28H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;31H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;37H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„æ™‚argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;28r[m[28;1H
[1;29r[26;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [27;1H[93m    [må®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã« [28;1H[93m    [mä»£å…¥ */[27;51H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alpp[28;1H[93m    [mhaã«ä»£å…¥ */[27;55H[?12l[?25h[2C[?25lã‹ã¤argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaa[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;49H[?12l[?25h[2C[2C[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’doubleå‹ã«å¤‰[94m>>[m[28;1H[93m    [mæ›ã—ã¦alphaã«ä»£å…¥ */[27;63H[?12l[?25h[?25leargv[i + 1]ã‚’doubleå‹ã«å¤‰ [28;1H[93m [27;64H[?12l[?25h[?25l[mexargv[i + 1]ã‚’doubleå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;65H[?12l[?25h[?25lxiargv[i + 1]ã‚’doubleå‹ã« [28;1H[93m [27;66H[?12l[?25h[?25l[mitargv[i + 1]ã‚’doubleå‹[94m>>[m[28;1H[93m    [mã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;67H[?12l[?25h[?25lt(argv[i + 1]ã‚’doubleå‹ [28;1H[93m [27;68H[?12l[?25h[?25l[m(1argv[i + 1]ã‚’double[94m>>[m[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;69H[?12l[?25h[?25l[46m([m1[46m)[margv[i + 1]ã‚’doublee[28;1H[93m [27;70H[?12l[?25h[?25l[m(1)ã—ãªã„æ™‚ã«argv[i +  [28;1H[93m    [m1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;80H[?12l[?25h[25;30H[23;80H[?25l[46m([m1[46m)[m[21C[94m>>[m[24;1H[93m [23;67H[?12l[?25h[?25l[m[21C[94m>>[m[24;1H[93m [23;66H[?12l[?25h[?25l[m[22C[94m>>[m[24;1H[93m [23;65H[?12l[?25h[?25l[m[23C[94m>>[m[24;1H[93m [23;64H[?12l[?25h[?25l[m(1)[21C[94m>>[m[24;1H[93m [23;63H[?12l[?25h[?25l[mã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[24;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[24;33H[K[23;44H[?12l[?25h[20;44H[2C[2C[2C[2C[2C[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[ii[21;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[21;42H[K[20;52H[?12l[?25h[17;52H[14;52H[17;52H[2C[2C[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argvv[18;1H[93m    [m[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[18;48H[K[17;54H[?12l[?25h[14;54H[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(([15;1H[93m    [m1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[15;56H[K[14;70H[?12l[?25h[11;70H[8;69H[11;70H[2C[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(([12;1H[93m    [m1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[12;56H[K[11;70H[?12l[?25h[8;69H[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[9;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[9;36H[K[8;55H[?12l[?25h[5;55H[8;53H[11;52H[14;52H[17;52H[20;52H[23;52H[25;30H[27;53H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [28;1H[93m    [m1]); /* output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); //[26;1H[93m    [m* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */
[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[28;1H[93m    [m* argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[26;50H[?12l[?25h[24;48H[21;53H[24;48H[?25l[24;30H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][24;29H[?12l[?25h[?25l å®Ÿå¼•æ•°ãŒoutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;21H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;29H[?12l[?25h[?25l"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;30H[?12l[?25h[?25l""output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;31H[?12l[?25h[?25l"-"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;31H[?12l[?25h[?25l-o"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;32H[?12l[?25h[?25lou"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;33H[?12l[?25h[?25lut"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;34H[?12l[?25h[?25ltp"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;35H[?12l[?25h[?25lpu"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;36H[?12l[?25h[?25lug"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;37H[?12l[?25h[?25lu"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;72H[K[24;36H[?12l[?25h[?25lut"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;37H[?12l[?25h"[?25l"goutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;39H[?12l[?25h[?25lgaoutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;40H[?12l[?25h[?25lgoutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;74H[K[24;39H[?12l[?25h[?25l"output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;73H[K[24;38H[?12l[?25h[?25l"ãŒoutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;40H[?12l[?25h[?25læœ€å¾Œã®output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;46H[?12l[?25h[?25l[25;28r[25;1H[L[1;29r[24;46Hå®Ÿå¼•æ•°ã§ãªã„output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[25;1H[93m    [mãƒ¼ */


[94m@                                                                                       [24;58H[?12l[?25h[?25l[mã‹ã¤output_fileã«argv[i + 1]ã‚’[94m>>[m[25;1H[93m [m[3Cã‚³ãƒ”ãƒ¼ */[24;62H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§output_fileã«argvv[25;1H[93m    [m[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;72H[?12l[?25h[?25leoutput_fileã«argg[25;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;73H[?12l[?25h[?25lexoutput_fileã«arr[25;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;74H[?12l[?25h[?25lxioutput_fileã«aa[25;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;75H[?12l[?25h[?25litoutput_fileã«[25;4H[93m [margv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;76H[?12l[?25h[?25lt(output_file[94m>>[m[25;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;77H[?12l[?25h[?25l(1output_filee[25;1H[93m [24;78H[?12l[?25h[?25l[m[46m([m1[46m)[moutput_fill[25;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[24;79H[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«[25;4H[93m [moutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[25;5H[?12l[?25h[27;50H[?25l[27;11H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;10H[?12l[?25h[?25l å®Ÿå¼•æ•°ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;15H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;23H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;24H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;25H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;25H[?12l[?25h[?25l-w"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;26H[?12l[?25h[?25lwi"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;27H[?12l[?25h[?25lin"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;28H[?12l[?25h[?25lnd"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;29H[?12l[?25h[?25ldo"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;30H[?12l[?25h[?25low"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;31H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;34H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;40H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[28;12H[K[27;52H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windoo[28;1H[93m    [mwã«ä»£å…¥ */[27;56H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’intå‹ã«å¤‰[94m>>[m[28;1H[93m    [mæ›ã—ã¦windowã«ä»£å…¥ */[27;66H[?12l[?25h[?25leargv[i + 1]ã‚’intå‹ã«å¤‰ [28;1H[93m [27;67H[?12l[?25h[?25l[mexargv[i + 1]ã‚’intå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;68H[?12l[?25h[?25lxiargv[i + 1]ã‚’intå‹ã« [28;1H[93m [27;69H[?12l[?25h[?25l[mitargv[i + 1]ã‚’intå‹[94m>>[m[28;1H[93m    [mã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;70H[?12l[?25h[?25lt(argv[i + 1]ã‚’intå‹ [28;1H[93m [27;71H[?12l[?25h[?25l[m(1argv[i + 1]ã‚’int[94m>>[m[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;72H[?12l[?25h[?25l[46m([m1[46m)[margv[i + 1]ã‚’intt[28;1H[93m [27;73H[?12l[?25h[?25l[m(1)ã—ãªã„æ™‚ã«argv[ii[28;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;83H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[27;1H[93m    [m* argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* argv[i[28;1H[94m@                                                                                       [27;53H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[25;1H[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* argv[ii[26;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]][28;1H[93m    [m); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[26;38H[?12l[?25h[24;53H[?25l[24;11H[46m[[mi + 1[46m][?12l[?25h[?25l[m[24;11H[i + 1][21;17H[?12l[?25h[18;17H[15;17H[13;30H[11;17H[8;17H[5;18H[2;18H[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(([3;1H[93m    [m1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [2;18H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][2;1H[93m    [m); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[3;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[2;17H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[2;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[3;1H[93m    [mã¦layer1_sizeã«ä»£å…¥) */[2;18H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m675 [m  read_vocab_file[0] = 0;[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;30H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[2;30H[4;18H[7;17H[10;18H[13;18H[16;18H[19;17H[22;17H[24;30H[26;17H[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [27;1H[93m    [m1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«[28;1H[93m    [moutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;17H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[ii[28;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;17H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[27;1H[93m    [m* argv[46m[[mi + 1[46m][mã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* argv[i[28;1H[94m@                                                                                       [27;18H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[24;11H[i + 1]
[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* argv[ii[26;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */
[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]][28;1H[93m    [m); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[26;17H[?12l[?25h[28;18H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [27;1H[93m    [m1]); /* argv[46m[[mi + 1[46m][mã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* ar[28;1H[94m@                                                                                       [27;18H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[24;17H[i + 1]
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* arr[26;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [28;1H[93m    [m1]); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[26;18H[?12l[?25h[?25l[28;17H[46m[[mi + 1[46m][?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[25;17H[i + 1]
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[27;1H[93m    [m /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*[28;1H[94m@                                                                                       [27;18H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[25;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[26;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[28;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[26;17H[?12l[?25h[28;18H[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[26;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“[46m([mã©ã“ã§è§£æ”¾ï¼Ÿ[46m)[m */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute t[28;1H[94m@                                                                                       [26;18H[?12l[?25h[?25l[m([12C)[24;18H[?12l[?25h[22;17H[20;18H[?25l[18;17H[46m[[mi + 1[46m][?12l[?25h[?25l[m[i + 1][16;18H[?12l[?25h[?25l[16;7H[46m[[mi + 1[46m][?12l[?25h[?25l[m[16;7H[i + 1][14;14H[?12l[?25h[12;14H[10;13H[8;13H[5;13H[8;13H[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][8;10H[?12l[?25h[?25l å®Ÿå¼•æ•°ãŒargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;15H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;23H[?12l[?25h[?25l"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;24H[?12l[?25h[?25l""argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;25H[?12l[?25h[?25l"-"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;25H[?12l[?25h[?25l-s"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;26H[?12l[?25h[?25lsa"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;27H[?12l[?25h[?25lam"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;28H[?12l[?25h[?25lmp"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;29H[?12l[?25h[?25lpl"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;30H[?12l[?25h[?25lle"argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;31H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;34H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;40H[?12l[?25h[?25l[9;28r[9;1H[L[1;29r[8;40Hå®Ÿå¼•æ•°argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥[9;1H[93m    [m */[8;46H[?12l[?25h[?25lã§argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£[9;4H[93m [må…¥ */[8;48H[?12l[?25h[?25lãªã„argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦samplee[9;1H[93m    [mã«ä»£å…¥ */[8;52H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦saa[9;1H[93m    [mmpleã«ä»£å…¥ */[8;56H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’doubleå‹ã«[9;4H[93m [må¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;66H[?12l[?25h[?25leargv[i + 1]ã‚’doubleå‹[94m>>[m[9;1H[93m    [mã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;67H[?12l[?25h[?25lexargv[i + 1]ã‚’doubleå‹[8;68H[?12l[?25h[?25lxiargv[i + 1]ã‚’double[94m>>[m[9;1H[93m    [må‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;69H[?12l[?25h[?25litargv[i + 1]ã‚’doublee[9;1H[93m [8;70H[?12l[?25h[?25l[mt(argv[i + 1]ã‚’doubll[9;1H[93m    [meå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;71H[?12l[?25h[?25l(1argv[i + 1]ã‚’doubb[9;1H[93m    [mleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;72H[?12l[?25h[?25l[46m([m1[46m)[margv[i + 1]ã‚’douu[9;1H[93m    [mbleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;73H[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«argv[ii[9;1H[93m    [m + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[8;83H[?12l[?25h[11;38H[?25l[10;87H[46m[[mii[11;1H[93m [m[7C[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[10;87H[ii[11;1H[93m [m[7C][?12l[?25h[?25l[10;87H[46m[[mii[11;1H[93m [m[7C[46m][10;88H[?12l[?25h[?25l[mii[11;1H[93m [10;87H[?12l[?25h[?25l[m[ii[11;1H[93m [m[7C][10;86H[?12l[?25h[?25l å®Ÿå¼•æ•° [11;1H[93m    [mãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;7H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;15H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;16H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;17H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;17H[?12l[?25h[?25l-h"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;18H[?12l[?25h[?25lhs"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;19H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;22H[?12l[?25h[?25læœ€å¾Œã®argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;28H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„argv[i + 1]ã‚’intå‹[2Cå¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;40H[?12l[?25h[?25lã‹ã¤argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;44H[?12l[?25h[?25l[12;28r[12;1H[L[1;29r[11;44Hä»¥å‰ã®è¡Œã§argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£[94m>>[m[12;1H[93m    [må…¥ */[11;54H[?12l[?25h[?25leargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£[11;55H[?12l[?25h[?25lexargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«[94m>>[m[12;1H[93m    [mä»£å…¥ */[11;56H[?12l[?25h[?25lxiargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«[11;57H[?12l[?25h[?25litargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hs[94m>>[m[12;1H[93m    [mã«ä»£å…¥ */[11;58H[?12l[?25h[?25lt(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hss[12;1H[93m [11;59H[?12l[?25h[?25l[m[46m()[margv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hh[12;1H[93m    [msã«ä»£å…¥ */[11;60H[?12l[?25h[?25l[28Chh[12;1H[93m [11;59H[?12l[?25h[?25l[m[46m([m1[46m)[margv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦[12;4H[93m [mhsã«ä»£å…¥ */[11;60H[?12l[?25h[?25l[1C[?12l[?25h[?25l(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹[12;4H[93m [mã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[11;71H[?12l[?25h[14;56H[16;61H[18;44H[20;59H[22;53H[24;46H[26;53H[28;34H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[28;1H[93m    [mhe exp() table[26;45H[?12l[?25h[28;19H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[27;1H[93m    [m(x) = x / [46m([mx + 1[46m)[m
[93m700 [m  }[27;22H[?12l[?25h[?25l[23;44H[46m{[m[27;15H(x + 1)[28;7H[46m}[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[20;44H{[25;7H}
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}[26;60H[?12l[?25h[?25l[20;44H[46m{[25;7H}[?12l[?25h[?25l[m[20;44H{[24;15H[46m([mx + 1[46m)[m[25;7H}[24;22H[?12l[?25h[?25l[24;15H(x + 1)[22;19H[?12l[?25h[?25l[20;44H[46m{[25;7H}[20;45H[?12l[?25h[?25l[m{[25;7H}[19;34H[?12l[?25h[17;53H[15;46H[13;53H[11;59H[9;44H[7;61H[5;56H[2;71H[5;56H[7;61H[9;44H[11;59H[13;53H[15;46H[17;53H[19;34H[17;53H[15;46H[13;53H[11;59H[9;44H[7;61H[5;56H[2;71H[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[ii[3;1H[93m    [m + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[2;71H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[ii[3;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[5;70H(1)[15Cii[6;1H[93m [2;71H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«[3;1H[93m    [moutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[5;70H(1)[15Cii[6;1H[93m [2;70H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [2;1H[93m    [må®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i +  [3;1H[93m    [m1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;70H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m683 [m  if (cbow) alpha = 0.05;[3;67H(1)[18C  [4;1H[93m [1;30H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* å®Ÿ[2;1H[93m    [må¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[28;1H[94m@                                                                                       [2;71H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[ii[3;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[2;71H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[2;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argvv[3;1H[93m    [m[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[5;70H(1)[15Cii[6;1H[93m [m[28;1H[94m@                                                                                       [2;71H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(([3;1H[93m    [m1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[2;70H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(([3;1H[93m    [m1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[2;70H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][2;1H[93m    [m); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[3;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[2;71H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[2;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[3;1H[93m    [mã¦layer1_sizeã«ä»£å…¥) */[2;71H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m675 [m  read_vocab_file[0] = 0;[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;30H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[2;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m669 [m    printf("\nExamples:\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;33H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[2;1H[93m    [mgram model)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m667 [m    printf("\t-cbow <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;35H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[2;1H[93m    [maining data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m665 [m    printf("\t-read-vocab <file>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;42H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;88H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m659 [m    printf("\t-debug <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;36H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[2;1H[93m    [mses is 0 (vectors are written)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m657 [m    printf("\t-classes <int>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[2;1H[93m    [m.05 for CBOW\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m655 [m    printf("\t-alpha <float>\n");[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[2;1H[93m    [ms 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m653 [m    printf("\t-min-count <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m651 [m    printf("\t-iter <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [2;1H[93m    [m(0 = not used)\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m647 [m    printf("\t-negative <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;1H[94m@                                                                                       [1;75H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m645 [m    printf("\t-hs <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [2;1H[93m    [m1e-5)\n");[28;1H[94m@                                                                                       [2;15H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[2;1H[93m    [m frequency in the training data\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m642 [m    printf("\t-sample <float>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m640 [m    printf("\t-window <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m638 [m    printf("\t-size <int>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m636 [m    printf("\t-output <file>\n");[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m634 [m    printf("\t-train <file>\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m633 [m    printf("Parameters for training:\n");[28;1H[94m@                                                                                       [1;46H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m632 [m    printf("Options:\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */[28;1H[94m@                                                                                       [1;77H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m629 [m  int i;[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[2;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[3;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */[2;70H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m627 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */[28;1H[94m@                                                                                       [1;87H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m622 [m    }[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [2;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[3;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚) *[2;71H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m620 [m      printf("Argument missing for %s\n", str);[28;1H[94m@                                                                                       [1;52H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m619 [m    if (a == argc - 1) [46m{[6;9H}[1;29H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[2;1H[93m    [mã—ã„æ™‚ */[3;28H{[8;9H}[2;14H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m617 [m  int a;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */[?12l[?25h[29;1H[K[1;74H[?25l[?12l[?25h[2;12H[3;74H[?25l[14C[94m>>[m[4;1H[93m [m[5;28H[46m{[10;9H}[5;28H[?12l[?25h[?25l[m{[10;9H}[6;51H[?12l[?25h[7;73H[?25l[5;28H[46m{[10;9H}[?12l[?25h[?25l[m[5;28H{[10;9H}[11;74H[?12l[?25h[?25l[5;28H[46m{[10;9H}[?12l[?25h[?25l[m[5;28H{[10;9H}[7;73H[?12l[?25h[6;51H[?25l[5;28H[46m{[10;9H}[5;28H[?12l[?25h[?25l[m{[10;9H}[3;74H[?12l[?25h[2;12H[1;74H[?25l[1;28r[1;1H[L[1;29r[1;1H[93m615 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */[?12l[?25h[2;40H[3;5H[4;74H[5;12H[6;74H[?25l[14C[94m>>[m[7;1H[93m [m[8;28H[46m{[13;9H}[8;28H[?12l[?25h[?25l[m{[13;9H}[9;51H[?12l[?25h[10;73H[?25l[8;28H[46m{[13;9H}[?12l[?25h[?25l[m[8;28H{[13;9H}[14;74H[?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[15;13H[16;13H[17;13H[18;5H[17;13H[16;13H[15;13H[14;13H[?25l[8;28H[46m{[13;9H}[?12l[?25h[?25l[m[8;28H{[13;9H}[10;13H[?12l[?25hi[?25lt[46m([m1[46m)[m[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;15H[?12l[?25h[?25l[m(1)[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;16H[?12l[?25h[?25l[m[46m([m1[46m)[m[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;17H[?12l[?25h[?25l[m(1)[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;18H[?12l[?25h[m; /* 1 <= a < argc[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][m[30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;55H[?12l[?25h[?25l[m[a][30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;56H[?12l[?25h[?25l[m[46m[[ma[46m][m[30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;57H[?12l[?25h[?25l[m[a][30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;58H[?12l[?25h[2C[2C[2C[mfor[2C[2C[2C[2C[2Ca == argc -[11;5H1[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l[2C[46m([m[43C[94m>>[m[12;1H[93m [m[24C[46m)[11;44H[?12l[?25h[?25l[m([43C[94m>>[m[12;1H[93m [m[24C)[11;45H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2Cstr[2C[2C[2C[2C[2C[2C[12;5H[2C[2C[2C[2C[2C[2C[2Cstr[2C[?25l[11;44H[46m([m[43C[94m>>[m[12;1H[93m [m[24C[46m)[?12l[?25h[?25l[m[29;1H[1m-- INSERT --[12;27H[?12l[?25h[?25l[?12l[?25h[?25l[mï¼Œ[46m)[m *[?12l[?25h[?25li[46m)[m *[?12l[?25h[?25li.[46m)[m *[?12l[?25h[?25l.e[46m)[m *[?12l[?25h[?25le.[46m)[m *[?12l[?25h[?25l. [46m)[m *[?12l[?25h[?25l -[46m)[m *[?12l[?25h[?25l-a[46m)[m *[?12l[?25h[?25laã¨[46m)[m *[?12l[?25h[?25lã ã‘æ›¸ã„ã¦[46m)[m *[?12l[?25h[?25lç›´å¾Œã«[46m)[m *[?12l[?25h[?25læ•°å­—ã‚’[46m)[m *[?12l[?25h[?25læ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹[46m)[m *[?12l[?25h[?25lã‚’[46m)[m *[?12l[?25h[?25læ’é™¤[46m)[m *[?12l[?25h[?25l[8;28H[46m{[m[11;44H([43C[94m>>[m[12;1H[93m [m[77C)[13;9H[46m}[?12l[?25h[?25l[m[8;28H{[13;9H}[14;81H[?12l[?25h[?25l[8;28H[46m{[13;9H}[?12l[?25h[?25l[m[8;28H{[13;9H}[10;80H[?12l[?25h[?25l[8;28H[46m{[13;9H}[?12l[?25h[?25l[?12l[?25h[?25l[m[8;28H{[13;9H}[?12l[?25h[10;5H      exi[?25lt[46m([m1[46m)[m[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;15H[?12l[?25h[?25l[m[73C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;16H[?12l[?25h[?25l[m[72C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;17H[?12l[?25h[?25l[m[71C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;18H[?12l[?25h[?25l[m(1)[70C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;19H[?12l[?25h[m /* 1 <= a < argc[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][m[30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;55H[?12l[?25h[?25l[m[33C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;56H[?12l[?25h[?25l[m[32C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;57H[?12l[?25h[?25l[m[31C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;58H[?12l[?25h[?25l[m[a][30C  [11;1H[93m [m[86C[94m>>[m[12;1H[93m [10;60H[?12l[?25h[2C[2C[mfor[2C[2C[2C[2C[2Ca == argc -[11;5H1[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l[2C[46m([m[43C[94m>>[m[12;1H[93m [m[77C[46m)[11;44H[?12l[?25h[?25l[m[44C[94m>>[m[12;1H[93m [11;45H[?12l[?25h[?25l[m([43C[94m>>[m[12;1H[93m [m[77C)[11;47H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2Cstr[2C[2C[2C[2C[2C[2C[12;5H[2C[2C[2C[2C[2C[2C[2Cstr[2C[2C[2Ci.e. -a[?25l-ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;81H[K[12;34H[?12l[?25h[?25l-aã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;35H[?12l[?25h[?25l-ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;81H[K[12;34H[?12l[?25h[?25l-<ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;35H[?12l[?25h[?25l<>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;36H[?12l[?25h[?25l<a>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;36H[?12l[?25h[?25lar>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;37H[?12l[?25h[?25lrg>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;38H[?12l[?25h[?25lgu>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;39H[?12l[?25h[?25lum>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;40H[?12l[?25h[?25lme>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤) *[12;41H[?12l[?25h[?25l[13;28r[13;1H[L[1;29r[12;40Hen>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤)  [13;1H[93m    [m*[12;42H[?12l[?25h[?25lnt>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[13;1H[93m    [m *[12;43H[?12l[?25h[?25l[8;28H[46m{[14;9H}[?12l[?25h[?25l[m[8;28H{[14;9H}[15;81H[?12l[?25h[?25l[8;28H[46m{[14;9H}[?12l[?25h[?25l[m[8;28H{[14;9H}[15;81H[?12l[?25h[16;26H[17;11H[18;11H[19;5H[20;11H[23;11H[?25l[24;10H[46m([9C)[24;11H[?12l[?25h[?25l[m([9C)[25;11H[?12l[?25h[26;11H[27;11H[28;11H[?25l[1;28r[28;1H
[1;29r[28;1H[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m636 [m    printf("\t-output <file>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m638 [m    printf("\t-size <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[27;11H[?12l[?25h[28;11H[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf("\t-sample <float>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[5M[1;29r[24;1H[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[25;1H[93m    [m frequency in the training data\n");
[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[24;11H[?12l[?25h[26;11H[28;11H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf("\t-negative <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;11H[?12l[?25h[27;11H[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;11H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;11H[?12l[?25h[28;11H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[28;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[28;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m676 [m  if ([46m([mi = ArgPos((char *)"-size", argc, argv)[46m)[m > 0) layer1_size = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m    [mã¦layer1_sizeã«ä»£å…¥) */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([39C)[36C))[24;1H[93m [m[86C[94m>>[m[25;1H[93m 
677 [m  if ([46m([mi = ArgPos((char *)"-train", argc, argv)[46m)[m > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[28;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([40C)[35C]][24;1H[93m [m[86Caa[25;1H[93m 
678 [m  if ([46m([mi = ArgPos((char *)"-save-vocab", argc, argv)[46m)[m > 0) strcpy(save_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(([28;1H[93m    [m1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([45C)[30Caa[24;1H[93m [m[86C(([25;1H[93m 
679 [m  if ([46m([mi = ArgPos((char *)"-read-vocab", argc, argv)[46m)[m > 0) strcpy(read_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(([28;1H[93m    [m1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([45C)[30Caa[24;1H[93m [m[86C(([25;1H[93m 
680 [m  if ([46m([mi = ArgPos((char *)"-debug", argc, argv)[46m)[m > 0) debug_mode = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argvv[28;1H[93m    [m[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([40C)[35C))[24;1H[93m [m[86Cvv[25;1H[93m 
681 [m  if ([46m([mi = ArgPos((char *)"-binary", argc, argv)[46m)[m > 0) binary = atoi(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[ii[28;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;11H([41C)[34C//[24;1H[93m [m[86Cii[25;1H[93m 
682 [m  if ([46m([mi = ArgPos((char *)"-cbow", argc, argv)[46m)[m > 0) cbow = atoi(argv[i + 1]); /* å®Ÿ [27;1H[93m    [må¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[28;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[26;11H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[24;11H([39C)[36C  [25;1H[93m [m[86Cii[26;1H[93m 
683 [m  if [46m([mcbow[46m)[m alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*[94m@                                                                                       [27;11H[?12l[?25h[?25l[m[24;11H[46m([39C)[m[36C  [25;1H[93m [m[86Cii[26;1H[93m [m[27;10H(cbow)[24;11H[?12l[?25h[?25l[21;11H[46m([41C)[m[34C//[22;1H[93m [m[86Cii[23;1H[93m [m[24;11H([39C)[36C  [25;1H[93m [m[86Cii[26;1H[93m [21;11H[?12l[?25h[?25l[m[18;11H[46m([40C)[m[35C))[19;1H[93m [m[86Cvv[20;1H[93m [m[21;11H([41C)[34C//[22;1H[93m [m[86Cii[23;1H[93m [18;11H[?12l[?25h[?25l[m[15;11H[46m([45C)[m[30Caa[16;1H[93m [m[86C(([17;1H[93m [m[18;11H([40C)[35C))[19;1H[93m [m[86Cvv[20;1H[93m [15;11H[?12l[?25h[?25l[m[12;11H[46m([45C)[m[30Caa[13;1H[93m [m[86C(([14;1H[93m [m[15;11H([45C)[30Caa[16;1H[93m [m[86C(([17;1H[93m [12;11H[?12l[?25h[?25l[m[9;11H[46m([40C)[m[35C]][10;1H[93m [m[86Caa[11;1H[93m [m[12;11H([45C)[30Caa[13;1H[93m [m[86C(([14;1H[93m [9;11H[?12l[?25h[?25l[m[6;11H[46m([39C)[m[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [m[9;11H([40C)[35C]][10;1H[93m [m[86Caa[11;1H[93m [6;11H[?12l[?25h[?25l[m([39C)[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [5;11H[?12l[?25h[4;11H[5;11H[?25l[m[6;11H[46m([39C)[m[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;11H[?12l[?25h[?25l[m([39C)[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [m[9;11H[46m([40C)[m[35C]][10;1H[93m [m[86Caa[11;1H[93m [9;11H[?12l[?25h[?25l[m[6;11H[46m([39C)[m[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [m[9;11H([40C)[35C]][10;1H[93m [m[86Caa[11;1H[93m [6;11H[?12l[?25h[?25l[m[77C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;12H[?12l[?25h[?25l[m([39C)[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;13H[?12l[?25h[m = ArgPo[?25ls[46m([27C)[m[37C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;22H[?12l[?25h[?25l[m([46m([mchar *[46m)[m[19C)[37C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;23H[?12l[?25h[?25l[m[65C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;24H[?12l[?25h[?25l[m(char *)[57C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;25H[?12l[?25h[mhar [?25l[46m([mchar *[46m)[m[57C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;30H[?12l[?25h[?25l[m[58C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;31H[?12l[?25h[?25l[m[6;23H(char *)[57C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;32H[?12l[?25h[m-size", argc, arg[?25l[6;22H[46m([27C)[m[37C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;50H[?12l[?25h[?25l[m[6;11H[46m([m[10C([27C)[46m)[m[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;51H[?12l[?25h[?25l[m[37C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;52H[?12l[?25h[?25l[m[6;11H([39C)[36C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;53H[?12l[?25h[m> [?25l[6;10H[46m([45C)[m[31C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;56H[?12l[?25h[?25l[m[32C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;57H[?12l[?25h[?25l[m[6;10H([45C)[31C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;58H[?12l[?25h[mlayer1_size = ato[?25li[46m([11C))[m[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;76H[?12l[?25h[?25l[m[12C[46m))[m[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;77H[?12l[?25h[?25l[m([11C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;78H[?12l[?25h[mrg[?25lv[46m[[mi + 1[46m][m))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;81H[?12l[?25h[?25l[m[7C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;82H[?12l[?25h[?25l[m[i + 1]))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;83H[?12l[?25h[m + [?25l[46m[[mi + 1[46m][m))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;87H[?12l[?25h[?25l[m[6;76H[46m([margv[i + 1][46m))[m[7;1H[93m [m[86C[94m>>[m[8;1H[93m [6;88H[?12l[?25h[?25l[m[46m))[m[7;1H[93m [m[86C[94m>>[m[8;1H[93m [7;5H[?12l[?25h[?25l[m[6;76H([11C))[7;1H[93m [m[86C[94m>>[m[8;1H[93m [7;6H[?12l[?25h[m /* [?25l xå®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã— [8;1H[93m [7;11H[?12l[?25h[?25l[m å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[8;1H[93m [7;10H[?12l[?25h[m[29;1H[K[7;9H[?25l[?12l[?25h [?25lå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦ll[8;1H[93m    [mayer1_sizeã«ä»£å…¥) */[8;26H[K[7;10H[?12l[?25h[?25l æ•°ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layy[8;1H[93m    [mer1_sizeã«ä»£å…¥) */[8;23H[K[7;10H[?12l[?25h[?25l ãŒè¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layerr[8;1H[93m    [m1_sizeã«ä»£å…¥) */[8;21H[K[7;10H[?12l[?25h[?25l è¤‡æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1__[8;1H[93m    [msizeã«ä»£å…¥) */[8;19H[K[7;10H[?12l[?25h[?25l æ•°ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sii[8;1H[93m    [mzeã«ä»£å…¥) */[8;17H[K[7;10H[?12l[?25h[?25l ã‹ã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizee[8;1H[93m    [mã«ä»£å…¥) */[8;15H[K[7;10H[?12l[?25h[?25lã¤"-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã« [8;1H[93m    [mä»£å…¥) */[8;13H[K[7;10H[?12l[?25h[?25l "-size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£ [8;1H[93m    [må…¥) */[8;11H[K[7;10H[?12l[?25h[?25l -size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£[94m>>[m[8;1H[93m [7;10H[?12l[?25h[?25l[m size"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥ [8;1H[93m    [m) */[8;9H[K[7;10H[?12l[?25h[?25l ize"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥))[8;1H[93m    [m */[8;8H[K[7;10H[?12l[?25h[?25l ze"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥)  [8;1H[93m    [m*/[8;7H[K[7;10H[?12l[?25h[?25l e"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) **[8;1H[93m    [m/[8;6H[K[7;10H[?12l[?25h[?25l[6;28r[28;1H
[1;29r[6;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[7;1H[93m    [m; /* "ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[28;1H[94m@                                                                                       [7;10H[?12l[?25h[?25l[m ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;88H[K[7;10H[?12l[?25h[?25l æœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;86H[K[7;10H[?12l[?25h[?25l å¾Œã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;84H[K[7;10H[?12l[?25h[?25l ã®å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;82H[K[7;10H[?12l[?25h[?25l å®Ÿå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;80H[K[7;10H[?12l[?25h[?25lå¼•æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;78H[K[7;10H[?12l[?25h[?25l æ•°ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;76H[K[7;10H[?12l[?25h[?25l ã§ãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;74H[K[7;10H[?12l[?25h[?25lãªã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;72H[K[7;10H[?12l[?25h[?25lã„æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;70H[K[7;10H[?12l[?25h[?25l æ™‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;68H[K[7;10H[?12l[?25h[?25l ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;66H[K[7;10H[?12l[?25h[?25l atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;64H[K[7;10H[?12l[?25h[?25l[29;1H[1m-- INSERT --[7;11H[?12l[?25h[?25l[m "atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;11H[?12l[?25h[?25l""atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;12H[?12l[?25h[?25l å®Ÿå¼•æ•°""atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;16H[?12l[?25h"[?25l"-"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;18H[?12l[?25h[?25l-s"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;19H[?12l[?25h[?25lsi"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;20H[?12l[?25h[?25liz"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;21H[?12l[?25h[?25lze"atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;22H[?12l[?25h"[?25l"ãŒatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;25H[?12l[?25h[?25lç›´å¾Œã®atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;31H[?12l[?25h[?25l[8;28r[8;1H[L[1;29r[7;31Hæ•°å­—ã¨atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥)  [8;1H[93m    [m*/[7;37H[?12l[?25h[?25lã¨ã‚‚ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«[8;4H[93m [mä»£å…¥) */[7;43H[?12l[?25h[?25latoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£[8;4H[93m [må…¥) */[8;11H[K[7;41H[?12l[?25h[?25latoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥[8;4H[93m [m) */[8;9H[K[7;39H[?12l[?25h[?25latoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥)  [8;1H[93m    [m*/[8;7H[K[7;37H[?12l[?25h[?25lå…±ã«atoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£[8;4H[93m [må…¥) */[7;41H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦layer1__[8;1H[93m    [msizeã«ä»£å…¥) */[7;49H[?12l[?25h[?25lå ´åˆã«é™ã‚Šatoi(argv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[8;1H[93m    [mã—ã¦layer1_sizeã«ä»£å…¥) */[7;59H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—atoi(argv[i + 1]ã‚’inn[8;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[7;69H[?12l[?25hato[?25li[46m([m[14Cnn[8;1H[93m [m[33C[46m)[7;73H[?12l[?25h[?25l[m[15Cnn[8;1H[93m [7;74H[?12l[?25h[?25l[m([14Cnn[8;1H[93m [m[33C)[7;75H[?12l[?25hrg[?25lv[46m[[mi + 1[46m][m[3Cnn[8;1H[93m [7;78H[?12l[?25h[?25l[m[10Cnn[8;1H[93m [7;79H[?12l[?25h[?25l[m[i + 1][3Cnn[8;1H[93m [7;80H[?12l[?25h[m + [?25l[46m[[mi + 1[46m][m[3Cnn[8;1H[93m [7;84H[?12l[?25h[?25l[m[4Cnn[8;1H[93m [7;85H[?12l[?25h[?25l[m[7;78H[i + 1][3Cnn[8;1H[93m [7;87H[?12l[?25h[mi[8;5Ht[2C[2C[2C[2C[2C[11;16H[8;16H[11;16H[10;88H[?25l[46m([m1[46m)[m[12Caa[11;1H[93m [10;76H[?12l[?25h[?25l[m[12Caa[11;1H[93m [10;75H[?12l[?25h[?25l[m[13Caa[11;1H[93m [10;74H[?12l[?25h[?25l[m[14Caa[11;1H[93m [10;73H[?12l[?25h[?25l[m(1)[12Caa[11;1H[93m [10;72H[?12l[?25h[2C[2C[?25l[mxãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«trr[11;1H[93m    [main_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;18H[?12l[?25h[?25lxxãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«tt[11;1H[93m    [mrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;19H[?12l[?25h[?25lxãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«trr[11;1H[93m    [main_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;37H[K[10;18H[?12l[?25h[?25lãŒè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«traa[11;1H[93m    [min_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;36H[K[10;17H[?12l[?25h[29;1H[K[10;15H[?25l[?12l[?25h[2C[?25lè¤‡æ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«trainn[11;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;34H[K[10;17H[?12l[?25h[?25læ•°ã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_ff[11;1H[93m    [mileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;32H[K[10;17H[?12l[?25h[?25lã‹ã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fill[11;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;30H[K[10;17H[?12l[?25h[?25lã¤"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_file[94m>>[m[11;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;29H[K[10;17H[?12l[?25h[?25l"-train"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«aa[11;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;27H[K[10;17H[?12l[?25h"-train"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argg[11;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;24H[K[10;27H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[[[11;1H[93m    [mi + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;22H[K[10;27H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i  [11;1H[93m    [m+ 1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;20H[K[10;27H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i +  [11;1H[93m    [m1]ã‚’ã‚³ãƒ”ãƒ¼ */[11;18H[K[10;27H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]][11;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[11;16H[K[10;27H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’[11;5Hã‚³ãƒ”ãƒ¼ */[11;14H[K[10;27H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³[11;5Hãƒ”ãƒ¼ */[11;12H[K[10;27H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[11;5Hãƒ¼ */[11;10H[K[10;27H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼[11;4H[93m [m */[11;8H[K[10;27H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ **[11;1H[93m    [m/[11;6H[K[10;27H[?12l[?25h[?25l[9;28r[28;1H
[1;29r[9;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][10;1H[93m    [m); /* å®Ÿå¼•æ•°"-train"ãŒä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [10;27H[?12l[?25h[?25l[må‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;86H[K[10;27H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;84H[K[10;27H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;82H[K[10;27H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;80H[K[10;27H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;78H[K[10;27H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;77H[K[10;27H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;76H[K[10;27H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;75H[K[10;27H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;74H[K[10;27H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;73H[K[10;27H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;72H[K[10;27H[?12l[?25h[?25lã—ãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;71H[K[10;27H[?12l[?25h[?25lãªã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;69H[K[10;27H[?12l[?25h[?25lã„æ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;67H[K[10;27H[?12l[?25h[?25læ™‚ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;65H[K[10;27H[?12l[?25h[?25lã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;63H[K[10;27H[?12l[?25h[?25ltrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;61H[K[10;27H[?12l[?25h[?25l[29;1H[1m-- INSERT --[10;28H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;37H[?12l[?25h[?25lã¨train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;39H[?12l[?25h[?25lå…±ã«train_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;43H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸtrain_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;51H[?12l[?25h[?25l[11;28r[11;1H[L[1;29r[10;51Hå ´åˆã«é™ã‚Štrain_fileã«argv[i + 1]ã‚’ã‚³[94m>>[m[11;1H[93m    [mãƒ”ãƒ¼ */[10;61H[?12l[?25htrain_file[2C[?25lç›´å¾Œã®æ•°å­—argv[ii[11;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[10;83H[?12l[?25harg[?25lv[46m[[mii[11;1H[93m [m[7C[46m][10;87H[?12l[?25h[?25l[m[1Cii[11;1H[93m [10;88H[?12l[?25h[?25l[m[ii[11;1H[93m [m[7C][?12l[?25h + [?25l[10;87H[46m[[mii[11;1H[93m [m[7C[46m][?12l[?25h[?25l][?12l[?25h[?25l[m[10;87H[ii[11;1H[93m [m[7C][2C[?12l[?25h[2C[2C[2C */[14;21H[11;21H[14;21H[11;21H[14;21H[29;1H[K[14;9H[?25l[?12l[?25h[17;9H[14;9H[?25l[13;88H[46m(([m[14;1H[93m [m[4C[46m)[?12l[?25h[?25l[m[13;88H(([14;1H[93m [m[4C)[?12l[?25h[?25l[13;88H[46m(([m[14;1H[93m [m[4C[46m)[13;88H[?12l[?25h[?25l[m(([14;1H[93m [m[4C)[13;87H[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1))[14;1H[93m    [mã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;54H[K[13;27H[?12l[?25h[?25læ•°ã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—[14;5Hãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;52H[K[13;27H[?12l[?25h[?25lã‹ã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãª[14;5Hã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;50H[K[13;27H[?12l[?25h[?25lã¤"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„[14;4H[93m [mæ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;48H[K[13;27H[?12l[?25h[?25l"-save-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚[14;4H[93m [mã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;46H[K[13;27H[?12l[?25h"-save-vocab"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«[14;4H[93m [msave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;44H[K[13;42H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«saa[14;1H[93m    [mve_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;42H[K[13;42H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«savee[14;1H[93m    [m_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;40H[K[13;42H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vv[14;1H[93m    [mocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;38H[K[13;42H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocc[14;1H[93m    [mab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;36H[K[13;42H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocabb[14;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;34H[K[13;42H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_ff[14;1H[93m    [mileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;32H[K[13;42H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fill[14;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;30H[K[13;42H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_file[94m>>[m[14;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;29H[K[13;42H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«aa[14;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;27H[K[13;42H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argg[14;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;24H[K[13;42H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[[[14;1H[93m    [mi + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;22H[K[13;42H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i  [14;1H[93m    [m+ 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;20H[K[13;42H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i +  [14;1H[93m    [m1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;18H[K[13;42H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]][14;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[14;16H[K[13;42H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’[14;5Hã‚³ãƒ”ãƒ¼ */[14;14H[K[13;42H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[14;1H[93m [13;42H[?12l[?25h[?25l[mit(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³[14;5Hãƒ”ãƒ¼ */[14;12H[K[13;42H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³[94m>>[m[14;1H[93m [13;42H[?12l[?25h[?25l[m[46m([m1[46m)[mã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[14;5Hãƒ¼ */[14;10H[K[13;42H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[14;1H[93m [13;42H[?12l[?25h[?25l[m)ã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼[14;4H[93m [m */[14;8H[K[13;42H[?12l[?25h[?25lã—ãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [14;1H[93m    [m*/[14;7H[K[13;42H[?12l[?25h[?25l[12;28r[28;1H
[1;29r[12;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[13;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-save-vocab"ãŒãªã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [13;42H[?12l[?25h[?25l[mã„æ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;87H[K[13;42H[?12l[?25h[?25læ™‚ã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;85H[K[13;42H[?12l[?25h[?25lã«save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;83H[K[13;42H[?12l[?25h[?25lsave_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;81H[K[13;42H[?12l[?25h[?25l[29;1H[1m-- INSERT --[13;43H[?12l[?25h[?25l[14;28r[m[14;1H[L[1;29r[13;42Hç›´å¾Œã®æ•°å­—save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [14;1H[93m    [m*/[13;52H[?12l[?25h[?25lã¨save_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[14;1H[93m    [mãƒ¼ */[13;54H[?12l[?25h[?25lå…±ã«save_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[14;1H[93m [m[3Cã‚³ãƒ”ãƒ¼ */[13;58H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸsave_vocab_fileã«argv[ii[14;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;66H[?12l[?25h[?25lå ´åˆã«é™ã‚Šsave_vocab_fii[14;1H[93m    [mleã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;76H[?12l[?25hsave_vocab_f[14;5Hle[2C[?25lç›´å¾Œã®argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;15H[?12l[?25h[?25læ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[14;19H[?12l[?25harg[?25lv[46m[[mi + 1[46m][14;23H[?12l[?25h[?25l[[?12l[?25h[?25l[m[i + 1][?12l[?25h + [?25l[46m[[mi + 1[46m][?12l[?25h[?25l][?12l[?25h[?25l[m[14;23H[i + 1][2C[?12l[?25h[2C[2C[17;36H[14;36H[2C[?25l[17;38H[46m[[mi + 1[46m][17;38H[?12l[?25h[?25l[m[i + 1][17;37H[?12l[?25h[?25l[16;88H[46m(([m[17;1H[93m [m[4C[46m)[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[16;88H[?12l[?25h[?25l[m(([17;1H[93m [m[4C)[16;87H[?12l[?25h[29;1H[K[16;35H[?25l[?12l[?25h[19;34H[16;35H[?25lè¤‡æ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1))[17;1H[93m    [mã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;54H[K[16;27H[?12l[?25h[?25læ•°ã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—[17;5Hãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;52H[K[16;27H[?12l[?25h[?25lã‹ã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãª[17;5Hã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;50H[K[16;27H[?12l[?25h[?25lã¤"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„[17;4H[93m [mæ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;48H[K[16;27H[?12l[?25h[?25l"-read-vocab"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚[17;4H[93m [mã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;46H[K[16;27H[?12l[?25h"-read-vocab"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«[17;4H[93m [mread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;44H[K[16;42H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«ree[17;1H[93m    [mad_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;42H[K[16;42H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«readd[17;1H[93m    [m_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;40H[K[16;42H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vv[17;1H[93m    [mocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;38H[K[16;42H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocc[17;1H[93m    [mab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;36H[K[16;42H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocabb[17;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;34H[K[16;42H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_ff[17;1H[93m    [mileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;32H[K[16;42H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fill[17;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;30H[K[16;42H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_file[94m>>[m[17;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;29H[K[16;42H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«aa[17;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;27H[K[16;42H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argg[17;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;24H[K[16;42H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[[[17;1H[93m    [mi + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;22H[K[16;42H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i  [17;1H[93m    [m+ 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;20H[K[16;42H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i +  [17;1H[93m    [m1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;18H[K[16;42H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]][17;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[17;16H[K[16;42H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’[17;5Hã‚³ãƒ”ãƒ¼ */[17;14H[K[16;42H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[17;1H[93m [16;42H[?12l[?25h[?25l[mit(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³[17;5Hãƒ”ãƒ¼ */[17;12H[K[16;42H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³[94m>>[m[17;1H[93m [16;42H[?12l[?25h[?25l[m[46m([m1[46m)[mã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[17;5Hãƒ¼ */[17;10H[K[16;42H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[17;1H[93m [16;42H[?12l[?25h[?25l[m)ã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼[17;4H[93m [m */[17;8H[K[16;42H[?12l[?25h[?25lã—ãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [17;1H[93m    [m*/[17;7H[K[16;42H[?12l[?25h[?25l[15;28r[28;1H
[1;29r[15;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[16;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-read-vocab"ãŒãªã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [16;42H[?12l[?25h[?25l[mã„æ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;87H[K[16;42H[?12l[?25h[?25læ™‚ã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;85H[K[16;42H[?12l[?25h[?25lã«read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;83H[K[16;42H[?12l[?25h[?25lread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;81H[K[16;42H[?12l[?25h[?25l[29;1H[1m-- INSERT --[16;43H[?12l[?25h[?25l[mcread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;43H[?12l[?25h[?25lchread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;44H[?12l[?25h[?25lhoread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;45H[?12l[?25h[?25lokread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;46H[?12l[?25h[?25lkuread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;47H[?12l[?25h[?25lkread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;85H[K[16;46H[?12l[?25h[?25loread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;84H[K[16;45H[?12l[?25h[?25lhread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;83H[K[16;44H[?12l[?25h[?25lcread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;82H[K[16;43H[?12l[?25h[?25lread_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;81H[K[16;42H[?12l[?25h[?25l[17;28r[17;1H[L[1;29r[16;42Hç›´å¾Œã®æ•°å­—read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼  [17;1H[93m    [m*/[16;52H[?12l[?25h[?25lã¨read_vocab_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[94m>>[m[17;1H[93m    [mãƒ¼ */[16;54H[?12l[?25h[?25lå…±ã«read_vocab_fileã«argv[i + 1]ã‚’[94m>>[m[17;1H[93m [m[3Cã‚³ãƒ”ãƒ¼ */[16;58H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸread_vocab_fileã«argv[ii[17;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;66H[?12l[?25h[?25lå ´åˆã«read_vocab_fileã«[17;4H[93m [margv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;72H[?12l[?25h[?25lé™ã‚Šread_vocab_fii[17;1H[93m    [mleã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[16;76H[?12l[?25hread_vocab_f[17;5Hle[2C[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[17;19H[?12l[?25h[20;19H[?25l[20;5H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[20;5H[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][19;88H[?12l[?25h[?25l[46m([m1[46m)[m[13Cvv[20;1H[93m [19;75H[?12l[?25h[?25l[m[13Cvv[20;1H[93m [19;74H[?12l[?25h[?25l[m[14Cvv[20;1H[93m [19;73H[?12l[?25h[?25l[m[15Cvv[20;1H[93m [19;72H[?12l[?25h[?25l[m(1)[13Cvv[20;1H[93m [19;71H[?12l[?25h[m[29;1H[K[19;27H[?25l[?12l[?25h[2C[?25lè¤‡æ•°ã‹ã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[ii[20;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;46H[K[19;16H[?12l[?25h[?25læ•°ã‹ã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i ++[20;1H[93m [m[3C 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;44H[K[19;16H[?12l[?25h[?25lã‹ã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 11[20;1H[93m    [m]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;42H[K[19;16H[?12l[?25h[?25lã¤"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1][94m>>[m[20;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;41H[K[19;16H[?12l[?25h[?25l"-debug"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[20;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;39H[K[19;16H[?12l[?25h"-debug"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intt[20;1H[93m    [må‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;36H[K[19;26H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ [20;1H[93m    [mã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;34H[K[19;26H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã« [20;1H[93m    [må¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;32H[K[19;26H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰ [20;1H[93m    [mæ›ã—ã¦debug_modeã«ä»£å…¥ */[20;30H[K[19;26H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ› [20;1H[93m    [mã—ã¦debug_modeã«ä»£å…¥ */[20;28H[K[19;26H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã— [20;1H[93m [m[3Cã¦debug_modeã«ä»£å…¥ */[20;26H[K[19;26H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦ [20;1H[93m    [mdebug_modeã«ä»£å…¥ */[20;24H[K[19;26H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦dee[20;1H[93m    [mbug_modeã«ä»£å…¥ */[20;22H[K[19;26H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debuu[20;1H[93m    [mg_modeã«ä»£å…¥ */[20;20H[K[19;26H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug__[20;1H[93m    [mmodeã«ä»£å…¥ */[20;18H[K[19;26H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_moo[20;1H[93m    [mdeã«ä»£å…¥ */[20;16H[K[19;26H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modee[20;1H[93m    [mã«ä»£å…¥ */[20;14H[K[19;26H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã« [20;1H[93m    [mä»£å…¥ */[20;12H[K[19;26H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£ [20;1H[93m    [må…¥ */[20;10H[K[19;26H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ [20;1H[93m    [m */[20;8H[K[19;26H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ **[20;1H[93m    [m/[20;6H[K[19;26H[?12l[?25h[?25l[18;28r[28;1H
[1;29r[18;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[19;1H[93m    [m; /* å®Ÿå¼•æ•°"-debug"ãŒxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[28;1H[94m@                                                                                       [19;26H[?12l[?25h[?25l[mit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;88H[K[19;26H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;87H[K[19;26H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;86H[K[19;26H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;85H[K[19;26H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;84H[K[19;26H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;83H[K[19;26H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;81H[K[19;26H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;79H[K[19;26H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;77H[K[19;26H[?12l[?25h[?25l[29;1H[1m-- INSERT --[19;28H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;36H[?12l[?25h[?25lã¨æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;38H[?12l[?25h[?25l[20;28r[20;1H[L[1;29r[19;38Hå…±[2Cæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£[94m>>[m[20;1H[93m    [må…¥ */[19;42H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦debug_mm[20;1H[93m    [modeã«ä»£å…¥ */[19;50H[?12l[?25h[?25lå ´åˆã«é™ã‚Šæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[20;1H[93m    [mã—ã¦debug_modeã«ä»£å…¥ */[19;60H[?12l[?25h[2C[2C[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’inn[20;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[19;74H[?12l[?25harg[?25lv[46m[[mi + 1[46m][m[3Cnn[20;1H[93m [19;78H[?12l[?25h[?25l[m[10Cnn[20;1H[93m [19;79H[?12l[?25h[?25l[m[i + 1][3Cnn[20;1H[93m [19;80H[?12l[?25h[m + [?25l[46m[[mi + 1[46m][m[3Cnn[20;1H[93m [19;84H[?12l[?25h[?25l[m[4Cnn[20;1H[93m [19;85H[?12l[?25h[?25l[m[19;78H[i + 1][3Cnn[20;1H[93m [19;87H[?12l[?25h[mi[20;5Ht[2C[2C[2C[2C[23;14H[?25l[22;87H[46m[[mii[23;1H[93m [m[7C[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[22;87H[ii[23;1H[93m [m[7C][?12l[?25h[?25l[22;87H[46m[[mii[23;1H[93m [m[7C[46m][22;88H[?12l[?25h[?25l[mii[23;1H[93m [22;87H[?12l[?25h[?25l[m[ii[23;1H[93m [m[7C][22;86H[?12l[?25h[?25lg v[[[23;1H[93m    [mi + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;87H[?12l[?25h[29;1H[K[22;86H[?25l[?12l[?25h [?25lv[46m[[[m[23;1H[93m [m[8C[46m][22;88H[?12l[?25h[?25l[m[[[23;1H[93m [m[8C][22;87H[?12l[?25h[?25lgv[ii[23;1H[93m    [m + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;42H[K[22;86H[?12l[?25h[?25l[46m([m1[46m)[m[15Cii[23;1H[93m [22;72H[?12l[?25h[?25l[m(1)[15Cii[23;1H[93m [22;71H[?12l[?25h[?25l[m[46m([m1[46m)[m[15Cii[23;1H[93m [22;70H[?12l[?25h[?25l[m(1)[15Cii[23;1H[93m [22;69H[?12l[?25h[2C[?25l[mè¤‡æ•°ã‹ã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i ++[23;1H[93m [m[3C 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;40H[K[22;13H[?12l[?25h[?25læ•°ã‹ã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 11[23;1H[93m    [m]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;38H[K[22;13H[?12l[?25h[?25lã‹ã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1][94m>>[m[23;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;37H[K[22;13H[?12l[?25h[?25lã¤"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[23;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;35H[K[22;13H[?12l[?25h[?25l"-binary"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intt[23;1H[93m    [må‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;32H[K[22;13H[?12l[?25h"-binary"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹[23;4H[93m [mã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;30H[K[22;24H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«[23;4H[93m [må¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;28H[K[22;24H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰[23;4H[93m [mæ›ã—ã¦binaryã«ä»£å…¥ */[23;26H[K[22;24H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›[23;4H[93m [mã—ã¦binaryã«ä»£å…¥ */[23;24H[K[22;24H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[23;5Hã¦binaryã«ä»£å…¥ */[23;22H[K[22;24H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦[23;4H[93m [mbinaryã«ä»£å…¥ */[23;20H[K[22;24H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦bii[23;1H[93m    [mnaryã«ä»£å…¥ */[23;18H[K[22;24H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaa[23;1H[93m    [mryã«ä»£å…¥ */[23;16H[K[22;24H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryy[23;1H[93m    [mã«ä»£å…¥ */[23;14H[K[22;24H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«[23;4H[93m [mä»£å…¥ */[23;12H[K[22;24H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£[23;4H[93m [må…¥ */[23;10H[K[22;24H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥[23;4H[93m [m */[23;8H[K[22;24H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ **[23;1H[93m    [m/[23;6H[K[22;24H[?12l[?25h[?25l[21;28r[28;1H
[1;29r[21;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[22;1H[93m    [m* å®Ÿå¼•æ•°"-binary"ãŒè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[28;1H[94m@                                                                                       [22;24H[?12l[?25h[?25l[mã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;86H[K[22;24H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;84H[K[22;24H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;83H[K[22;24H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;82H[K[22;24H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;81H[K[22;24H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;80H[K[22;24H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;79H[K[22;24H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;78H[K[22;24H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;77H[K[22;24H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;75H[K[22;24H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;73H[K[22;24H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;71H[K[22;24H[?12l[?25h[?25l[29;1H[1m-- INSERT --[22;26H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;34H[?12l[?25h[?25lã¨æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;36H[?12l[?25h[?25lå…±[2Cæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;40H[?12l[?25h[?25l[23;28r[23;1H[L[1;29r[22;40Hæ›¸ã‹ã‚ŒãŸæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦binaryã«[94m>>[m[23;1H[93m    [mä»£å…¥ */[22;48H[?12l[?25h[?25lå ´åˆã«é™ã‚Šæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[23;1H[93m    [mã¦binaryã«ä»£å…¥ */[22;58H[?12l[?25h[2C[2C[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’int[94m>>[m[23;1H[93m    [må‹ã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[22;72H[?12l[?25h[25;71H[?25l[46m([m1[46m)[m[23Cii[26;1H[93m [25;65H[?12l[?25h[?25l[m[23Cii[26;1H[93m [25;64H[?12l[?25h[?25l[m[24Cii[26;1H[93m [25;63H[?12l[?25h[?25l[m[25Cii[26;1H[93m [25;62H[?12l[?25h[?25l[m(1)[23Cii[26;1H[93m [25;61H[?12l[?25h[m[29;1H[K[25;56H[?25l[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intt[26;1H[93m    [må‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[26;30H[K[25;9H[?12l[?25h[?25læ•°ã‹ã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹[26;4H[93m [mã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[26;28H[K[25;9H[?12l[?25h[?25lã‹ã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«[26;4H[93m [må¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[26;26H[K[25;9H[?12l[?25h[?25lã¤"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰[26;4H[93m [mæ›ã—ã¦cbowã«ä»£å…¥ */[26;24H[K[25;9H[?12l[?25h[?25l"-cbow"ãŒæœ€å¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›[26;4H[93m [mã—ã¦cbowã«ä»£å…¥ */[26;22H[K[25;9H[?12l[?25h"-cbow"[2C[?25lå¾Œã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[26;5Hã¦cbowã«ä»£å…¥ */[26;20H[K[25;18H[?12l[?25h[?25lã®å¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦[26;4H[93m [mcbowã«ä»£å…¥ */[26;18H[K[25;18H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbb[26;1H[93m    [mowã«ä»£å…¥ */[26;16H[K[25;18H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cboww[26;1H[93m    [mã«ä»£å…¥ */[26;14H[K[25;18H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[26;4H[93m [mä»£å…¥ */[26;12H[K[25;18H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[26;4H[93m [må…¥ */[26;10H[K[25;18H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥[26;4H[93m [m */[26;8H[K[25;18H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ **[26;1H[93m    [m/[26;6H[K[25;18H[?12l[?25h[?25l[24;28r[28;1H
[1;29r[24;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* å®Ÿ[25;4H[93m [må¼•æ•°"-cbow"ãŒã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */


[94m@                                                                                       [25;18H[?12l[?25h[?25l[mä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;86H[K[25;18H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;84H[K[25;18H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;82H[K[25;18H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;80H[K[25;18H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;78H[K[25;18H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;76H[K[25;18H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;75H[K[25;18H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;74H[K[25;18H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;73H[K[25;18H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;72H[K[25;18H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;71H[K[25;18H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;70H[K[25;18H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;69H[K[25;18H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;67H[K[25;18H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;65H[K[25;18H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;63H[K[25;18H[?12l[?25h[?25l[29;1H[1m-- INSERT --[25;20H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;28H[?12l[?25h[?25lã¨æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;30H[?12l[?25h[?25lå…±[2Cæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;34H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£å…¥ */[25;42H[?12l[?25h[?25l[26;28r[26;1H[L[1;29r[25;42Hå ´åˆã«æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[94m>>[m[26;1H[93m    [må…¥ */[25;48H[?12l[?25h[?25lé™ã‚Šæ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbow[94m>>[m[26;1H[93m    [mã«ä»£å…¥ */[25;52H[?12l[?25h[2C[2C[2C[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[94m>>[m[26;1H[93m    [mä»£å…¥ */[26;12H[K[25;54H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[94m>>[m[26;1H[93m    [må…¥ */[26;10H[K[25;52H[?12l[?25h[?25lcargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[25;53H[?12l[?25h[?25lcoargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[94m>>[m[26;1H[93m    [mä»£å…¥ */[25;54H[?12l[?25h[?25lokargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[25;55H[?12l[?25h[?25lkuargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbow[94m>>[m[26;1H[93m    [mã«ä»£å…¥ */[25;56H[?12l[?25h[?25lkargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[26;4H[93m [mä»£å…¥ */[26;12H[K[25;55H[?12l[?25h[?25loargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«[94m>>[m[26;1H[93m [25;54H[?12l[?25h[?25l[mcargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[26;4H[93m [må…¥ */[26;10H[K[25;53H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦cbowã«ä»£[94m>>[m[26;1H[93m [25;52H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[26;1H[93m    [mã¦cbowã«ä»£å…¥ */[25;62H[?12l[?25h[22;62H[2C[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[94m>>[m[23;1H[93m    [mã«å¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;30H[K[22;60H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[23;1H[93m    [må¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[23;28H[K[22;58H[?12l[?25h[19;58H[2C[2C[?25lã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’int[94m>>[m[20;1H[93m    [må‹ã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;36H[K[19;60H[?12l[?25h[2C[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[94m>>[m[20;1H[93m    [mã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[20;34H[K[19;60H[?12l[?25h[22;60H[25;60H[27;30H[?25l[1;28r[1;1H[2M[1;29r[26;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [27;1H[93m    [må®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i +  [28;1H[93m    [m1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;59H[?12l[?25h[29;1H[K[27;37H[?25l[?12l[?25h[2C[?25lè¤‡æ•°ã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]][28;1H[93m    [mã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;39H[K[27;11H[?12l[?25h[?25læ•°ã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’[28;4H[93m [mdoubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;37H[K[27;11H[?12l[?25h[?25lã‹ã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doo[28;1H[93m    [mubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;35H[K[27;11H[?12l[?25h[?25lã¤"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubb[28;1H[93m    [mleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;33H[K[27;11H[?12l[?25h[?25l"-alpha"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doublee[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;31H[K[27;11H[?12l[?25h"-alpha"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹[28;4H[93m [mã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;29H[K[27;21H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«[28;4H[93m [må¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;27H[K[27;21H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰[28;4H[93m [mæ›ã—ã¦alphaã«ä»£å…¥ */[28;25H[K[27;21H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›[28;4H[93m [mã—ã¦alphaã«ä»£å…¥ */[28;23H[K[27;21H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—[28;5Hã¦alphaã«ä»£å…¥ */[28;21H[K[27;21H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦[28;4H[93m [malphaã«ä»£å…¥ */[28;19H[K[27;21H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦all[28;1H[93m    [mphaã«ä»£å…¥ */[28;17H[K[27;21H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphh[28;1H[93m    [maã«ä»£å…¥ */[28;15H[K[27;21H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alpha[94m>>[m[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;21H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[28;12H[K[27;21H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£[94m>>[m[28;1H[93m    [må…¥ */[28;10H[K[27;21H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥  [28;1H[93m    [m*/[28;8H[K[27;21H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[28;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +[94m@                                                                                       [27;21H[?12l[?25h[?25l[mè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;87H[K[27;21H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;85H[K[27;21H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;83H[K[27;21H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;82H[K[27;21H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;81H[K[27;21H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;80H[K[27;21H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;79H[K[27;21H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;78H[K[27;21H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;77H[K[27;21H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;76H[K[27;21H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;74H[K[27;21H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;72H[K[27;21H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;70H[K[27;21H[?12l[?25h[?25lã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;68H[K[27;21H[?12l[?25h[?25largv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;66H[K[27;21H[?12l[?25h[?25l

[1m-- INSERT --[27;22H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;31H[?12l[?25h[?25lã¨argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;33H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ */[27;37H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«ä»£å…¥ **[28;1H[93m    [m/[28;6H[K[27;45H[?12l[?25h[?25lå ´åˆã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alphaã«[28;4H[93m [mä»£å…¥ */[27;51H[?12l[?25h[?25lé™ã‚Šargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alpp[28;1H[93m    [mhaã«ä»£å…¥ */[27;55H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [27;1H[93m    [m1]); /* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«[28;1H[93m    [moutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;54H[?12l[?25h[29;1H[K[27;30H[?25l[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«ouu[28;1H[93m    [mtput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;38H[K[27;19H[?12l[?25h[?25læ•°ã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«outpp[28;1H[93m    [mut_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;36H[K[27;19H[?12l[?25h[?25lã‹ã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«outputt[28;1H[93m    [m_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;34H[K[27;19H[?12l[?25h[?25lã¤"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_ff[28;1H[93m    [mileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;32H[K[27;19H[?12l[?25h[?25l"-output"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fill[28;1H[93m    [meã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;30H[K[27;19H[?12l[?25h"-output"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_file[94m>>[m[28;1H[93m    [mã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;29H[K[27;30H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«aa[28;1H[93m    [mrgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;27H[K[27;30H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argg[28;1H[93m    [mv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;24H[K[27;30H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[[[28;1H[93m    [mi + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;22H[K[27;30H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i  [28;1H[93m    [m+ 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;20H[K[27;30H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i +  [28;1H[93m    [m1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;18H[K[27;30H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]][28;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[28;16H[K[27;30H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’[28;5Hã‚³ãƒ”ãƒ¼ */[28;14H[K[27;30H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³[28;5Hãƒ”ãƒ¼ */[28;12H[K[27;30H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”[28;5Hãƒ¼ */[28;10H[K[27;30H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼[28;4H[93m [m */[28;8H[K[27;30H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ **[28;1H[93m    [m/[28;6H[K[27;30H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;88H[K[28;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); /[28;1H[94m@                                                                                       [27;30H[?12l[?25h[?25l[mè¡Œã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;86H[K[27;30H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;84H[K[27;30H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;82H[K[27;30H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;81H[K[27;30H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;80H[K[27;30H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;79H[K[27;30H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;78H[K[27;30H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;77H[K[27;30H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;76H[K[27;30H[?12l[?25h[?25lã—ãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;75H[K[27;30H[?12l[?25h[?25lãªã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;73H[K[27;30H[?12l[?25h[?25lã„æ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;71H[K[27;30H[?12l[?25h[?25læ™‚ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;69H[K[27;30H[?12l[?25h[?25lã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;67H[K[27;30H[?12l[?25h[?25loutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;65H[K[27;30H[?12l[?25h[?25l

[1m-- INSERT --[27;31H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;40H[?12l[?25h[?25lã¨output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;42H[?12l[?25h[?25lå…±ã«output_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;46H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸoutput_fileã«argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;54H[?12l[?25h[?25lå ´åˆã«é™ã‚Šoutput_fileã«argv[i + 1][94m>>[m[28;1H[93m    [mã‚’ã‚³ãƒ”ãƒ¼ */[28;16H[K[27;64H[?12l[?25houtput_file[2C[?25lç›´å¾Œã®æ•°å­—arr[28;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[27;87H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[46m[[mii[28;1H[93m    [m + 1[46m][mã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;87H[?12l[?25h[?25l[ii[28;1H[93m [m[7C][27;86H[?12l[?25h[?25l[46m([m1[46m)[m[15Cii[28;1H[93m [27;73H[?12l[?25h[?25l[m[15Cii[28;1H[93m [27;72H[?12l[?25h[?25l[m[16Cii[28;1H[93m [27;71H[?12l[?25h[?25l[m[17Cii[28;1H[93m [27;70H[?12l[?25h[?25l[m(1)[15Cii[28;1H[93m [27;69H[?12l[?25h[m[29;1H[K[27;46H[?25l[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i ++[28;1H[93m [m[3C 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;40H[K[27;13H[?12l[?25h[?25læ•°ã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 11[28;1H[93m    [m]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;38H[K[27;13H[?12l[?25h[?25lã‹ã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1][94m>>[m[28;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;37H[K[27;13H[?12l[?25h[?25lã¤"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’ii[28;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;35H[K[27;13H[?12l[?25h[?25l"-window"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intt[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;32H[K[27;13H[?12l[?25h"-window"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ [28;1H[93m    [mã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;30H[K[27;24H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã« [28;1H[93m    [må¤‰æ›ã—ã¦windowã«ä»£å…¥ */[28;28H[K[27;24H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰ [28;1H[93m    [mæ›ã—ã¦windowã«ä»£å…¥ */[28;26H[K[27;24H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ› [28;1H[93m    [mã—ã¦windowã«ä»£å…¥ */[28;24H[K[27;24H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã— [28;1H[93m [m[3Cã¦windowã«ä»£å…¥ */[28;22H[K[27;24H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦ [28;1H[93m    [mwindowã«ä»£å…¥ */[28;20H[K[27;24H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦wii[28;1H[93m    [mndowã«ä»£å…¥ */[28;18H[K[27;24H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windd[28;1H[93m    [mowã«ä»£å…¥ */[28;16H[K[27;24H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windoww[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;24H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã« [28;1H[93m    [mä»£å…¥ */[28;12H[K[27;24H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£ [28;1H[93m    [må…¥ */[28;10H[K[27;24H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ [28;1H[93m    [m */[28;8H[K[27;24H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ **[28;1H[93m    [m/[28;6H[K[27;24H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;88H[K[28;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); /[28;1H[94m@                                                                                       [27;24H[?12l[?25h[?25l[mã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;86H[K[27;24H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;84H[K[27;24H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;83H[K[27;24H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;82H[K[27;24H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;81H[K[27;24H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;80H[K[27;24H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;79H[K[27;24H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;78H[K[27;24H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;77H[K[27;24H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;75H[K[27;24H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;73H[K[27;24H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;71H[K[27;24H[?12l[?25h[?25lã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;69H[K[27;24H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;67H[K[27;24H[?12l[?25h[?25l

[1m-- INSERT --[27;25H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;34H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;36H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;40H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦windowã«ä»£å…¥  [28;1H[93m    [m*/[28;7H[K[27;48H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦winn[28;1H[93m    [mdowã«ä»£å…¥ */[27;58H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦windowã«ä»£å…¥ */[27;68H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°ãŒè¤‡æ•°ã‹ã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[ii[28;1H[93m    [m + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;68H[?12l[?25h[29;1H[K[27;48H[?25l[?12l[?25h[?25lè¤‡æ•°ã‹ã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i ++[28;1H[93m [m[3C 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;43H[K[27;13H[?12l[?25h[?25læ•°ã‹ã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 11[28;1H[93m    [m]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;41H[K[27;13H[?12l[?25h[?25lã‹ã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1][94m>>[m[28;1H[93m    [mã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;40H[K[27;13H[?12l[?25h[?25lã¤"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’dd[28;1H[93m    [moubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;38H[K[27;13H[?12l[?25h[?25l"-sample"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’douu[28;1H[93m    [mbleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;35H[K[27;13H[?12l[?25h"-sample"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubll[28;1H[93m    [meå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;33H[K[27;24H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’double[94m>>[m[28;1H[93m    [må‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;32H[K[27;24H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹[94m>>[m[28;1H[93m    [mã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;30H[K[27;24H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;28H[K[27;24H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰[94m>>[m[28;1H[93m    [mæ›ã—ã¦sampleã«ä»£å…¥ */[28;26H[K[27;24H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›[94m>>[m[28;1H[93m    [mã—ã¦sampleã«ä»£å…¥ */[28;24H[K[27;24H[?12l[?25h[?25lãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m [m[3Cã¦sampleã«ä»£å…¥ */[28;22H[K[27;24H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦ss[28;1H[93m    [mampleã«ä»£å…¥ */[28;20H[K[27;24H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦samm[28;1H[93m    [mpleã«ä»£å…¥ */[28;17H[K[27;24H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampll[28;1H[93m    [meã«ä»£å…¥ */[28;15H[K[27;24H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sample[94m>>[m[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;24H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[28;12H[K[27;24H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£[94m>>[m[28;1H[93m    [må…¥ */[28;10H[K[27;24H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥  [28;1H[93m    [m*/[28;8H[K[27;24H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[28;1H[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* å®Ÿå¼•æ•°[28;1H[94m@                                                                                       [27;24H[?12l[?25h[?25l[mexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;87H[K[27;24H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;86H[K[27;24H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;85H[K[27;24H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;84H[K[27;24H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;83H[K[27;24H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;82H[K[27;24H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;81H[K[27;24H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;80H[K[27;24H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;78H[K[27;24H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;76H[K[27;24H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;74H[K[27;24H[?12l[?25h[?25lã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;72H[K[27;24H[?12l[?25h[?25largv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;70H[K[27;24H[?12l[?25h[?25l

[1m-- INSERT --[27;25H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;34H[?12l[?25h[?25lã¨argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;36H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;40H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦sampleã«ä»£ [28;1H[93m    [må…¥ */[28;10H[K[27;48H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦ [28;1H[93m    [msampleã«ä»£å…¥ */[27;58H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’doubleå‹ [28;1H[93m    [mã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[27;68H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* å®Ÿå¼•æ•° [27;1H[93m    [mãŒè¤‡æ•°ã‹ã¤"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ [28;1H[93m    [mã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;67H[?12l[?25h[?25l[46m([m1[46m)[m[27C  [28;1H[93m [27;61H[?12l[?25h[?25l[m[27C  [28;1H[93m [27;60H[?12l[?25h[m[29;1H[K[27;59H[?25l(1)[27C  [28;1H[93m [27;59H[?12l[?25h[?25l[m[46m([m1[46m)[m[27C  [28;1H[93m [27;58H[?12l[?25h[?25l[m(1)[27C  [28;1H[93m [27;57H[?12l[?25h[?25l [mè¤‡æ•°ã‹ã¤"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã« [28;1H[93m    [må¤‰æ›ã—ã¦hsã«ä»£å…¥ */[28;24H[K[27;5H[?12l[?25h[?25l[93m [mæ•°ã‹ã¤"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰ [28;1H[93m    [mæ›ã—ã¦hsã«ä»£å…¥ */[28;22H[K[27;5H[?12l[?25h[?25l[93m [mã‹ã¤"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ› [28;1H[93m    [mã—ã¦hsã«ä»£å…¥ */[28;20H[K[27;5H[?12l[?25h[?25lã¤"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã— [28;1H[93m [m[3Cã¦hsã«ä»£å…¥ */[28;18H[K[27;5H[?12l[?25h[?25l[93m [m"-hs"ãŒæœ€å¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦ [28;1H[93m    [mhsã«ä»£å…¥ */[28;16H[K[27;5H[?12l[?25h"-hs"[2C[?25lå¾Œã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hss[28;1H[93m    [mã«ä»£å…¥ */[28;14H[K[27;12H[?12l[?25h[?25lã®å®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã« [28;1H[93m    [mä»£å…¥ */[28;12H[K[27;12H[?12l[?25h[?25lå®Ÿå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£ [28;1H[93m    [må…¥ */[28;10H[K[27;12H[?12l[?25h[?25lå¼•æ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ [28;1H[93m    [m */[28;8H[K[27;12H[?12l[?25h[?25læ•°ã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ **[28;1H[93m    [m/[28;6H[K[27;12H[?12l[?25h[?25lã§ãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;88H[K[28;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1][28;1H[94m@                                                                                       [27;12H[?12l[?25h[?25l[mãªã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;86H[K[27;12H[?12l[?25h[?25lã„ã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;84H[K[27;12H[?12l[?25h[?25lã‹ã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;82H[K[27;12H[?12l[?25h[?25lã¤ä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;80H[K[27;12H[?12l[?25h[?25lä»¥å‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;78H[K[27;12H[?12l[?25h[?25lå‰ã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;76H[K[27;12H[?12l[?25h[?25lã®è¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;74H[K[27;12H[?12l[?25h[?25lè¡Œã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;72H[K[27;12H[?12l[?25h[?25lã§exit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;70H[K[27;12H[?12l[?25h[?25lexit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;68H[K[27;12H[?12l[?25h[?25lxit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;67H[K[27;12H[?12l[?25h[?25lit(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;66H[K[27;12H[?12l[?25h[?25lt(1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;65H[K[27;12H[?12l[?25h[?25l[46m([m1[46m)[mã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;64H[K[27;12H[?12l[?25h[?25l1)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;63H[K[27;12H[?12l[?25h[?25l)ã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;62H[K[27;12H[?12l[?25h[?25lã—ãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;61H[K[27;12H[?12l[?25h[?25lãªã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;59H[K[27;12H[?12l[?25h[?25lã„æ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;57H[K[27;12H[?12l[?25h[?25læ™‚ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;55H[K[27;12H[?12l[?25h[?25lã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;53H[K[27;12H[?12l[?25h[?25largv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;51H[K[27;12H[?12l[?25h[?25l

[1m-- INSERT --[27;13H[?12l[?25h[?25l[mç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;22H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;24H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;28H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;36H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«ä»£å…¥ */[27;46H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[28;12H[K[27;56H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]][27;1H[93m    [m); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */
[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +[94m@                                                                                       [27;56H[?12l[?25h[?25l[m[27;15H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;14H[?12l[?25h[?25l å®Ÿå¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;17H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;18H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;19H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;19H[?12l[?25h[?25l-n"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;20H[?12l[?25h[?25lne"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;21H[?12l[?25h[?25leg"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;22H[?12l[?25h[?25lga"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;23H[?12l[?25h[?25lat"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;24H[?12l[?25h[?25lti"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;25H[?12l[?25h[?25liv"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;26H[?12l[?25h[?25lve"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;27H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;30H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;40H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;42H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥  [28;1H[93m    [m*/[28;7H[K[27;46H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦negativv[28;1H[93m    [meã«ä»£å…¥ */[27;54H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›[94m>>[m[28;1H[93m    [mã—ã¦negativeã«ä»£å…¥ */[27;64H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’inn[28;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[27;74H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [27;1H[93m    [m1]); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* ar[28;1H[94m@                                                                                       [27;61H[?12l[?25h[?25l[m[27;17H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;16H[?12l[?25h[?25l å®Ÿå¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;19H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;20H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;21H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;21H[?12l[?25h[?25l-t"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;22H[?12l[?25h[?25lth"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;23H[?12l[?25h[?25lhr"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;24H[?12l[?25h[?25lre"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;25H[?12l[?25h[?25lea"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;26H[?12l[?25h[?25lad"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;27H[?12l[?25h[?25lds"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;28H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;31H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;41H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥  [28;1H[93m    [m*/[28;7H[K[27;43H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_threadsã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[27;47H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦num_thh[28;1H[93m    [mreadsã«ä»£å…¥ */[27;55H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ› [28;1H[93m    [mã—ã¦num_threadsã«ä»£å…¥ */[27;65H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[28;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[27;75H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* arr[27;1H[93m    [mgv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +[94m@                                                                                       [27;44H[?12l[?25h[?25l[m[27;7H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;6H[?12l[?25h[26;88H[?25l å®Ÿ[27;4H[93m [må¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;9H[?12l[?25harg[?25lv[46m[[mi + 1[46m][27;13H[?12l[?25h[?25l[[?12l[?25h[?25l[m[i + 1][?12l[?25h + [?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;12H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;10H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;11H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;11H[?12l[?25h[?25l-i"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;12H[?12l[?25h[?25lit"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;13H[?12l[?25h[?25lte"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;14H[?12l[?25h[?25ler"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;15H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;18H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;28H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;30H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;34H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[27;42H[?12l[?25h[?25l[27;42H[K[28;1H[93m692 [margv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[28;46H[K[28;5H[?12l[?25h[?25l[27;42Hargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£å…¥ */[28;4H[93m [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +[94m@                                                                                       [27;42H[?12l[?25h[?25l[må ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[28;1H[93m    [må…¥ */[28;10H[K[27;52H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [27;1H[93m    [m1]); /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);[28;1H[94m@                                                                                       [27;52H[?12l[?25h[?25l[m[27;17H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][27;16H[?12l[?25h[?25l å®Ÿå¼•æ•°/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;16H[?12l[?25h[?25l"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;17H[?12l[?25h[?25l""/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;18H[?12l[?25h[?25l"-"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;18H[?12l[?25h[?25l-m"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;19H[?12l[?25h[?25lmi"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;20H[?12l[?25h[?25lin"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;21H[?12l[?25h[?25ln-"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;22H[?12l[?25h[?25l-c"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;23H[?12l[?25h[?25lco"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;24H[?12l[?25h[?25lou"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;25H[?12l[?25h[?25lun"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;26H[?12l[?25h[?25lnt"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;27H[?12l[?25h"[?25lt/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;76H[K[27;27H[?12l[?25h[?25ln/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;75H[K[27;26H[?12l[?25h[?25lu/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;74H[K[27;25H[?12l[?25h[?25lo/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;73H[K[27;24H[?12l[?25h[?25lc/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;72H[K[27;23H[?12l[?25h[?25l-/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;71H[K[27;22H[?12l[?25h[?25ln/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;70H[K[27;21H[?12l[?25h[?25li/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;69H[K[27;20H[?12l[?25h[?25lm/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;68H[K[27;19H[?12l[?25h[?25l-/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;67H[K[27;18H[?12l[?25h[?25l"/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;66H[K[27;17H[?12l[?25h[?25l/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;65H[K[27;16H[?12l[?25h[?25l/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;63H[K[27;14H[?12l[?25h[?25l/* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;61H[K[27;12H[?12l[?25h[?25l /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;59H[K[27;10H[?12l[?25h/* /* [?25l å®Ÿå¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;19H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;20H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;21H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;21H[?12l[?25h[?25l-m"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;22H[?12l[?25h[?25lmi"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;23H[?12l[?25h[?25lin"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;24H[?12l[?25h[?25ln-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;25H[?12l[?25h[?25l-c"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;26H[?12l[?25h[?25lco"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;27H[?12l[?25h[?25lou"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;28H[?12l[?25h[?25lun"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;29H[?12l[?25h[?25lnt"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;30H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;33H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;43H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥  [28;1H[93m    [m*/[28;7H[K[27;45H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[27;49H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦min__[28;1H[93m    [mcountã«ä»£å…¥ */[27;57H[?12l[?25h[?25lå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰ [28;1H[93m    [mæ›ã—ã¦min_countã«ä»£å…¥ */[27;67H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[28;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[27;77H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[26;1H[93m    [m /* argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[28;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[26;53H[?12l[?25h[?25l[26;13H[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][?12l[?25h[?25l[46m[[mi + 1[46m][?12l[?25h[?25l[?12l[?25h[?25l[m[i + 1][26;12H[?12l[?25h[?25l å®Ÿå¼•æ•°argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;15H[?12l[?25h[?25l"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;16H[?12l[?25h[?25l""argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;17H[?12l[?25h[?25l"-"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;17H[?12l[?25h[?25l-c"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;18H[?12l[?25h[?25lcl"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;19H[?12l[?25h[?25lla"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;20H[?12l[?25h[?25las"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;21H[?12l[?25h[?25lss"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;22H[?12l[?25h[?25lse"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;23H[?12l[?25h[?25les"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;24H[?12l[?25h"[?25l"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;27H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;37H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;39H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;43H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«[94m>>[m[27;1H[93m    [mä»£å…¥ */[27;13H[K[28;1H[94m@                                                                                       [26;51H[?12l[?25h[?25l[margv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£[94m>>[m[27;1H[93m    [må…¥ */[27;10H[K[26;49H[?12l[?25h[29;1H[K[26;47H[?25l[?12l[?25h[?25l


1 change; before #587  12 seconds ago[25;28r[28;1H
[1;29r[25;1H[93m693[m[1C  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[26;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[28;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[29;1H[K[26;25H[?12l[?25h-classes"[?25l


[1m-- INSERT --[26;26H[?12l[?25h[?25l[m"ãŒargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;27H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;37H[?12l[?25h[?25lã¨argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;39H[?12l[?25h[?25lå…±ã«argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;43H[?12l[?25h[?25læ›¸ã‹ã‚ŒãŸargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦classesã«[94m>>[m[27;1H[93m    [mä»£å…¥ */[27;13H[K[28;1H[94m@                                                                                       [26;51H[?12l[?25h[?25l[må ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦[27;4H[93m [mclassesã«ä»£å…¥ */[26;61H[?12l[?25h[?25lç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[27;4H[93m [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */[26;71H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[25;1H[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[26;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[28;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[26;46H[?12l[?25h[28;53H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[27;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {[27;34H[?12l[?25h[?25l[28;45H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[27;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f[28;1H[94m@                                                                                       [27;19H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[25;1H[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);                   // Precompute ff[26;1H[93m    [m(x) = x / [46m([mx + 1[46m)[m
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */[26;22H[?12l[?25h[29;1H[K[26;21H[?25l[?12l[?25h[?25l


:[?12l[?25hw[?25l"word2vec.c" 703L, 44594C written[26;21H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44594C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h700[?25l[27m[m[H[2J[1;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* å®Ÿ[5;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[6;1H[93m    [må…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [8;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[9;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[11;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[12;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[14;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[16;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[18;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[21;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[23;1H[93m    [m(x) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[94m~                                                                                       [24;7H[?12l[?25h[22;7H[20;7H[19;7H[17;7H[15;7H[13;7H[10;7H[13;7H[15;7H[17;7H[19;7H[17;7H[15;7H[13;7H[10;7H[13;7H[15;7H[17;7H[19;7H[20;7H[22;7H[?25l[m[19;44H[46m{[24;7H}[?12l[?25h[?25l[m[19;44H{[24;7H}[25;7H[?12l[?25h[26;7H[25;7H[?25l[19;44H[46m{[24;7H}[?12l[?25h[?25l[m[19;44H{[24;7H}[22;7H[?12l[?25h[20;7H[19;7H[17;7H[15;7H[13;7H[10;7H[7;7H[4;7H[1;7H[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m689 [m  if ((i = ArgPos((char *)"-negative", argc, argv)) > 0) negative = atoi(argv[i + 1]][2;1H[93m    [m); /* å®Ÿå¼•æ•°"-negative"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’inn[3;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m688 [m  if ((i = ArgPos((char *)"-hs", argc, argv)) > 0) hs = atoi(argv[i + 1]); /* å®Ÿå¼•æ•° [2;1H[93m    [m"-hs"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«[94m>>[m[3;1H[93m    [mä»£å…¥ */[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m687 [m  if ((i = ArgPos((char *)"-sample", argc, argv)) > 0) sample = atof(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°"-sample"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’doubleå‹[3;1H[93m    [mã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m686 [m  if ((i = ArgPos((char *)"-window", argc, argv)) > 0) window = atoi(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°"-window"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[3;1H[93m    [må¤‰æ›ã—ã¦windowã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m685 [m  if ((i = ArgPos((char *)"-output", argc, argv)) > 0) strcpy(output_file, argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-output"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šoutput_fileã«ç›´å¾Œã®æ•°å­—arr[3;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[3L[1;29r[1;1H[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*  [2;1H[93m    [må®Ÿå¼•æ•°"-alpha"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alpp[3;1H[93m    [mhaã«ä»£å…¥ */[28;1H[94m@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m683 [m  if (cbow) alpha = 0.05;[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m682 [m  if ((i = ArgPos((char *)"-cbow", argc, argv)) > 0) cbow = atoi(argv[i + 1]); /* å®Ÿ [2;1H[93m    [må¼•æ•°"-cbow"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[3;1H[93m    [mã¦cbowã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m681 [m  if ((i = ArgPos((char *)"-binary", argc, argv)) > 0) binary = atoi(argv[i + 1]); //[2;1H[93m    [m* å®Ÿå¼•æ•°"-binary"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[3;1H[93m    [må¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m680 [m  if ((i = ArgPos((char *)"-debug", argc, argv)) > 0) debug_mode = atoi(argv[i + 1]))[2;1H[93m    [m; /* å®Ÿå¼•æ•°"-debug"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[94m>>[m[3;1H[93m    [mã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-read-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šread_vocab_fii[3;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[2;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-save-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šsave_vocab_fii[3;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][2;1H[93m    [m); /* å®Ÿå¼•æ•°"-train"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Štrain_fileã«ç›´å¾Œã®æ•°å­—argv[ii[3;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[1;7H[?12l[?25h[?25l[1;28r[1;1H[3L[1;29r[1;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[2;1H[93m    [m; /* å®Ÿå¼•æ•°"-size"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—atoi(argv[i + 1]ã‚’inn[3;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m675 [m  read_vocab_file[0] = 0;[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m674 [m  save_vocab_file[0] = 0;[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m673 [m  output_file[0] = 0;[1;7H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[27;1H[94m@                                                                                       [28;1H@                                                                                       [1;7H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m671 [m    return 0;[1;7H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[2;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[1;7H[?12l[?25h[?25l[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ gi[K[Kmake
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
[1mword2vec.c:623:15: [0m[0;1;35mwarning: [0m[1m'/*' within block comment [-Wcomment][0m
    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[0;1;32m              ^
[0m[1mword2vec.c:628:33: [0m[0;1;31merror: [0m[1mfunction definition is not allowed here[0m
int main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•...
[0;1;32m                                ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:616:46: [0m[0;1;30mnote: [0mto match this '{'[0m
int ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[0;1;32m                                             ^
[0m1 warning and 2 errors generated.
make: *** [word2vec] Error 1
bash-3.2$ :s[Kset number[K[K[K[K[K[K[K[K[K[K[Kvi word2vec.c 
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44594C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hs[?25l[29;2H[K[29;2H[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h623[?25l[27m[m[H[2J[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[6;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [10;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[11;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[12;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[20;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[21;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[14;9H[?12l[?25hreturn a; /* 1 <= a < argc -1[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[?25l[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ :[Kvi word2vec.c 
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44594C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h628[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[15;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;5H[?12l[?25hint mai[?25ln[46m([21C)[13;13H[?12l[?25h[?25l[m([21C)[13;14H[?12l[?25hint argc, char **arg[?25l[13;13H[46m([21C)[?12l[?25h[?25l[m[13;13H([21C)[?12l[?25h [?25l[27m[m[H[2J[1;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* å®Ÿ[5;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[6;1H[93m    [må…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [8;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[9;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[11;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[12;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[14;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[16;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[18;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[21;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[23;1H[93m    [m(x) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[94m~                                                                                       [27;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) [46m{[m /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[15;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;37H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* å®Ÿ[5;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[6;1H[93m    [må…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [8;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[9;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[11;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[12;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[14;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[16;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[18;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[21;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[23;1H[93m    [m(x) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[94m~                                                                                       [27;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) [46m{[m /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[15;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;37H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* å®Ÿ[5;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[6;1H[93m    [må…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [8;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[9;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[11;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[12;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[14;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[16;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[18;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[21;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[23;1H[93m    [m(x) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[94m~                                                                                       [27;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) [46m{[m /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œ**argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒ[94m>>[m[15;1H[93m    [mã‚¤ãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;37H[?12l[?25h[?25l{[16;12H[?12l[?25h[13;11H[16;11H[13;11Hi[?25ln[46m([21C)[13;13H[?12l[?25h[?25l[m([21C)[13;14H[?12l[?25hint argc, char **arg[?25l[13;13H[46m([21C)[?12l[?25h[?25l[m[13;13H([21C)[?12l[?25h { /* main[2C[2C[2C703[2C[2C[2C[2C(argc:[2C[2C[2C[2C[2C[2C[2C[2C[2C[14;5H[2C[2C[2C-[?25l1[46m([29C)[m[44C[94m>>[m[15;1H[93m [14;13H[?12l[?25h[?25l[m([29C)[44C[94m>>[m[15;1H[93m [14;14H[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[margc==[?25l[14;13H[46m([29C)[m[44C[94m>>[m[15;1H[93m [14;43H[?12l[?25h[?25l[m[14;13H([29C)[44C[94m>>[m[15;1H[93m [14;44H[?12l[?25h[2C[?25l[m*argv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[15;5Hãƒ³ã‚¿ã®é…åˆ— */[15;18H[K[14;46H[?12l[?25h[?25largv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[15;1H[93m [14;46H[?12l[?25h[?25l[29;1H[m:[?12l[?25hw[?25l"word2vec.c" 703L, 44592C written[14;46H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c [C[C[C[C[C[C[C[C[C[Cmake[Kvi word2vec.c[C[C[C[C[C[C[C[C[C[Cmake[K
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
[1mword2vec.c:623:15: [0m[0;1;35mwarning: [0m[1m'/*' within block comment [-Wcomment][0m
    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[0;1;32m              ^
[0m[1mword2vec.c:628:33: [0m[0;1;31merror: [0m[1mfunction definition is not allowed here[0m
int main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•...
[0;1;32m                                ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:616:46: [0m[0;1;30mnote: [0mto match this '{'[0m
int ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[0;1;32m                                             ^
[0m1 warning and 2 errors generated.
make: *** [word2vec] Error 1
bash-3.2$ makevi word2vec.c 
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44592C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h616[?25l[27m[m[H[2J[1;1H[93m603 [m[7C }
[93m604 [m[7C cl[c] = closeid;
[93m605 [m      }
[93m606 [m    }
[93m607 [m    // Save the K-means classes
[93m608 [m    for (a = 0; a < vocab_size; a++) fprintf(fo, "%s %d\n", vocab[a].word, cl[a]);
[93m609 [m    free(centcn); /* 572è¡Œç›®ã§ç¢ºä¿ã—ãŸcentcnã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[17;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [21;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[22;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[23;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */[14;5H[?12l[?25hint ArgPo[?25ls[46m([32C)[14;15H[?12l[?25h[?25l[m([32C)[14;16H[?12l[?25hchar *str, int argc, char **arg[?25l[14;15H[46m([32C)[?12l[?25h[?25l[m[14;15H([32C)[?12l[?25h[?25l [46m{[28;5H}[14;50H[?12l[?25h[?25l[m{[28;5H}[14;51H[?12l[?25h /* 676[2C[2C[2C[2C[2C[2C[2C *[?25l[46m{[28;5H}[14;50H[?12l[?25h[?25l[m{[28;5H}[15;12H[?12l[?25h[16;50H arg[?25lv[46m[[ma[46m][m[30C[94m>>[m[17;1H[93m [16;55H[?12l[?25h[?25l[m[a][30C[94m>>[m[17;1H[93m [16;56H[?12l[?25h[?25l[m[46m[[ma[46m][m[30C[94m>>[m[17;1H[93m [16;57H[?12l[?25h[?25l[m[16;45H[46m([m[9C[a][46m)[m[29C[94m>>[m[17;1H[93m [16;58H[?12l[?25h[?25l[m[16;37H[46m([m[7C([12C)[46m)[m[28C[94m>>[m[17;1H[93m [16;59H[?12l[?25h[?25l[m[16;37H([21C)[28C[94m>>[m[17;1H[93m [16;60H[?12l[?25h[?25l[m [46m{[m[26C[94m>>[m[17;1H[93m [m[26;7H[46m}[16;61H[?12l[?25h[?25l[m{[26C[94m>>[m[17;1H[93m [m[26;7H}[16;62H[?12l[?25h[?25l[26C[94m>>[m[17;1H[93m [m[18;28H[46m{[24;9H}[18;28H[?12l[?25h[?25l[m{[24;9H}[16;62H[?12l[?25h[?25l[46m{[m[26C[94m>>[m[17;1H[93m [m[26;7H[46m}[16;61H[?12l[?25h[?25l[29;1H[m:[?12l[?25hw[?25l[29;2H[K[29;2H[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ :[Kvi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44592C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h623[?25l[27m[m[H[2J[1;1H[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[6;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [10;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[11;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[12;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; /* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[20;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[21;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");[14;9H[?12l[?25hreturn a; /* /* 1 <= a < argc -1[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C [?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h;  /* 1 <= a < argc -1[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C[2C *[15;25H[14;80H[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[m[a][?12l[?25h[?25l*1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[14;80H[K[14;21H[?12l[?25h[?25l//[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;21H[?12l[?25h[?25l[m/ 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[14;22H[?12l[?25h1 <= a < argc -1[2C[2C[2C[2C[2Cstr==arg[?25lv[46m[[ma[46m][?12l[?25h[?25l[[?12l[?25h[?25l[ma[?12l[?25h[?25l[1C[?12l[?25h[?25l[a][2C[?12l[?25h[2C[2C[2C[2C[2C[2C[2C[2C */[?25l[14;80H[K[14;80H[?12l[?25h[?25l[14;79H[K[14;79H[?12l[?25h[?25l[?12l[?25h[?25l[14;76H[K[14;76H[?12l[?25h[?25lã‚‹[?12l[?25h[29;1H[K[14;76H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25hw[?25l"word2vec.c" 703L, 44589C written[14;76H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c [C[C[C[C[C[C[C[C[C[Cmake[K
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
[1mword2vec.c:624:5: [0m[0;1;35mwarning: [0m[1m'/*' within block comment [-Wcomment][0m
  } /* 618è¡Œç›®ã‹ã‚‰ */
[0;1;32m    ^
[0m[1mword2vec.c:628:33: [0m[0;1;31merror: [0m[1mfunction definition is not allowed here[0m
int main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•...
[0;1;32m                                ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:618:57: [0m[0;1;30mnote: [0mto match this '{'[0m
  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]...
[0;1;32m                                                        ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:616:46: [0m[0;1;30mnote: [0mto match this '{'[0m
int ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[0;1;32m                                             ^
[0m1 warning and 3 errors generated.
make: *** [word2vec] Error 1
bash-3.2$ makevi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44589C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset nub[?25l[29;8H[K[29;8H[?12l[?25hmber[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h624[?25l[27m[m[H[2J[1;1H[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[5;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [9;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[10;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[11;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; // 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹
[93m624 [m  } /* 618è¡Œç›®ã‹ã‚‰ */
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[19;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[20;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");[14;7H[?12l[?25h} /* 61 /[?25l/ 618è¡Œç›®ã‹ã‚‰ */[14;25H[K[14;10H[?12l[?25h[?25l[29;1H1 change; before #1  2 seconds ago[14;9H/* 618è¡Œç›®ã‹ã‚‰ */[14;10H[?12l[?25h[?25l//[?12l[?25h/ 618[2C[2C[2C[2C  [?25l /[14;25H[K[14;24H[?12l[?25h[?25l[14;24H[K[14;23H[?12l[?25h[?25l[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;2H[K[29;2H[?12l[?25hw[?25l"word2vec.c" 703L, 44586C written[14;21H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c[C[C[C[C[C[C[C[C[C[Cmake[K
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
[1mword2vec.c:625:14: [0m[0;1;35mwarning: [0m[1m'/*' within block comment [-Wcomment][0m
  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[0;1;32m             ^
[0m[1mword2vec.c:628:33: [0m[0;1;31merror: [0m[1mfunction definition is not allowed here[0m
int main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•...
[0;1;32m                                ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:618:57: [0m[0;1;30mnote: [0mto match this '{'[0m
  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]...
[0;1;32m                                                        ^
[0m[1mword2vec.c:703:2: [0m[0;1;31merror: [0m[1mexpected '}'[0m
}
[0;1;32m ^
[0m[1mword2vec.c:616:46: [0m[0;1;30mnote: [0mto match this '{'[0m
int ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[0;1;32m                                             ^
[0m1 warning and 3 errors generated.
make: *** [word2vec] Error 1
bash-3.2$ makevi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44586C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h628[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; // 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹
[93m624 [m  } // 618è¡Œç›®ã‹ã‚‰
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[15;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;5H[?12l[?25hint mai[?25ln[46m([21C)[13;13H[?12l[?25h[?25l[m([21C)[13;14H[?12l[?25hint argc, char **arg[?25l[13;13H[46m([21C)[?12l[?25h[?25l[m[13;13H([21C)[?12l[?25h {[?25l[27m[m[H[2J[1;1H[93m690 [m  if ((i = ArgPos((char *)"-threads", argc, argv)) > 0) num_threads = atoi(argv[i +  [2;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[3;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */
[93m691 [m  if ((i = ArgPos((char *)"-iter", argc, argv)) > 0) iter = atoi(argv[i + 1]); /* å®Ÿ[5;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[6;1H[93m    [må…¥ */
[93m692 [m  if ((i = ArgPos((char *)"-min-count", argc, argv)) > 0) min_count = atoi(argv[i +  [8;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[9;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */
[93m693 [m  if ((i = ArgPos((char *)"-classes", argc, argv)) > 0) classes = atoi(argv[i + 1]);;[11;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[12;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[14;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[16;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[18;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {
[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[21;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute ff[23;1H[93m    [m(x) = x / (x + 1)
[93m700 [m  }
[93m701 [m  TrainModel(); /* 545è¡Œç›®ã§å®šç¾©ã—ãŸTrainModelã‚’é–‹ã */
[93m702 [m  return 0;
[93m703 [m}
[94m~                                                                                       [27;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [4;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[5;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[6;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; // 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹
[93m624 [m  } // 618è¡Œç›®ã‹ã‚‰
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) [46m{[m /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[14;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[15;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");[13;37H[?12l[?25h[?25l{[16;12H[?12l[?25h[17;37H[18;37H[19;29H[20;37H[21;36H[22;37H[23;37H[24;37H[25;34H[26;37H[27;36H[28;37H[?25l[1;28r[28;1H
[1;29r[28;1H[93m642 [m    printf[46m([m"\t-sample <float>\n"[46m)[m;[?12l[?25h[?25l[1;28r[1;1H[5M[1;29r[23;15H([21C)
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higherr[25;1H[93m    [m frequency in the training data\n");
[93m644 [m    printf("\t\twill be randomly down-sampled; default is 1e-3, useful range is (0,  [27;1H[93m    [m1e-5)\n");
[93m645 [m    printf("\t-hs <int>\n");[24;37H[?12l[?25h[26;37H[28;32H[?25l[1;28r[28;1H
[1;29r[28;1H[93m646 [m    printf("\t\tUse Hierarchical Softmax; default is 0 (not used)\n");[28;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m647 [m    printf[46m([m"\t-negative <int>\n"[46m)[m;[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[26;15H([21C)
[93m648 [m    printf("\t\tNumber of negative examples; default is 5, common values are 3 - 10  [28;1H[93m    [m(0 = not used)\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m649 [m    printf("\t-threads <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m650 [m    printf("\t\tUse <int> threads (default 12)\n");[28;37H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m651 [m    printf("\t-iter <int>\n");
[93m652 [m    printf("\t\tRun more training iterations (default 5)\n");
[93m653 [m    printf("\t-min-count <int>\n");[26;34H[?12l[?25h[27;37H[28;37H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m654 [m    printf("\t\tThis will discard words that appear less than <int> times; default ii[28;1H[93m    [ms 5\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m655 [m    printf("\t-alpha <float>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m656 [m    printf("\t\tSet the starting learning rate; default is 0.025 for skip-gram and 00[28;1H[93m    [m.05 for CBOW\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m657 [m    printf("\t-classes <int>\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m658 [m    printf("\t\tOutput word classes rather than word vectors; default number of class[28;1H[93m    [mses is 0 (vectors are written)\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m659 [m    printf("\t-debug <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m660 [m    printf("\t\tSet the debug mode (default = 2 = more info during training)\n");[28;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m661 [m    printf("\t-binary <int>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m662 [m    printf("\t\tSave the resulting vectors in binary moded; default is 0 (off)\n");[28;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m663 [m    printf("\t-save-vocab <file>\n");[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");[28;37H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the tr[28;1H[94m@                                                                                       [27;37H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[26;1H[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[27;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");[26;37H[?12l[?25h[28;34H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[28;1H[93m    [mgram model)\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m669 [m    printf("\nExamples:\n");[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[28;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");[27;37H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m671 [m    return 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m673 [m  output_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m674 [m  save_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m675 [m  read_vocab_file[0] = 0;[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°"-size"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—atoi(argv[i + 1]ã‚’inn[28;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */[26;37H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][27;1H[93m    [m); /* å®Ÿå¼•æ•°"-train"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Štrain_fileã«ç›´å¾Œã®æ•°å­—argv[ii[28;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;37H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-save-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šsave_vocab_fii[28;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;37H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-read-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šread_vocab_fii[28;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;37H[?12l[?25h[23;37H[20;37H[17;37H[16;29H[15;29H[14;25H[13;37H[?25l[27m[m[H[2J[1;1H[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [2;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[3;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[4;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; // 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹
[93m624 [m  } // 618è¡Œç›®ã‹ã‚‰
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[12;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[13;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) [46m{[m /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");
[93m632 [m    printf("Options:\n");
[93m633 [m    printf("Parameters for training:\n");
[93m634 [m    printf("\t-train <file>\n");
[93m635 [m    printf("\t\tUse text data from <file> to train the model\n");
[93m636 [m    printf("\t-output <file>\n");
[93m637 [m    printf("\t\tUse <file> to save the resulting word vectors / word clusters\n");
[93m638 [m    printf("\t-size <int>\n");
[93m639 [m    printf("\t\tSet size of word vectors; default is 100\n");
[93m640 [m    printf("\t-window <int>\n");
[93m641 [m    printf("\t\tSet max skip length between words; default is 5\n");
[93m642 [m    printf("\t-sample <float>\n");
[93m643 [m    printf("\t\tSet threshold for occurrence of words. Those that appear with higher[28;1H[94m@                                                                                       [15;22H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m663 [m    printf("\t-save-vocab <file>\n");
[93m664 [m    printf("\t\tThe vocabulary will be saved to <file>\n");
[93m665 [m    printf("\t-read-vocab <file>\n");
[93m666 [m    printf("\t\tThe vocabulary will be read from <file>, not constructed from the trr[5;1H[93m    [maining data\n");
[93m667 [m    printf("\t-cbow <int>\n");
[93m668 [m    printf("\t\tUse the continuous bag of words model; default is 1 (use 0 for skip--[8;1H[93m    [mgram model)\n");
[93m669 [m    printf("\nExamples:\n");
[93m670 [m    printf("./word2vec -train data.txt -output vec.txt -size 200 -window 5 -sample 11[11;1H[93m    [me-4 -negative 5 -hs 0 -binary 0 -cbow 1 -iter 3\n\n");
[93m671 [m    return 0;
[93m672 [m  } /* 630è¡Œç›®ã‹ã‚‰ã®ifæ–‡çµ‚ã‚ã‚Š */
[93m673 [m  output_file[0] = 0;
[93m674 [m  save_vocab_file[0] = 0;
[93m675 [m  read_vocab_file[0] = 0;
[93m676 [m  if ((i = ArgPos((char *)"-size", argc, argv)) > 0) layer1_size = atoi(argv[i + 1]))[18;1H[93m    [m; /* å®Ÿå¼•æ•°"-size"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—atoi(argv[i + 1]ã‚’inn[19;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦layer1_sizeã«ä»£å…¥) */
[93m677 [m  if ((i = ArgPos((char *)"-train", argc, argv)) > 0) strcpy(train_file, argv[i + 1]][21;1H[93m    [m); /* å®Ÿå¼•æ•°"-train"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Štrain_fileã«ç›´å¾Œã®æ•°å­—argv[ii[22;1H[93m    [m + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m678 [m  if ((i = ArgPos((char *)"-save-vocab", argc, argv)) > 0) strcpy(save_vocab_file, aa[24;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-save-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šsave_vocab_fii[25;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */
[93m679 [m  if ((i = ArgPos((char *)"-read-vocab", argc, argv)) > 0) strcpy(read_vocab_file, aa[27;1H[93m    [mrgv[i + 1]); /* å®Ÿå¼•æ•°"-read-vocab"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šread_vocab_fii[28;1H[93m    [mleã«ç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[13;7H[?12l[?25h[14;7H[15;7H[16;7H[17;7Hif[?25l [46m([45C)[m[31C))[18;1H[93m [m[86Cnn[19;1H[93m [17;10H[?12l[?25h[?25l[m([45C)[31C))[18;1H[93m [m[86Cnn[19;1H[93m [m[20;10H[46m([46C)[m[30C]][21;1H[93m [m[86Cii[22;1H[93m [20;10H[?12l[?25h[?25l[m([46C)[30C]][21;1H[93m [m[86Cii[22;1H[93m [m[23;10H[46m([51C)[m[25Caa[24;1H[93m [m[86Cii[25;1H[93m [23;10H[?12l[?25h[?25l[m[20;10H[46m([46C)[m[30C]][21;1H[93m [m[86Cii[22;1H[93m [m[23;10H([51C)[25Caa[24;1H[93m [m[86Cii[25;1H[93m [20;10H[?12l[?25h[?25l[m([46C)[30C]][21;1H[93m [m[86Cii[22;1H[93m [m[23;10H[46m([51C)[m[25Caa[24;1H[93m [m[86Cii[25;1H[93m [23;10H[?12l[?25h[?25l[m([51C)[25Caa[24;1H[93m [m[86Cii[25;1H[93m [m[26;10H[46m([51C)[m[25Caa[27;1H[93m [m[86Cii[28;1H[93m [26;10H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[23;10H([51C)[25Caa[24;1H[93m [m[86Cii[25;1H[93m 
680 [m  if [46m([m(i = ArgPos((char *)"-debug", argc, argv)) > 0[46m)[m debug_mode = atoi(argv[i + 1]))[27;1H[93m    [m; /* å®Ÿå¼•æ•°"-debug"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[94m>>[m[28;1H[93m    [mã«å¤‰æ›ã—ã¦debug_modeã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([46C)[30C))[24;1H[93m [m[86C[94m>>[m[25;1H[93m 
681 [m  if [46m([m(i = ArgPos((char *)"-binary", argc, argv)) > 0[46m)[m binary = atoi(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°"-binary"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦binaryã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([47C)[29C//[24;1H[93m [m[86C[94m>>[m[25;1H[93m 
682 [m  if [46m([m(i = ArgPos((char *)"-cbow", argc, argv)) > 0[46m)[m cbow = atoi(argv[i + 1]); /* å®Ÿ[27;1H[93m    [må¼•æ•°"-cbow"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—[94m>>[m[28;1H[93m    [mã¦cbowã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[24;10H([45C)


[93m683 [m  if [46m([mcbow[46m)[m alpha = 0.05;
[93m684 [m  if ((i = ArgPos((char *)"-alpha", argc, argv)) > 0) alpha = atof(argv[i + 1]); /*[94m@                                                                                       [27;10H[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[25;10H(cbow)
[93m684 [m  if [46m([m(i = ArgPos((char *)"-alpha", argc, argv)) > 0[46m)[m alpha = atof(argv[i + 1]); /*  [27;1H[93m    [må®Ÿå¼•æ•°"-alpha"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’doubleå‹ã«å¤‰æ›ã—ã¦alpp[28;1H[93m    [mhaã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([46C)[30C  [24;1H[93m [m[86Cpp[25;1H[93m 
685 [m  if [46m([m(i = ArgPos((char *)"-output", argc, argv)) > 0[46m)[m strcpy(output_file, argv[i +  [27;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-output"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šoutput_fileã«ç›´å¾Œã®æ•°å­—arr[28;1H[93m    [mgv[i + 1]ã‚’ã‚³ãƒ”ãƒ¼ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([47C)[29C  [24;1H[93m [m[86Crr[25;1H[93m 
686 [m  if [46m([m(i = ArgPos((char *)"-window", argc, argv)) > 0[46m)[m window = atoi(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°"-window"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«[94m>>[m[28;1H[93m    [må¤‰æ›ã—ã¦windowã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[23;10H[46m([47C)[m[29C  [24;1H[93m [m[86Crr[25;1H[93m [m[26;10H([47C)[29C//[27;1H[93m [m[86C[94m>>[m[28;1H[93m [23;10H[?12l[?25h[?25l[m([47C)[29C  [24;1H[93m [m[86Crr[25;1H[93m [m[26;10H[46m([47C)[m[29C//[27;1H[93m [m[86C[94m>>[m[28;1H[93m [26;10H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[23;10H([47C)[29C//[24;1H[93m [m[86C[94m>>[m[25;1H[93m 
687 [m  if [46m([m(i = ArgPos((char *)"-sample", argc, argv)) > 0[46m)[m sample = atof(argv[i + 1]); //[27;1H[93m    [m* å®Ÿå¼•æ•°"-sample"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’doubleå‹[28;1H[93m    [mã«å¤‰æ›ã—ã¦sampleã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([47C)[29C//[24;1H[93m 

688 [m  if [46m([m(i = ArgPos((char *)"-hs", argc, argv)) > 0[46m)[m hs = atoi(argv[i + 1]); /* å®Ÿå¼•æ•° [27;1H[93m    [m"-hs"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦hsã«[94m>>[m[28;1H[93m    [mä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([43C)[33C  [24;1H[93m [m[86C[94m>>[m[25;1H[93m 
689 [m  if [46m([m(i = ArgPos((char *)"-negative", argc, argv)) > 0[46m)[m negative = atoi(argv[i + 1]][27;1H[93m    [m); /* å®Ÿå¼•æ•°"-negative"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’inn[28;1H[93m    [mtå‹ã«å¤‰æ›ã—ã¦negativeã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([49C)[27C]][24;1H[93m [m[86Cnn[25;1H[93m 
690 [m  if [46m([m(i = ArgPos((char *)"-threads", argc, argv)) > 0[46m)[m num_threads = atoi(argv[i +  [27;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-threads"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’ii[28;1H[93m    [mntå‹ã«å¤‰æ›ã—ã¦num_threadsã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([48C)[28C  [24;1H[93m [m[86Cii[25;1H[93m 
691 [m  if [46m([m(i = ArgPos((char *)"-iter", argc, argv)) > 0[46m)[m iter = atoi(argv[i + 1]); /* å®Ÿ[27;1H[93m    [må¼•æ•°"-iter"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šargv[i + 1]ã‚’intå‹ã«å¤‰æ›ã—ã¦iterã«ä»£[94m>>[m[28;1H[93m    [må…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[23;10H([45C)


[93m692 [m  if [46m([m(i = ArgPos((char *)"-min-count", argc, argv)) > 0[46m)[m min_count = atoi(argv[i +  [27;1H[93m    [m1]); /* å®Ÿå¼•æ•°"-min-count"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1][94m>>[m[28;1H[93m    [mã‚’intå‹ã«å¤‰æ›ã—ã¦min_countã«ä»£å…¥ */[26;10H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[22;10H([50C)[26C  [23;1H[93m [m[86C[94m>>[m[24;1H[93m 
693 [m  if [46m([m(i = ArgPos((char *)"-classes", argc, argv)) > 0[46m)[m classes = atoi(argv[i + 1]);;[26;1H[93m    [m /* å®Ÿå¼•æ•°"-classes"ãŒç›´å¾Œã®æ•°å­—ã¨å…±ã«æ›¸ã‹ã‚ŒãŸå ´åˆã«é™ã‚Šç›´å¾Œã®æ•°å­—argv[i + 1]ã‚’intå‹[27;1H[93m    [mã«å¤‰æ›ã—ã¦classesã«ä»£å…¥ */
[93m694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /*[28;1H[94m@                                                                                       [25;10H[?12l[?25h[?25l[m[22;10H[46m([50C)[m[26C  [23;1H[93m [m[86C[94m>>[m[24;1H[93m [m[25;10H([48C)[28C;;[26;1H[93m [22;10H[?12l[?25h[?25l[m([50C)[26C  [23;1H[93m [m[86C[94m>>[m[24;1H[93m [m[25;10H[46m([48C)[m[28C;;[26;1H[93m [25;10H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[22;10H([48C)[28C;;[23;1H[93m 

694 [m  vocab = (struct vocab_word *)calloc(vocab_max_size, sizeof(struct vocab_word)); /**[26;1H[93m    [m vocabã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m695 [m  vocab_hash = (int *)calloc(vocab_hash_size, sizeof(int)); /* vocab_hashã«å‹•çš„ã«ãƒ¡[94m>>[m[28;1H[93m    [mãƒ¢ãƒª(vocab_hash_size = 30M)å‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */[25;10H[?12l[?25hab =[?25l [46m([19C)[m[52C**[26;1H[93m [25;15H[?12l[?25h[?25l[m([19C)[52C**[26;1H[93m [27;15H[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[26;1H[93m696 [m  expTable = (real *)malloc((EXP_TABLE_SIZE + 1) * sizeof(real)); /* expTableã«å‹•çš„[94m>>[m[27;1H[93m    [mã«ãƒ¡ãƒ¢ãƒªå‰²å½“(ã©ã“ã§è§£æ”¾ï¼Ÿ) */
[93m697 [m  for (i = 0; i < EXP_TABLE_SIZE; i++) {[26;15H[?12l[?25h[28;15H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m698 [m    expTable[i] = exp((i / (real)EXP_TABLE_SIZE * 2 - 1) * MAX_EXP); // Precompute tt[27;1H[93m    [mhe exp() table
[93m699 [m    expTable[i] = expTable[i] / (expTable[i] + 1);[18C // Precompute f[28;1H[94m@                                                                                       [26;15H[?12l[?25h[25;15H[23;15H[m =[?25l [46m([mreal *[46m)[m[62C[94m>>[m[24;1H[93m [23;18H[?12l[?25h[?25l[m(real *)[62C[94m>>[m[24;1H[93m [23;19H[?12l[?25h[mreal [?25l[46m([mreal *[46m)[m[62C[94m>>[m[24;1H[93m [23;25H[?12l[?25h[?25l[m[23;18H(real *)[62C[94m>>[m[24;1H[93m [23;26H[?12l[?25h[mma[?25l[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ git add .
bash-3.2$ git commit -m ""A"d"d" "c"o"m"m"e"n"t"s" "o"n" "w"o"r"d"2"v"e"c"."c" "2"0"1"5"-"1"0"-"2"6"-"2"
[other 280aed8] Add comments on word2vec.c 2015-10-26-2
 2 files changed, 1620 insertions(+), 29 deletions(-)
bash-3.2$ git push
warning: push.default is unset; its implicit value has changed in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the traditional behavior, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

When push.default is set to 'matching', git will push local branches
to the remote branches that already exist with the same name.

Since Git 2.0, Git defaults to the more conservative 'simple'
behavior, which only pushes the current branch to the corresponding
remote branch that 'git pull' uses to update the current branch.

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

Username for 'https://github.com': tatst
Password for 'https://tatst@github.com': 
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects:  25% (1/4)   Compressing objects:  50% (2/4)   Compressing objects:  75% (3/4)   Compressing objects: 100% (4/4)   Compressing objects: 100% (4/4), done.
Writing objects:  25% (1/4)   Writing objects:  50% (2/4)   Writing objects:  75% (3/4)   Writing objects: 100% (4/4)   Writing objects: 100% (4/4), 44.27 KiB | 0 bytes/s, done.
Total 4 (delta 3), reused 0 (delta 0)
To https://github.com/tatst/word2vec.git
   130cff4..280aed8  other -> other
bash-3.2$ git pushcommit -m "Add comments on word2vec.c 2015-10-26-2"[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[Kvi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44586C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset number[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h621[?25l[27m[m[H[2J[1;1H[93m610 [m    free(cent); /* 575è¡Œç›®ã§ç¢ºä¿ã—ãŸcentã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m611 [m    free(cl); /* 573è¡Œç›®ã§ç¢ºä¿ã—ãŸclã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m612 [m  } /* 569è¡Œç›®elseã‹ã‚‰ */
[93m613 [m  fclose(fo); /* 559è¡Œç›®ã§é–‹ã„ãŸfoã‚’é–‰ã˜ã‚‹ */
[93m614 [m} /* 545è¡Œç›®void TrainModel()ã‹ã‚‰ */
[93m615 
616 [mint ArgPos(char *str, int argc, char **argv) { /* 676è¡Œç›®ä»¥ä¸‹ã«é »å‡º */
[93m617 [m  int a;
[93m618 [m  for (a = 1; a < argc; a++) if (!strcmp(str, argv[a])) { /* æ–‡å­—åˆ—strã¨argv[a]ãŒç­‰[94m>>[m[10;1H[93m    [mã—ã„æ™‚ */
[93m619 [m    if (a == argc - 1) {
[93m620 [m      printf("Argument missing for %s\n", str);
[93m621 [m      exit(1); /* 1 <= a < argcã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã«foræ–‡ãŒå‹•ãï¼Œa == argc -  [14;1H[93m    [m1ã®æ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºï¼Œå‡¦ç†å¤±æ•—ã§çµ‚äº†(ã“ã‚ŒãŒæˆç«‹ã™ã‚‹ã®ã¯å®Ÿå¼•æ•°ãŒstrã ã‘ã®å ´åˆã¨ï¼Œ[94m>>[m[15;1H[93m    [må®Ÿå¼•æ•°ã®æœ€å¾ŒãŒstrã®æ™‚ï¼Œi.e. -<argument>ã¨ã ã‘æ›¸ã„ã¦ç›´å¾Œã«æ•°å­—ã‚’æ›¸ã‹ãªã„ã‚±ãƒ¼ã‚¹ã‚’æ’é™¤))[16;1H[93m    [m *
[93m622 [m    }
[93m623 [m    return a; // 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹
[93m624 [m  } // 618è¡Œç›®ã‹ã‚‰
[93m625 [m  return -1; /* å®Ÿå¼•æ•°ãŒç„¡ã„æ™‚ã‚„æ–‡å­—åˆ—strã«ä¸€è‡´ã™ã‚‹argv[a]ãŒç„¡ã„æ™‚ã«ã“ã“ã«æ¥ã‚‹  */
[93m626 [m} /* 616è¡Œç›®ã‹ã‚‰ */
[93m627 
628 [mint main(int argc, char **argv) { /* mainé–¢æ•°ï¼Œ703è¡Œç›®ã¾ã§(argc:ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®[24;1H[93m    [mç·å€‹æ•°-1(ä½•ã‚‚å¼•æ•°ã‚’ã¤ã‘ãªã„æ™‚ã¯argc==1)ï¼Œargv: ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã®æ–‡å­—åˆ—ã‚’æŒ‡ã™ãƒã‚¤[94m>>[m[25;1H[93m    [mãƒ³ã‚¿ã®é…åˆ— */
[93m629 [m  int i;
[93m630 [m  if (argc == 1) { /* ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã«ä½•ã‚‚ä»˜ã‘ãªã„æ™‚ï¼Œ672è¡Œç›®ã¾ã§ */
[93m631 [m    printf("WORD VECTOR estimation toolkit v 0.1c\n\n");[13;11H[?12l[?25h[16;6H[?25l[29;1H[1m-- INSERT --[16;7H[?12l[?25h[?25l[m*/[?12l[?25h[?25l[11;28H[46m{[17;9H}[?12l[?25h[?25l[m[11;28H{[17;9H}[18;78H[?12l[?25h[?25l [?12l[?25h[?25l :[?12l[?25h[?25l[18;79H[K[18;79H[?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l[46m[[ma[46m][?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[m[a][?12l[?25h[?25l/ 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[18;80H[K[18;20H[?12l[?25h[19;19H[2C[2C[18;21H[?25l/* 1 <= a < argc -1ã‹ã¤æ–‡å­—åˆ—str==argv[a]ã®æ™‚ã ã‘ã“ã“ã«æ¥ã‚‹ */[18;21H[?12l[?25h[19;21H[2C[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*_[?12l[?25h_[?25l[19;25H[K[19;25H[?12l[?25h[?25l*/[?12l[?25h[20;25H[19;23H[20;23H[19;21H[?25l/ 618è¡Œç›®ã‹ã‚‰ */[19;25H[K[19;10H[?12l[?25h[?25l/* 618è¡Œç›®ã‹ã‚‰ */[19;11H[?12l[?25h[29;1H[K[19;10H[?25l[?12l[?25h[?25l[29;1H:[?12l[?25hw[?25l"word2vec.c" 703L, 44593C written[19;10H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c[C[C[C[C[C[C[C[C[C[C[5Pgit pushcommit -m "Add comments on word2vec.c 2015-10-26-2"[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[Kvi word2vec.c[C[C[C[C[C[C[C[C[C[Cmake[K
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
bash-3.2$ gi [Kt add .
bash-3.2$ git commit -m ""C"o"r"r"e"c"t" "e"r"r"o"r"s"
[other a99d486] Correct errors
 2 files changed, 124 insertions(+), 4 deletions(-)
bash-3.2$ git push
warning: push.default is unset; its implicit value has changed in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the traditional behavior, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

When push.default is set to 'matching', git will push local branches
to the remote branches that already exist with the same name.

Since Git 2.0, Git defaults to the more conservative 'simple'
behavior, which only pushes the current branch to the corresponding
remote branch that 'git pull' uses to update the current branch.

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

Username for 'https://github.com': tatst  
Password for 'https://tatst@github.com': 
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects:  25% (1/4)   Compressing objects:  50% (2/4)   Compressing objects:  75% (3/4)   Compressing objects: 100% (4/4)   Compressing objects: 100% (4/4), done.
Writing objects:  25% (1/4)   Writing objects:  50% (2/4)   Writing objects:  75% (3/4)   Writing objects: 100% (4/4)   Writing objects: 100% (4/4), 2.26 KiB | 0 bytes/s, done.
Total 4 (delta 3), reused 0 (delta 0)
To https://github.com/tatst/word2vec.git
   280aed8..a99d486  other -> other
bash-3.2$ git pushcommit -m "Correct errors"[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[K[5Pmakevi word2vec.c
[?1049h[?1h=[1;29r[?12;25h[?12l[?25h[27m[m[H[2J[?25l[29;1H"word2vec.c" 703L, 44593C[>c[1;1H//  Copyright 2013 Google Inc. All Rights Reserved.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <pthread.h>

#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
#define EXP_TABLE_SIZE 1000
#define MAX_EXP 6
#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */

const int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabulary[1;1H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hset nun[?25l[29;8H[K[29;8H[?12l[?25hmber[?25l[1;1H[93m  1 [m//  Copyright 2013 Google Inc. All Rights Reserved.
[93m  2 [m//
[93m  3 [m//  Licensed under the Apache License, Version 2.0 (the "License");
[93m  4 [m//  you may not use this file except in compliance with the License.
[93m  5 [m//  You may obtain a copy of the License at
[93m  6 [m//
[93m  7 [m//      http://www.apache.org/licenses/LICENSE-2.0
[93m  8 [m//
[93m  9 [m//  Unless required by applicable law or agreed to in writing, software
[93m 10 [m//  distributed under the License is distributed on an "AS IS" BASIS,
[93m 11 [m//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
[93m 12 [m//  See the License for the specific language governing permissions and
[93m 13 [m//  limitations under the License.
[93m 14 
 15 [m#include <stdio.h>
[93m 16 [m#include <stdlib.h>
[93m 17 [m#include <string.h>
[93m 18 [m#include <math.h>
[93m 19 [m#include <pthread.h>
[93m 20 
 21 [m#define MAX_STRING 100 /* æœ€å¤§æ–‡å­—æ•°ã¯100å­—ã¾ã§ */
[93m 22 [m#define EXP_TABLE_SIZE 1000
[93m 23 [m#define MAX_EXP 6
[93m 24 [m#define MAX_SENTENCE_LENGTH 1000 /* 365è¡Œç›®ã¨403è¡Œç›®ã§ä½¿ç”¨ */
[93m 25 [m#define MAX_CODE_LENGTH 40 /* æœ€å¤§ã‚³ãƒ¼ãƒ‰é•·ã¯40å­—ã¾ã§ */
[93m 26 
 27 [mconst int vocab_hash_size = 30000000;  // Maximum 30 * 0.7 = 21M words in the vocabuu[28;1H[93m    [mlary[1;5H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25h545[?25l[27m[m[H[2J[1;1H[93m534 [m    if (sentence_position >= sentence_length) {
[93m535 [m      sentence_length = 0;
[93m536 [m      continue; /* sentence_position >= sentence_lengthã®æ™‚sentence_length = 0ã¨ã—ãŸ[4;1H[93m    [mä¸Šã§å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ï¼Œ375è¡Œç›®ã«æˆ»ã‚‹ */
[93m537 [m    }
[93m538 [m  } /* 374è¡Œç›®ã‹ã‚‰ç„¡é™ãƒ«ãƒ¼ãƒ—çµ‚ã‚Š */
[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº†(557è¡Œç›®ã¨558è¡Œç›®ã«é–¢ä¿‚) */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread([94m>>[m[17;1H[93m    [mãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (([27;1H[93m    [mvoid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThrr[28;1H[93m    [meadã‚’å®Ÿè¡Œã™ã‚‹ */[13;5H[?12l[?25h[14;5H[15;5H[16;5H[18;5H[19;5H[18;5H[16;5H  pthread_t *pt =[?25l [46m([11C)[m[52C[94m>>[m[17;1H[93m [16;23H[?12l[?25h[?25l[m([11C)[52C[94m>>[m[17;1H[93m [16;24H[?12l[?25h[mpt[18;26H[19;26H[?25l[20;26H[46m[[m0[46m][?12l[?25h[?25l[m[0][21;26H[46m[[m0[46m][?12l[?25h[?25l[m[0][22;26H[?12l[?25h[23;16H[24;26H[25;22H[26;26H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a][94m>>[m[28;1H[93m    [mãŒçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */[27;26H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ6133[28;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */[27;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */[28;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m561 [m    // Save the word vectors[28;26H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_ss[28;1H[93m    [mizeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */[27;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[28;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */[28;26H[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + bb[26;1H[93m    [m], sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layerr[27;1H[93m    [m1_sizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼[28;1H[93m    [mã‚¿ã‚’æ›¸è¾¼ã¿ */[25;26H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizz[27;1H[93m    [me + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[26;26H[?12l[?25h[28;26H[?25l[1;28r[28;1H
[1;29r[28;1H[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */[28;25H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m569 [m  } else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[28;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m570 [m    // Run K-means on the word vectors[28;26H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m571 [m    int clcn = classes, iter = 10, closeid;[28;26H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[28;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */[27;26H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611[94m>>[m[28;1H[93m    [mè¡Œç›®ã§è§£æ”¾ */[27;26H[?12l[?25h[?25l

/[?12l[?25hReadVocab[?25l[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m} /* 263è¡Œç›®ã‹ã‚‰ã®LearnVocabFromTrainFileçµ‚ã‚ã‚Š */
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[8;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[10;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[25;1H[93m    [mizeã®æ™‚ */
[93m316 [m  vocab_size = 0;
[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;10H[?12l[?25h[mReadVoca[?25lb[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h {[?25l[29;1H/ReadVocab[29;11H[K[29;1H[14;37H[?12l[?25h[?25l[29;1H[27m[m[H[2J[1;1H[93m539 [m  fclose(fi); /* 372è¡Œç›®ã§é–‹ã„ãŸtrain_fileã‚’é–‰ã˜ã‚‹ */
[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº†(557è¡Œç›®ã¨558è¡Œç›®ã«é–¢ä¿‚) */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread([94m>>[m[11;1H[93m    [mãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile();
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (([21;1H[93m    [mvoid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThrr[22;1H[93m    [meadã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a][94m>>[m[24;1H[93m    [mãŒçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ6133[26;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */
[93m561 [m    // Save the word vectors[14;36H[?12l[?25hReadVoca[?25lb[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h; else LearnVocabFromTrainFil[?25le[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;80H[?12l[?25h[?25l[m;/[?12l[?25h[?25l[14;80H[K[14;80H[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 3 */[?12l[?25h[?25l30 */[14;86H[?12l[?25h[?25l[15;28r[15;1H[L[1;29r[14;85H06 **[15;1H[93m    [m/[14;87H[?12l[?25h[?25l6è¡Œ[15;4H[93m [mç›® */[?12l[?25h[?25lã® */[?12l[?25h[?25lR */[?12l[?25h[?25lRe */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25ldV */[?12l[?25h[?25lVo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lbã¨ */[?12l[?25h[?25l2 */[?12l[?25h[?25l26 */[?12l[?25h[?25l63 */[?12l[?25h[?25l3è¡Œç›® */[?12l[?25h[?25lã® */[?12l[?25h[?25lL */[?12l[?25h[?25lLe */[?12l[?25h[?25lea */[?12l[?25h[?25lar */[?12l[?25h[?25lrn */[?12l[?25h[?25lnV */[?12l[?25h[?25lVo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lbF */[?12l[?25h[?25lFr */[?12l[?25h[?25lro */[?12l[?25h[?25lom */[?12l[?25h[?25lmT */[?12l[?25h[?25lTr */[?12l[?25h[?25lra */[?12l[?25h[?25lai */[?12l[?25h[?25lin */[?12l[?25h[?25lnF */[?12l[?25h[?25lFi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[14;87H[?25l r306[94m>>[m[15;1H[93m    [mè¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[14;85H[?12l[?25h[?25lre3066[15;1H[93m [14;86H[?12l[?25h[?25l[mea300[15;1H[93m    [m6è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[14;87H[?12l[?25h[?25lad33[15;1H[93m    [m06è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[14;88H[?12l[?25h[?25ld__[15;1H[93m    [m306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;5H[?12l[?25h[?25l[93m [mv306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;6H[?12l[?25h[?25lvo306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;7H[?12l[?25h[?25loc306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;8H[?12l[?25h[?25lca306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;9H[?12l[?25h[?25lab306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;10H[?12l[?25h[?25lb_306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;11H[?12l[?25h[?25l_f306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;12H[?12l[?25h[?25lfi306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;13H[?12l[?25h[?25lil306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;14H[?12l[?25h[?25lle306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;15H[?12l[?25h[?25le[306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;16H[?12l[?25h[?25l[0306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;17H[?12l[?25h[?25l[46m[[m0[46m][m306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;18H[?12l[?25h[?25l[0] 306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;19H[?12l[?25h[?25l !306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;20H[?12l[?25h[?25l!=306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;21H[?12l[?25h[?25l= 306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;22H[?12l[?25h[?25l 0306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;23H[?12l[?25h[?25l0ã®306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;25H[?12l[?25h[?25læ™‚306è¡Œç›®ã®ReadVocabã¨263è¡Œç›®ã®LearnVocabFromTrainFile */[15;27H[?12l[?25h306[2C[2C[2CReadVocab[2C[?25lb263è¡Œç›®ã®LearnVocabFromTrainFile */[15;80H[K[15;45H[?12l[?25h[?25lbï¼Œ263è¡Œç›®ã®LearnVocabFromTrainFile */[15;47H[?12l[?25h[?25l=263è¡Œç›®ã®LearnVocabFromTrainFile */[15;48H[?12l[?25h[?25l==263è¡Œç›®ã®LearnVocabFromTrainFile */[15;49H[?12l[?25h[?25l=0263è¡Œç›®ã®LearnVocabFromTrainFile */[15;50H[?12l[?25h[?25l= 0263è¡Œç›®ã®LearnVocabFromTrainFile */[15;50H[?12l[?25h00[?25l 263è¡Œç›®ã®LearnVocabFromTrainFile */[15;85H[K[15;50H[?12l[?25h[?25l=263è¡Œç›®ã®LearnVocabFromTrainFile */[15;84H[K[15;49H[?12l[?25h[?25l=263è¡Œç›®ã®LearnVocabFromTrainFile */[15;83H[K[15;48H[?12l[?25h[?25l263è¡Œç›®ã®LearnVocabFromTrainFile */[15;82H[K[15;47H[?12l[?25h[?25lb263è¡Œç›®ã®LearnVocabFromTrainFile */[15;80H[K[15;45H[?12l[?25h[?25lbï¼Œ263è¡Œç›®ã®LearnVocabFromTrainFile */[15;47H[?12l[?25h[?25l[16;28r[16;1H[L[1;29r[15;47Hãã†ã§ãªã„æ™‚263è¡Œç›®ã®LearnVocabFromTrainFii[16;1H[93m    [mle */[15;59H[?12l[?25h[?25lã¯263è¡Œç›®ã®LearnVocabFromTrainn[16;1H[93m    [mFile */[15;61H[?12l[?25h[?25lã¯306è¡Œç›®ã®ReadVocabï¼Œãã†ã§ãªã„æ™‚ã¯263è¡Œç›®ã®LearnVocabFromTraa[16;1H[93m    [minFile */[15;29H[?12l[?25h[29;1H[K[15;27H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hReadVocab[?25l[15;38H[?12l[?25h[?25l[29;1H[38;5;224msearch hit BOTTOM, continuing at TOP[27m[m[H[2J[1;1H[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m} /* 263è¡Œç›®ã‹ã‚‰ã®LearnVocabFromTrainFileçµ‚ã‚ã‚Š */
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[8;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[10;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[25;1H[93m    [mizeã®æ™‚ */
[93m316 [m  vocab_size = 0;
[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */
[38;5;224msearch hit BOTTOM, continuing at TOP[14;10H[?12l[?25h[mReadVoca[?25lb[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h [?25l[27m[m[H[2J[1;1H[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[11;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizee[20;1H[93m    [mof(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sii[24;1H[93m    [mzeof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²[25;1H[93m    [må½“ã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®[94m>>[m[26;1H[93m    [må€æ•° */
[93m346 [m    if (syn1 == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢ãƒª[28;1H[93m    [mã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m} /* 263è¡Œç›®ã‹ã‚‰ã®LearnVocabFromTrainFileçµ‚ã‚ã‚Š */
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[8;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[10;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() [46m{[m /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[25;1H[93m    [mizeã®æ™‚ */
[93m316 [m  vocab_size = 0;
[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */[14;22H[?12l[?25h[?25l{[13;5H[?12l[?25h[?25l[5;22H[46m{[12;5H}[?12l[?25h[?25l[m[5;22H{[12;5H}[13;5H[?12l[?25h[14;22H[?25l[27m[m[H[2J[1;1H[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[11;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizee[20;1H[93m    [mof(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sii[24;1H[93m    [mzeof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²[25;1H[93m    [må½“ã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®[94m>>[m[26;1H[93m    [må€æ•° */
[93m346 [m    if (syn1 == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢ãƒª[28;1H[93m    [mã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */[14;5H[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m295 [m  file_size = ftell(fin);
[93m296 [m  fclose(fin);
[93m297 [m} /* 263è¡Œç›®ã‹ã‚‰ã®LearnVocabFromTrainFileçµ‚ã‚ã‚Š */
[93m298 
299 [mvoid SaveVocab() {
[93m300 [m  long long i;
[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[8;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[10;1H[93m    [mcn);
[93m303 [m  fclose(fo);
[93m304 [m}
[93m305 
306 [mvoid ReadVocab() [46m{[m /* voidå‹é–¢æ•°ReadVocab */
[93m307 [m  long long a, i = 0;
[93m308 [m  char c;
[93m309 [m  char word[MAX_STRING];
[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[19;1H[93m    [må°‚ç”¨ã§é–‹ã */
[93m311 [m  if (fin == NULL) {
[93m312 [m    printf("Vocabulary file not found\n");
[93m313 [m    exit(1);
[93m314 [m  }
[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[25;1H[93m    [mizeã®æ™‚ */
[93m316 [m  vocab_size = 0;
[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */
[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */[14;22H[?12l[?25h[?25l{[?12l[?25h /* void[2C[2C[2CReadVocab[?25l[29;1H[1m-- INSERT --[14;47H[?12l[?25h[?25l[mbï¼Œ */[?12l[?25h[?25l3 */[?12l[?25h[?25l33 */[?12l[?25h[?25l37 */[?12l[?25h[?25l7è¡Œç›® */[?12l[?25h[?25lã¾ã§ */[?12l[?25h[29;1H[K[14;23H[?25l[?12l[?25h[?25l[27m[m[H[2J[1;1H[93m325 [m  if (debug_mode > 0) {
[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);
[93m328 [m  }
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */
[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[11;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m}
[93m338 
339 [mvoid InitNet() { /* voidé–¢æ•°IniNet() */
[93m340 [m  long long a, b;
[93m341 [m  unsigned long long next_random = 1;
[93m342 [m  a = posix_memalign((void **)&syn0, 128, (long long)vocab_size * layer1_size * sizee[20;1H[93m    [mof(real)); /*  */
[93m343 [m  if (syn0 == NULL) {printf("Memory allocation failed\n"); exit(1);}
[93m344 [m  if (hs) { /* hs=0ã‚ˆã‚Šã“ã®ifæ–‡ã¯FALSE */
[93m345 [m    a = posix_memalign((void **)&syn1, 128, (long long)vocab_size * layer1_size * sii[24;1H[93m    [mzeof(real)); /* (long long)vocab_size * layer1_size * sizeof(real) bytesã®ãƒ¡ãƒ¢ãƒªã‚’å‰²[25;1H[93m    [må½“ã¦ï¼Œå‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’(void **)&syn1ã«å‰²å½“ã‚‹ï¼å‰²å½“ãŸãƒ¡ãƒ¢ãƒªã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯128ã®[94m>>[m[26;1H[93m    [må€æ•° */
[93m346 [m    if (syn1 == NULL) {printf("Memory allocation failed\n"); exit(1);} /* ä¸Šã§ãƒ¡ãƒ¢ãƒª[28;1H[93m    [mã®å‰²å½“ã«å¤±æ•—ã—ãŸæ™‚ã«è¡¨ç¤º */[14;5H[?12l[?25h[?25l[29;1H[1m-- INSERT --[14;6H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 3 */[?12l[?25h[?25l30 */[?12l[?25h[?25l06 */[?12l[?25h[?25l6è¡Œç›® */[?12l[?25h[?25lã‹ã‚‰ã® */[?12l[?25h[?25lR */[?12l[?25h[?25lRe */[?12l[?25h[?25lea */[?12l[?25h[?25lad */[?12l[?25h[?25ldV */[?12l[?25h[?25lVo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lbçµ‚ã‚ã‚Š */[?12l[?25h[13;19H[12;30H[10;37H[?25l[6;24H[46m{[9;7H}[?12l[?25h[?25l[m[6;24H{[9;7H}[8;17H[?12l[?25h[7;38H[?25l[6;24H[46m{[9;7H}[6;25H[?12l[?25h[?25l[m{[9;7H}[5;38H[?12l[?25h[?25l[1;27H[46m{[4;7H}[?12l[?25h[?25l[m[1;27H{[4;7H}[3;38H[?12l[?25h[2;38H[?25l[1;27H[46m{[4;7H}[1;28H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m324 [m  SortVocab();[2;27H{[5;7H}[28;1H[94m@                                                                                       [1;19H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m323 [m  }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m322 [m    i++;[26;1H[94m@                                                                                       [27;1H@                                                                                       [28;1H@                                                                                       [1;13H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m321 [m    fscanf(fin, "%lld%c", &vocab[46m[[ma[46m][m.cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’vv[2;1H[93m    [mocab[a].cnã«å–è¾¼ã¿ï¼Œ */[1;38H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m320 [m    a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */[2;37H[a][48Cvv[3;1H[93m [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m319 [m    if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */[1;38H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m318 [m    ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */[1;37H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m317 [m  while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */[28;1H[94m@                                                                                       [1;35H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m316 [m  vocab_size = 0;[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m315 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[2;1H[93m    [mizeã®æ™‚ */[1;38H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m314 [m  }[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m313 [m    exit(1);[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m312 [m    printf("Vocabulary file not found\n");[1;38H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m311 [m  if (fin == NULL) [46m{[4;7H}[1;25H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º[2;1H[93m    [må°‚ç”¨ã§é–‹ã */[3;24H{[6;7H}[28;1H[94m@                                                                                       [1;38H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m309 [m  char word[MAX_STRING];[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m308 [m  char c;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m307 [m  long long a, i = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocabï¼Œ337è¡Œç›®ã¾ã§ */[1;38H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m305 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m304 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m303 [m  fclose(fo);[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m302 [m  for [46m([mi = 0; i < vocab_size; i++[46m)[m fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[2;1H[93m    [mcn);[1;38H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[2;1H[93m    [må°‚ç”¨ã§é–‹ã */[3;11H([26C)[49C..[4;1H[93m [1;38H[?12l[?25h[?25l[m[50C[94m>>[m[2;1H[93m [m[3;11H[46m([26C)[m[49C..[4;1H[93m [3;38H[?12l[?25h[?25l[m[3;11H([26C)[49C..[4;1H[93m [5;18H[?12l[?25h[?25l[6;6H[?12l[?25h
305 [8;38H[9;26H[10;14H[11;29H[12;38H[?25l[m[14;24H[46m{[17;7H}[14;25H[?12l[?25h[?25l[m{[17;7H}[15;38H[?12l[?25h[16;17H[?25l[14;24H[46m{[17;7H}[?12l[?25h[?25l[m[14;24H{[17;7H}[18;38H[?12l[?25h[20;22H[21;35H[22;37H[23;38H[24;38H[?25l[25;37H[46m[[ma[46m][m[48Cvv[26;1H[93m [25;38H[?12l[?25h[?25l[m[a][48Cvv[26;1H[93m [27;13H[?12l[?25h[?25l[m[21;17H[46m{[28;7H}[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[19;17H{[26;7H}
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {[27;19H[?12l[?25h[?25l[28;28H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);[27;38H[?12l[?25h[28;38H[?25l[1;28r[28;1H
[1;29r[25;27H[46m{[m


[93m328 [m  [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[24;27H{[27;7H}
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */[28;38H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m330 [m  if (fin == NULL) {[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m331 [m    printf("ERROR: training data file not found!\n");[28;38H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m332 [m    exit(1);[?12l[?25h[?25l[1;28r[28;1H
[1;29r[25;24H[46m{[m


[93m333 [m  [46m}[?12l[?25h[?25l[1;28r[m[1;1H[3M[1;29r[22;24H{[25;7H}
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤[27;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);[26;37H[?12l[?25h[28;30H[26;37H[?25l[22;24H[46m{[25;7H}[?12l[?25h[?25l[m[22;24H{[25;7H}[24;17H[?12l[?25h[23;38H[?25l[22;24H[46m{[25;7H}[22;25H[?12l[?25h[?25l[m{[25;7H}[21;38H[?12l[?25h[?25l[17;27H[46m{[20;7H}[?12l[?25h[?25l[m[17;27H{[20;7H}[19;38H[?12l[?25h[29;1H[K[19;37H[?25l[?12l[?25h[18;37H[?25l[17;27H[46m{[20;7H}[17;27H[?12l[?25h[?25l[m{[20;7H}[16;18H[?12l[?25h[?25l[8;17H[46m{[15;7H}[?12l[?25h[?25l[m[8;17H{[15;7H}[14;12H[?12l[?25h[?25l[12;37H[46m[[ma[46m][m[48Cvv[13;1H[93m [12;37H[?12l[?25h[?25l[m[a][48Cvv[13;1H[93m [11;37H[?12l[?25h[10;36H[9;37H[8;34H[7;21H[5;37H[?25l[m[1;24H[46m{[4;7H}[?12l[?25h[?25l[m[1;24H{[4;7H}[3;16H[?12l[?25h[2;37H[?25l[1;24H[46m{[4;7H}[1;24H[?12l[?25h[?25l[1;28r[m[1;1H[2L[1;29r[1;1H[93m310 [m  FILE *fin = fopen(read_vocab_file, "rb"); /* read_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§èª­å‡º [2;1H[93m    [må°‚ç”¨ã§é–‹ã */[3;24H{[6;7H}[28;1H[94m@                                                                                       [1;37H[?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m309 [m  char word[MAX_STRING];[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m308 [m  char c;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m307 [m  long long a, i = 0;[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m306 [mvoid ReadVocab() { /* voidå‹é–¢æ•°ReadVocabï¼Œ337è¡Œç›®ã¾ã§ */[1;37H[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m305 [?12l[?25h[?25l[1;28r[m[1;1H[L[1;29r[1;1H[93m304 [m}[?12l[?25h[?25l[1;28r[1;1H[L[1;29r[1;1H[93m303 [m  fclose(fo);[?12l[?25h[2;5H[3;5H[4;37H[5;25H[6;13H[7;28H[8;37H[?25l[51C  [9;1H[93m [m[10;24H[46m{[13;7H}[10;24H[?12l[?25h[?25l[m{[13;7H}[8;37H[?12l[?25h[7;28H[6;13H[5;25H[4;37H[3;5H[2;5H[1;17H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m302 [m  for (i = 0; i < vocab_size; i++) fprintf(fo, "%s %lld\n", vocab[i].word, vocab[i]..[2;1H[93m    [mcn);[1;37H[?12l[?25h[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m301 [m  FILE *fo = fopen(save_vocab_file, "wb"); /* save_vocab_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼[94m>>[m[2;1H[93m    [må°‚ç”¨ã§é–‹ã */[1;37H[?12l[?25h[3;37H[5;17H[6;5H[7;5H[8;37H[9;25H[10;13H[11;28H[12;37Hile, "rb[?25l[12;24H[46m([21C)[m[41C  [13;1H[93m [12;46H[?12l[?25h[?25l[m[12;24H([21C)[41C  [13;1H[93m [12;47H[?12l[?25h[m; /* read_vocab_file[2C[2C[2C[2C[2C[2C[2C[2C[2C[2C[13;5H[2C[2C[2C[2C[2C [2C[?25l[29;1H[1m-- INSERT --[13;16H[?12l[?25h[?25l[m */[13;16H[K[13;13H[?12l[?25h[?25lã */[?12l[?25h[?25l[13;16H[K[14;5H */[14;8H[K[15;6H if (fin == NULL) {[15;25H[K[16;8H printf("Vocabulary file not found\n");[17;6H   exit(1);[18;6H }[18;8H[K[19;1H[93m316 [m  for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[20;1H[93m    [mizeã®æ™‚ */[20;15H[K[21;6H vocab_size = 0;[21;22H[K[22;6H while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */[22;35H[K[23;8H ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */[23;64H[K[24;8H if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */[25;8H a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */ [25;78H[K[26;1H[93m322 [m    fscanf(fin, "%lld%c", &vocab[a].cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’vv[27;1H[93m    [mocab[a].cnã«å–è¾¼ã¿ï¼Œ */[28;6H   i++;[14;5H[?12l[?25h[?25l[13;15H */[14;5H  if (fin == NULL) {[15;6H   printf("Vocabulary file not found\n");[16;8H exit(1);[16;17H[K[17;6H }[17;9H[K[18;6H for (a = 0; a < vocab_hash_size; a++) vocab_hash[a] = -1; /* 0 <= a < vocab_hash_ss[19;1H[93m    [mizeã®æ™‚ */[19;16H[K[20;1H[93m316 [m  vocab_size = 0;[21;6H while (1) { /* ç„¡é™ãƒ«ãƒ¼ãƒ— */[22;6H   ReadWord(word, fin); /* 72è¡Œç›®ã§å®šç¾©ã—ãŸReadWordé–¢æ•° */[23;8H if (feof(fin)) break; /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ãŒçµ‚ç«¯ã«é”ã—ãŸæ™‚ç„¡é™ãƒ«ãƒ¼ãƒ—ã‹ã‚‰è„±å‡º */[24;8H a = AddWordToVocab(word); /* å˜èªã‚’èªå½™ã«åŠ ãˆã‚‹é–¢æ•°AddWordToVocab */ [24;78H[K[25;8H fscanf(fin, "%lld%c", &vocab[a].cn, &c); /* ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿finã‹ã‚‰èª­å‡ºã—ãŸå€¤ã‚’vv[26;1H[93m    [mocab[a].cnã«å–è¾¼ã¿ï¼Œ */[26;28H[K[27;1H[93m322 [m    i++;[27;13H[K[28;6H }[28;9H[K[13;15H[?12l[?25h[?25lãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ */[?12l[?25h[?25l* */[?12l[?25h[?25l*f */[?12l[?25h[?25lfi */[?12l[?25h[?25lin */[?12l[?25h[?25lnã« */[?12l[?25h[?25lä»£å…¥ */[?12l[?25h[?25l[14;24H[46m{[17;7H}[14;25H[?12l[?25h[?25l[m{a[17;7H}[14;26H[?12l[?25h[?25l[46m{[m[14;25H[K[17;7H[46m}[14;25H[?12l[?25h[?25l[m{[17;7H}[14;26H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l f */[?12l[?25h[?25lfi */[?12l[?25h[?25lin */[?12l[?25h[?25lnãŒ */[?12l[?25h[?25lN */[?12l[?25h[?25lNU */[?12l[?25h[?25lUL */[?12l[?25h[?25lLL */[?12l[?25h[?25lLã® */[?12l[?25h[?25læ™‚ */[?12l[?25h[15;42H[16;17H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l ç•°å¸¸çµ‚äº† */[?12l[?25h[?25l[14;24H[46m{[17;7H}[?12l[?25h[?25l[m[14;24H{[17;7H}[18;29H[?12l[?25h[20;22H[21;28H[22;29H[23;29H[24;29H[25;29H[27;13H[?25l[21;17H[46m{[28;7H}[?12l[?25h[?25l[1;28r[m[1;1H[2M[1;29r[19;17H{[26;7H}
[93m324 [m  SortVocab();
[93m325 [m  if (debug_mode > 0) {[27;19H[?12l[?25h[?25l[28;28H[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m326 [m    printf("Vocab size: %lld\n", vocab_size);
[93m327 [m    printf("Words in train file: %lld\n", train_words);[27;29H[?12l[?25h[?25l[26;28H[?12l[?25h[25;19H[?25l[17;17H[46m{[24;7H}[?12l[?25h[?25l[m[17;17H{[24;7H}[23;13H[?12l[?25h[?25l[17;17H[46m{[24;7H}[?12l[?25h[?25l[m[17;17H{[24;7H}[25;19H[?12l[?25h[?25l[26;28H[?12l[?25h[27;29H[28;29H[?25l[1;28r[28;1H
[1;29r[25;27H[46m{[m


[93m328 [m  [46m}[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[24;27H{[27;7H}
[93m329 [m  fin = fopen(train_file, "rb"); /* èª­å‡ºãƒ¢ãƒ¼ãƒ‰ã§train_fileã‚’é–‹ã */[28;29H[?12l[?25h[?25l[24;27H[46m{[27;7H}[?12l[?25h[?25l[m[24;27H{[27;7H}[26;29H[?12l[?25h[25;29H[?25l[24;27H[46m{[27;7H}[24;28H[?12l[?25h[?25l[m{[27;7H}[23;19H[?12l[?25h[?25l[15;17H[46m{[22;7H}[?12l[?25h[?25l[m[15;17H{[22;7H}[21;13H[?12l[?25h[19;29H[18;29H[29;1H[K[18;28H[?25l[?12l[?25h[?25l[29;1H/[?12l[?25hReadVocab[?25l[1;28r[1;1H[9M[1;29r[20;1H[93m330 [m  if (fin == NULL) {
[93m331 [m    printf("ERROR: training data file not found!\n");
[93m332 [m    exit(1);
[93m333 [m  }
[93m334 [m  fseek(fin, 0, SEEK_END); /* ãƒ•ã‚¡ã‚¤ãƒ«finã®ãƒ•ã‚¡ã‚¤ãƒ«ä½ç½®æ¼”ç®—å­ã‚’SEEK_ENDã‚’åŸºæº–ã«0ãƒã‚¤ [25;1H[93m    [mãƒˆç§»å‹• */
[93m335 [m  file_size = ftell(fin);
[93m336 [m  fclose(fin);
[93m337 [m} /* 306è¡Œç›®ã‹ã‚‰ã®ReadVocabçµ‚ã‚ã‚Š */[29;1H[K[28;23H[?12l[?25h[?25l
/ReadVocab[27m[m[H[2J[1;1H[93m540 [m  free(neu1); /* 370è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1ã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m541 [m  free(neu1e); /* 371è¡Œç›®ã§ç¢ºä¿ã—ãŸneu1eã®ãƒ¡ãƒ¢ãƒªã‚’è§£æ”¾ */
[93m542 [m  pthread_exit(NULL); /* å‘¼ã³å‡ºã—ãŸã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚äº†(557è¡Œç›®ã¨558è¡Œç›®ã«é–¢ä¿‚) */
[93m543 [m} /* 363è¡Œç›®ã‹ã‚‰ã®TrainModelThreadçµ‚ã‚ã‚Š */
[93m544 
545 [mvoid TrainModel() { /* 614è¡Œç›®ã¾ã§ */
[93m546 [m  long a, b, c, d;
[93m547 [m  FILE *fo;
[93m548 [m  pthread_t *pt = (pthread_t *)malloc(num_threads * sizeof(pthread_t)); /* pthread([94m>>[m[10;1H[93m    [mãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª) */
[93m549 [m  printf("Starting training using file %s\n", train_file);
[93m550 [m  starting_alpha = alpha;
[93m551 [m  if (read_vocab_file[0] != 0) ReadVocab(); else LearnVocabFromTrainFile(); /* read__[14;1H[93m    [mvocab_file[0] != 0ã®æ™‚ã¯306è¡Œç›®ã®ReadVocabï¼Œãã†ã§ãªã„æ™‚ã¯263è¡Œç›®ã®LearnVocabFromTraa[15;1H[93m    [minFile */
[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab();
[93m553 [m  if (output_file[0] == 0) return;
[93m554 [m  InitNet();
[93m555 [m  if (negative > 0) InitUnigramTable();
[93m556 [m  start = clock();
[93m557 [m  for (a = 0; a < num_threads; a++) pthread_create(&pt[a], NULL, TrainModelThread, (([22;1H[93m    [mvoid *)a); /* 0 <= 1 < num_threadsã§æ–°è¦ã«ã‚¹ãƒ¬ãƒƒãƒ‰(ID: pt[a])ã‚’ä½œæˆã—ï¼ŒTrainModelThrr[23;1H[93m    [meadã‚’å®Ÿè¡Œã™ã‚‹ */
[93m558 [m  for (a = 0; a < num_threads; a++) pthread_join(pt[a], NULL); /* ã‚¹ãƒ¬ãƒƒãƒ‰ID: pt[a][94m>>[m[25;1H[93m    [mãŒçµ‚äº†(TrainModelThreadãŒ543è¡Œç›®ã§ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’çµ‚ã‚ã‚‰ã›ã‚‹)ã™ã‚‹ã¾ã§å®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ */
[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ6133[27;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */
[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */[13;36H[?12l[?25h[16;36HSaveVoca[?25lb[46m()[?12l[?25h[?25l([?12l[?25h[?25l[m()[?12l[?25h[?25l[29;1H[1m-- INSERT --[16;48H[?12l[?25h[?25l[m [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h [?25l s */[?12l[?25h[?25lsa */[?12l[?25h[?25lav */[?12l[?25h[?25lve */[?12l[?25h[?25le_ */[?12l[?25h[?25l_v */[?12l[?25h[?25lvo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb_ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25le[ */[?12l[?25h[?25l[0 */[?12l[?25h[?25l[46m[[m0[46m][m */[?12l[?25h[?25l[0]  */[?12l[?25h[?25l ! */[?12l[?25h[?25l!= */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h[?25l0ã® */[?12l[?25h[?25læ™‚ã¯ */[?12l[?25h[?25l3 */[?12l[?25h[?25l39 */[?12l[?25h[?25l99 */[?12l[?25h[?25l[17;28r[17;1H[L[1;29r[16;83H9è¡Œç›®  [17;1H[93m    [m*/[16;88H[?12l[?25h[?25l[94m>>[m[17;1H[93m    [mã® */[?12l[?25h[16;86H[?25l99è¡Œç›®ã® [17;1H[93m    [m */[17;8H[K[16;81H[?12l[?25h[?25l299è¡Œç›®[94m>>[m[17;1H[93m    [mã® */[16;82H[?12l[?25h99[2C[17;5H[2C [?25lS */[?12l[?25h[?25lSa */[?12l[?25h[?25lav */[?12l[?25h[?25lve */[?12l[?25h[?25leC */[?12l[?25h[?25le */[17;14H[K[17;11H[?12l[?25h[?25leV */[?12l[?25h[?25lVo */[?12l[?25h[?25loc */[?12l[?25h[?25lca */[?12l[?25h[?25lab */[?12l[?25h[?25lb( */[?12l[?25h[?25l[46m()[m */[?12l[?25h[?25l()ã‚’ */[?12l[?25h[?25lé–‹ã */[?12l[?25h[?25l */[17;25H[K[17;22H[?12l[?25h[?25l */[17;23H[K[17;20H[?12l[?25h[?25l[46m()[m */[17;21H[K[17;18H[?12l[?25h[?25l()[18;39H[?12l[?25h[19;17H[18;39H[?25l [?12l[?25h[?25l ?[?12l[?25h[?25l[18;40H[K[18;40H[?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l o */[?12l[?25h[?25lou */[?12l[?25h[?25lut */[?12l[?25h[?25ltp */[?12l[?25h[?25lpu */[?12l[?25h[?25lut */[?12l[?25h[?25lt_ */[?12l[?25h[?25l__ */[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lf */[18;55H[K[18;52H[?12l[?25h[?25l_ */[18;54H[K[18;51H[?12l[?25h[?25l_ */[18;53H[K[18;50H[?12l[?25h[?25l_f */[?12l[?25h[?25lfi */[?12l[?25h[?25lil */[?12l[?25h[?25lle */[?12l[?25h[?25le[ */[?12l[?25h[?25l[0 */[?12l[?25h[?25l[46m[[m0[46m][m */[?12l[?25h[?25l[0]  */[?12l[?25h[?25l = */[?12l[?25h[?25l== */[?12l[?25h[?25l  */[?12l[?25h[?25l 0 */[?12l[?25h[?25l0ã® */[?12l[?25h[?25læ™‚ã¯ */[?12l[?25h[?25lã“ã“ã§ */[?12l[?25h[?25lçµ‚ã‚ã‚Š */[?12l[?25h[19;17H[?25l[46m()[?12l[?25h[?25l[?12l[?25h[?25l[?12l[?25h[?25l[m()[?12l[?25h[?25l[18;10H[46m([19C)[18;11H[?12l[?25h[?25l[m([19C)[18;12H[?12l[?25hutput_fil[?25le[46m[[m0[46m][?12l[?25h[?25l[[?12l[?25h[?25l[m0[?12l[?25h[?25l[1C[?12l[?25h[?25l[0] [?12l[?25h== [?25l[18;10H[46m([19C)[?12l[?25h[?25l)[?12l[?25h[?25l[m[18;10H([19C) [?12l[?25hreturn; /* output_fil[?25le[46m[[m0[46m][?12l[?25h[?25l[[?12l[?25h[?25l[m0[?12l[?25h[?25l[1C[?12l[?25h[?25l[0] [?12l[?25h== 0[2C[2C[2C[2C[2C[?25lTã“ã“ã§çµ‚ã‚ã‚Š */[18;69H[?12l[?25h[?25lTrã“ã“ã§çµ‚ã‚ã‚Š */[18;70H[?12l[?25h[?25lraã“ã“ã§çµ‚ã‚ã‚Š */[18;71H[?12l[?25h[?25laiã“ã“ã§çµ‚ã‚ã‚Š */[18;72H[?12l[?25h[?25linã“ã“ã§çµ‚ã‚ã‚Š */[18;73H[?12l[?25h[?25lnMã“ã“ã§çµ‚ã‚ã‚Š */[18;74H[?12l[?25h[?25l[19;28r[19;1H[L[1;29r[18;73HMoã“ã“ã§çµ‚ã‚ã‚Š **[19;1H[93m    [m/[28;1H[94m@                                                                                       [18;75H[?12l[?25h[?25l[modã“ã“ã§çµ‚ã‚ã‚Š  [19;1H[93m    [m*/[18;76H[?12l[?25h[?25ldeã“ã“ã§çµ‚ã‚ã‚Š [19;1H[93m    [m */[18;77H[?12l[?25h[?25lelã“ã“ã§çµ‚ã‚[94m>>[m[19;1H[93m    [mã‚Š */[18;78H[?12l[?25hinModel[?25lã¯[2Cã“ã§çµ‚[94m>>[m[19;1H[93m [m[3Cã‚ã‚Š */[18;80H[?12l[?25h[20;17H[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*/[?12l[?25h[?25l 3 */[?12l[?25h[?25l33 */[?12l[?25h[?25l39 */[?12l[?25h[?25l9è¡Œç›®ã® */[?12l[?25h[?25lI */[?12l[?25h[?25lIn */[?12l[?25h[?25lni */[?12l[?25h[?25lit */[?12l[?25h[?25ltN */[?12l[?25h[?25lNe */[?12l[?25h[?25let */[?12l[?25h[21;37Habl[?25le[46m()[?12l[?25h[?25l([?12l[?25h[?25l)[?12l[?25h[?25l[m();[?12l[?25h[?25l [?12l[?25h[?25l /[?12l[?25h[?25l/*[?12l[?25h[?25l [?12l[?25h[?25l [?12l[?25h[?25l *[?12l[?25h[?25l*?[?12l[?25h?[?25l[21;50H[K[21;50H[?12l[?25h[?25l*/[?12l[?25h[?25l ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ */[?12l[?25h[?25ln */[?12l[?25h[?25lne */[?12l[?25h[?25leg */[?12l[?25h[?25lga */[?12l[?25h[?25lav */[?12l[?25h[?25la */[21;69H[K[21;66H[?12l[?25h[?25lat */[?12l[?25h[?25lti */[?12l[?25h[?25liv */[?12l[?25h[?25lve */[?12l[?25h[?25l  */[?12l[?25h[?25l = */[?12l[?25h[?25l== */[?12l[?25h[?25l  */[?12l[?25h[?25l 5 */[?12l[?25h[?25l5ã‚ˆã‚Š */[?12l[?25h[?25lT */[?12l[?25h[?25lTR */[?12l[?25h[?25lRU */[?12l[?25h[?25lUE */[?12l[?25h[?25lEï¼Œ */[?12l[?25h[?25l5 */[21;86H[?12l[?25h[?25l[22;28r[22;1H[L[1;29r[21;85H53 **[22;1H[93m    [m/[21;87H[?12l[?25h[?25l3è¡Œ[22;4H[93m [mç›®ã® */[?12l[?25h[?25lI */[?12l[?25h[?25lIn */[?12l[?25h[?25lni */[?12l[?25h[?25lit */[?12l[?25h[?25ltU */[?12l[?25h[?25lUn */[?12l[?25h[?25lni */[?12l[?25h[?25lig */[?12l[?25h[?25lgr */[?12l[?25h[?25lra */[?12l[?25h[?25lam */[?12l[?25h[?25lmT */[?12l[?25h[?25lTa */[?12l[?25h[?25lab */[?12l[?25h[?25lbl */[?12l[?25h[?25lle */[?12l[?25h[23;23H[25;25H[28;25H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m559 [m  fo = fopen(output_file, "wb"); /* output_fileã‚’ãƒã‚¤ãƒŠãƒªãƒ¢ãƒ¼ãƒ‰ã§æ›¸è¾¼å°‚ç”¨ã§é–‹ãï¼Œ6133[28;1H[93m    [mè¡Œç›®ã§é–‰ã˜ã‚‹ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m560 [m  if (classes == 0) { /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯44è¡Œç›®ã®classes = 0ã‚ˆã‚ŠTRUEï¼Œ569è¡Œç›®ã¾ã§ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m561 [m    // Save the word vectors[?12l[?25h[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m562 [m    fprintf(fo, "%lld %lld\n", vocab_size, layer1_size); /* foã«vocab_sizeã¨layer1_ss[28;1H[93m    [mizeã‚’long longå‹ã§ãã‚Œãã‚Œå‡ºåŠ› */[28;25H[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m563 [m    for (a = 0; a < vocab_size; a++) { /* 0 <= a < vocab_sizeã®æ™‚ï¼Œ568è¡Œç›®ã¾ã§ */[?12l[?25h[?25l[1;28r[28;1H
[1;29r[28;1H[93m564 [m      fprintf(fo, "%s ", vocab[a].word); /* foã«vocab[a].wordã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ› */[?12l[?25h[?25l[1;28r[1;1H[4M[1;29r[25;1H[93m565 [m      if (binary) for (b = 0; b < layer1_size; b++) fwrite(&syn0[a * layer1_size + bb[26;1H[93m    [m], sizeof(real), 1, fo); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯41è¡Œç›®ã®binary = 0ã‚ˆã‚Šå‹•ãï¼Œ0 <= b < layerr[27;1H[93m    [m1_sizeã®æ™‚foã«ãƒã‚¤ãƒ³ã‚¿syn0[a * layer1_size + b]ã‹ã‚‰sizeof(real) byteså˜ä½ã§1å€‹ã®ãƒ‡ãƒ¼[28;1H[93m    [mã‚¿ã‚’æ›¸è¾¼ã¿ */[26;25H[?12l[?25h[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m566 [m      else for (b = 0; b < layer1_size; b++) fprintf(fo, "%lf ", syn0[a * layer1_sizz[27;1H[93m    [me + b]); /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å‹•ã‹ãªã„ */
[93m567 [m      fprintf(fo, "\n"); /* foã«æ”¹è¡Œã‚’å‡ºåŠ› */[27;25H[?12l[?25h[28;50H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[27;43H[?12l[?25h[26;50H[25;25H[21;25H[19;87H[18;86H[17;25H[15;33H[14;87H[13;20H[11;25H[8;25H[6;23H[5;25H[3;40H[2;12H[?25l[1;28r[1;1H[2L[1;29r[1;1H[93m552 [m  if (save_vocab_file[0] != 0) SaveVocab(); /* save_vocab_file[0] != 0ã®æ™‚ã¯299è¡Œç›®[94m>>[m[2;1H[93m    [mã®SaveVocab() */[?12l[?25h[4;12H[5;40H[7;25H[8;23H[10;25H[13;25H[15;20H[16;87H[17;33H[19;25H[20;86H[21;87H[23;25H[27;25H[28;50H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m568 [m    } /* 563è¡Œç›®ã‹ã‚‰ã®foræ–‡ã“ã“ã¾ã§ */
[93m569 [m  } else { /* 612è¡Œç›®ã¾ã§ï¼Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯classes == 0ã‚ˆã‚Šå‹•ã‹ãªã„ï¼ */[27;43H[?12l[?25h[28;75H[?25l[1;28r[1;1H[2M[1;29r[27;1H[93m570 [m    // Run K-means on the word vectors
[93m571 [m    int clcn = classes, iter = 10, closeid;[27;43H[?12l[?25h[28;48H[?25l[1;28r[1;1H[3M[1;29r[26;1H[93m572 [m    int *centcn = (int *)malloc(classes * sizeof(int)); /* *centcnã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“[27;1H[93m    [mï¼Œ609è¡Œç›®ã§è§£æ”¾ */
[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611[94m>[28;1H@                                                                                       [27;23H[?12l[?25h[?25l[1;28r[m[28;1H
[1;29r[27;1H[93m573 [m    int *cl = (int *)calloc(vocab_size, sizeof(int)); /* *clã«å‹•çš„ã«ãƒ¡ãƒ¢ãƒªå‰²å½“ï¼Œ611[94m>>[m[28;1H[93m    [mè¡Œç›®ã§è§£æ”¾ */[?12l[?25h[29;1H[K[28;17H[?25l[?12l[?25h[?25l
:[?12l[?25hw[?25l"word2vec.c" 703L, 45087C written[28;17H[?12l[?25h[?25l[29;1H[K[29;1H:[?12l[?25hq[?25l[29;1H[K[29;1H[?1l>[?12l[?25h[?1049lbash-3.2$ vi word2vec.c[C[C[C[C[C[C[C[C[C[C[5Pgit pushcommit -m "Correct errors"[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[K[5Pmake
gcc word2vec.c -o word2vec -lm -pthread -O3 -march=native -Wall -funroll-loops -Wno-unused-result
bash-3.2$ makevi word2vec.c[C[C[C[C[C[C[C[C[C[C[5Pgit pushcommit -m "Correct errors"[C[C[C[C[C[C[C[C[C[C[C[C[C[Cadd .[K
bash-3.2$ git add .[5Pmakevi word2vec.c[C[C[C[C[C[C[C[C[C[C[5Pgit pushcommit -m "Correct errors"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"[1P"A"d"d" "c"o"m"m"e"n"t"s" "o"n" "w"o"r"d"2"v"e"c"."c" "2"0"1"5"-"1"0"-"2"6"-"3"
[other 2c48481] Add comments on word2vec.c 2015-10-26-3
 2 files changed, 383 insertions(+), 11 deletions(-)
bash-3.2$ git push
warning: push.default is unset; its implicit value has changed in
Git 2.0 from 'matching' to 'simple'. To squelch this message
and maintain the traditional behavior, use:

  git config --global push.default matching

To squelch this message and adopt the new behavior now, use:

  git config --global push.default simple

When push.default is set to 'matching', git will push local branches
to the remote branches that already exist with the same name.

Since Git 2.0, Git defaults to the more conservative 'simple'
behavior, which only pushes the current branch to the corresponding
remote branch that 'git pull' uses to update the current branch.

See 'git help config' and search for 'push.default' for further information.
(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode
'current' instead of 'simple' if you sometimes use older versions of Git)

Username for 'https://github.com': tatst
Password for 'https://tatst@github.com': 
Counting objects: 4, done.
Delta compression using up to 4 threads.
Compressing objects:  25% (1/4)   Compressing objects:  50% (2/4)   Compressing objects:  75% (3/4)   Compressing objects: 100% (4/4)   Compressing objects: 100% (4/4), done.
Writing objects:  25% (1/4)   Writing objects:  50% (2/4)   Writing objects:  75% (3/4)   Writing objects: 100% (4/4)   Writing objects: 100% (4/4), 6.34 KiB | 0 bytes/s, done.
Total 4 (delta 3), reused 0 (delta 0)
To https://github.com/tatst/word2vec.git
   a99d486..2c48481  other -> other
bash-3.2$ exit
exit

Script done on Mon Oct 26 20:48:07 2015
